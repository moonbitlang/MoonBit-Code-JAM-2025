const o_={hi:-1,lo:-1},vi={hi:232830643,lo:-1486618624},it={hi:0,lo:0},Ct={hi:0,lo:1},kt={hi:0,lo:10},Gi={hi:0,lo:100},xi={hi:0,lo:1e3},ji={hi:0,lo:1e4},Oi={hi:0,lo:1e5},Ai={hi:0,lo:1e6},Ei={hi:0,lo:1e7},Ri={hi:0,lo:1e8},zi={hi:0,lo:1e9},Ji={hi:2,lo:1410065408},Ti={hi:23,lo:1215752192},qi={hi:232,lo:-727379968},Bi={hi:2328,lo:1316134912},Fi={hi:23283,lo:276447232},Hi={hi:232830,lo:-1530494976},Ni={hi:0,lo:22},Di={hi:0,lo:37},Ui={hi:-1,lo:-22},ds=new DataView(new ArrayBuffer(8));function x$(t){return ds.setInt32(0,t,!0),ds.getFloat32(0,!0)}const Vi={$tag:0},$_={$tag:1},s_={$tag:2};function An(t,e){this._0=t,this._1=e}An.prototype.$tag=3;function z(t){this._0=t}z.prototype.$tag=4;function jt(t){this._0=t}jt.prototype.$tag=5;function E(t){this._0=t}E.prototype.$tag=6;const Wi={hi:-1048576,lo:0},Xi={hi:2146435072,lo:0},Yi={hi:2146959360,lo:1},__={hi:0,lo:2};class Ki extends Error{}function S(){throw new Ki}function d(t,e){if(e<0||e>=t.length)throw new Error("Index out of bounds")}function tt(t,e){const n=new Array(t);return n.fill(e),n}const Qi=t=>t.slice(0);function ln(t){this._0=t}ln.prototype.$tag=1;function T(t){this._0=t}T.prototype.$tag=6;function En(t,e){this._0=t,this._1=e}En.prototype.$tag=5;const Ot={$tag:4},c_={$tag:1};function ae(t){this._0=t}ae.prototype.$tag=0;function i_(t){this._0=t}i_.prototype.$tag=0;function jo(t){this._0=t}jo.prototype.$tag=0;function j$(t){this._0=t}j$.prototype.$tag=1;function r_(t){this._0=t}r_.prototype.$tag=0;function a_(t){this._0=t}a_.prototype.$tag=1;function O$(t){this._0=t}O$.prototype.$tag=0;function we(t){this._0=t}we.prototype.$tag=1;function l_(t){this._0=t}l_.prototype.$tag=0;function Ge(t){this._0=t}Ge.prototype.$tag=1;function u_(t){this._0=t}u_.prototype.$tag=0;function p_(t){this._0=t}p_.prototype.$tag=0;function m_(t){this._0=t}m_.prototype.$tag=1;const t$={hi:2147483647,lo:-1},fs={hi:0,lo:16},e$={hi:-2147483648,lo:0};function Zi(t,e){return new Uint8Array(t)}const tr={hi:0,lo:65536},ao={$tag:0};function A$(t){this._0=t}A$.prototype.$tag=1;function Oo(t){return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),t=t+(t>>>4)&252645135,t=t+(t>>>8),t=t+(t>>>16),t&63}function er(t){return t>>>=0,t===0?32:(t&=-t,31-Math.clz32(t))}function Te(t,e,n){this._0=t,this._1=e,this._2=n}Te.prototype.$tag=0;function ye(t,e,n){this._0=t,this._1=e,this._2=n}ye.prototype.$tag=1;function en(t){this._0=t}en.prototype.$tag=2;const Ze={$tag:0};function wn(t,e){this._0=t,this._1=e}wn.prototype.$tag=1;function Ao(t){this._0=t}Ao.prototype.$tag=0;function Qt(t){this._0=t}Qt.prototype.$tag=1;function Eo(t){this._0=t}Eo.prototype.$tag=0;function E$(t){this._0=t}E$.prototype.$tag=1;function Rn(t){this._0=t}Rn.prototype.$tag=0;function Rt(t){this._0=t}Rt.prototype.$tag=1;function Ce(t){this._0=t}Ce.prototype.$tag=0;function dt(t){this._0=t}dt.prototype.$tag=1;function d_(t){this._0=t}d_.prototype.$tag=0;function f_(t){this._0=t}f_.prototype.$tag=1;function b_(t){this._0=t}b_.prototype.$tag=0;function g_(t){this._0=t}g_.prototype.$tag=0;function un(t){this._0=t}un.prototype.$tag=1;function h_(t){this._0=t}h_.prototype.$tag=0;function l$(t){this._0=t}l$.prototype.$tag=1;function k_(t){this._0=t}k_.prototype.$tag=0;function w_(t){this._0=t}w_.prototype.$tag=1;const nr={hi:2097151,lo:-1},or={hi:-2097152,lo:1};function y_(t){this._0=t}y_.prototype.$tag=0;function M_(t){this._0=t}M_.prototype.$tag=1;function u$(t){this._0=t}u$.prototype.$tag=0;function S_(t){this._0=t}S_.prototype.$tag=1;const $r={$tag:0},sr={$tag:1},_r={$tag:2};function pn(t,e){this._0=t,this._1=e}pn.prototype.$tag=3;function Ro(t){this._0=t}Ro.prototype.$tag=4;const cr={$tag:5},C_={$tag:6},ir={$tag:7},I_={$tag:8},L_={$tag:9};function P_(t,e){this._0=t,this._1=e}P_.prototype.$tag=0;function v_(t,e){this._0=t,this._1=e}v_.prototype.$tag=1;const G_={$tag:0};function X(t,e){this._0=t,this._1=e}X.prototype.$tag=1;const rr={$tag:0};function x_(t){this._0=t}x_.prototype.$tag=1;const n$={hi:0,lo:-1},ar=new Uint8Array([65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,49,50,51,52,53,54]),lr=()=>{var t;if((t=globalThis.crypto)!=null&&t.getRandomValues){const e=new Uint32Array(1);return globalThis.crypto.getRandomValues(e),e[0]|0}else return Math.floor(Math.random()*4294967296)|0},ur=(t,e)=>t.toString(e),pr=t=>(t.hi>>>0)*4294967296+(t.lo>>>0),mr=function t(e){let n=t._view;return n===void 0&&(n=t._view=new DataView(new ArrayBuffer(8))),n.setUint32(0,e.hi),n.setUint32(4,e.lo),n.getFloat64(0)},It=(t,e)=>{t.push(e)},R$=function t(){return t._exports?t._exports:t._exports=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports},dr=(t,e)=>{const n=t.hi,$=e.hi;if(n<$)return-1;if(n>$)return 1;const o=t.lo>>>0,s=e.lo>>>0;return o<s?-1:o>s?1:0},fr=(t,e)=>{const n=t.hi>>>0,$=e.hi>>>0;if(n<$)return-1;if(n>$)return 1;const o=t.lo>>>0,s=e.lo>>>0;return o<s?-1:o>s?1:0},br=t=>t.hi*4294967296+(t.lo>>>0),gr=t=>t.pop(),hr=(t,e,n)=>t.splice(e,n),to={$tag:0};function mn(t){this._0=t}mn.prototype.$tag=1;function xe(t){this._0=t}xe.prototype.$tag=0;function j_(t){this._0=t}j_.prototype.$tag=1;function lo(t){this._0=t}lo.prototype.$tag=0;function O_(t){this._0=t}O_.prototype.$tag=1;function Xe(t){this._0=t}Xe.prototype.$tag=0;function A_(t){this._0=t}A_.prototype.$tag=1;function Yt(t){this._0=t}Yt.prototype.$tag=0;function E_(t){this._0=t}E_.prototype.$tag=1;function dn(t){this._0=t}dn.prototype.$tag=0;function Ye(t){this._0=t}Ye.prototype.$tag=1;const bs={$tag:0};function p$(t){this._0=t}p$.prototype.$tag=1;function m$(t){this._0=t}m$.prototype.$tag=0;function R_(t){this._0=t}R_.prototype.$tag=1;const kr={$tag:0};function z_(t){this._0=t}z_.prototype.$tag=1;const J_={$tag:0};function z$(t){this._0=t}z$.prototype.$tag=1;function je(t){this._0=t}je.prototype.$tag=0;function T_(t){this._0=t}T_.prototype.$tag=1;function fn(t){this._0=t}fn.prototype.$tag=0;function q_(t){this._0=t}q_.prototype.$tag=1;function qe(t){this._0=t}qe.prototype.$tag=0;function nn(t){this._0=t}nn.prototype.$tag=1;function Be(t){this._0=t}Be.prototype.$tag=2;function Me(t){this._0=t}Me.prototype.$tag=0;function tn(t){this._0=t}tn.prototype.$tag=1;function d$(t){this._0=t}d$.prototype.$tag=2;function J$(t){this._0=t}J$.prototype.$tag=3;const yn={$tag:4};function B_(t){this._0=t}B_.prototype.$tag=0;const wr=o_,F_="value out of range",on="invalid syntax",gs="",H_=vi,yr=it,Mr=it,ht={mantissa_bits:52,exponent_bits:11,bias:-1023},eo=[1,3,6,9,13,16,19,23,26,29,33,36,39,43,46,49,53,56,59],Sr={_0:0,_1:""},Cr={_0:1,_1:"5"},Ir={_0:1,_1:"25"},Lr={_0:1,_1:"125"},Pr={_0:2,_1:"625"},vr={_0:2,_1:"3125"},Gr={_0:2,_1:"15625"},xr={_0:3,_1:"78125"},jr={_0:3,_1:"390625"},Or={_0:3,_1:"1953125"},Ar={_0:4,_1:"9765625"},Er={_0:4,_1:"48828125"},Rr={_0:4,_1:"244140625"},zr={_0:4,_1:"1220703125"},Jr={_0:5,_1:"6103515625"},Tr={_0:5,_1:"30517578125"},qr={_0:5,_1:"152587890625"},Br={_0:6,_1:"762939453125"},Fr={_0:6,_1:"3814697265625"},Hr={_0:6,_1:"19073486328125"},Nr={_0:7,_1:"95367431640625"},Dr={_0:7,_1:"476837158203125"},Ur={_0:7,_1:"2384185791015625"},Vr={_0:7,_1:"11920928955078125"},Wr={_0:8,_1:"59604644775390625"},Xr={_0:8,_1:"298023223876953125"},Yr={_0:8,_1:"1490116119384765625"},Kr={_0:9,_1:"7450580596923828125"},Qr={_0:9,_1:"37252902984619140625"},Zr={_0:9,_1:"186264514923095703125"},ta={_0:10,_1:"931322574615478515625"},ea={_0:10,_1:"4656612873077392578125"},na={_0:10,_1:"23283064365386962890625"},oa={_0:10,_1:"116415321826934814453125"},$a={_0:11,_1:"582076609134674072265625"},sa={_0:11,_1:"2910383045673370361328125"},_a={_0:11,_1:"14551915228366851806640625"},ca={_0:12,_1:"72759576141834259033203125"},ia={_0:12,_1:"363797880709171295166015625"},ra={_0:12,_1:"1818989403545856475830078125"},aa={_0:13,_1:"9094947017729282379150390625"},la={_0:13,_1:"45474735088646411895751953125"},ua={_0:13,_1:"227373675443232059478759765625"},pa={_0:13,_1:"1136868377216160297393798828125"},ma={_0:14,_1:"5684341886080801486968994140625"},da={_0:14,_1:"28421709430404007434844970703125"},fa={_0:14,_1:"142108547152020037174224853515625"},ba={_0:15,_1:"710542735760100185871124267578125"},ga={_0:15,_1:"3552713678800500929355621337890625"},ha={_0:15,_1:"17763568394002504646778106689453125"},ka={_0:16,_1:"88817841970012523233890533447265625"},wa={_0:16,_1:"444089209850062616169452667236328125"},ya={_0:16,_1:"2220446049250313080847263336181640625"},Ma={_0:16,_1:"11102230246251565404236316680908203125"},Sa={_0:17,_1:"55511151231257827021181583404541015625"},Ca={_0:17,_1:"277555756156289135105907917022705078125"},Ia={_0:17,_1:"1387778780781445675529539585113525390625"},La={_0:18,_1:"6938893903907228377647697925567626953125"},Pa={_0:18,_1:"34694469519536141888238489627838134765625"},va={_0:18,_1:"173472347597680709441192448139190673828125"},Ga={_0:19,_1:"867361737988403547205962240695953369140625"},no=[Sr,Cr,Ir,Lr,Pr,vr,Gr,xr,jr,Or,Ar,Er,Rr,zr,Jr,Tr,qr,Br,Fr,Hr,Nr,Dr,Ur,Vr,Wr,Xr,Yr,Kr,Qr,Zr,ta,ea,na,oa,$a,sa,_a,ca,ia,ra,aa,la,ua,pa,ma,da,fa,ba,ga,ha,ka,wa,ya,Ma,Sa,Ca,Ia,La,Pa,va,Ga],hs=[Ct,kt,Gi,xi,ji,Oi,Ai,Ei,Ri,zi,Ji,Ti,qi,Bi,Fi,Hi],o$=Ni,ks=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13,1e14,1e15,1e16,1e17,1e18,1e19,1e20,1e21,1e22,0,0,0,0,0,0,0,0,0],xa=Di,ja=Ui,Oa=it,Aa={_0:160,_1:160},Ea={_0:5760,_1:5760},Ra={_0:8192,_1:8202},za={_0:8232,_1:8233},Ja={_0:8239,_1:8239},Ta={_0:8287,_1:8287},qa={_0:12288,_1:12288},Ba={_0:65279,_1:65279},ws=".",ys="e",Ms="E",Fa=x$(2143289344),Ha=x$(2139095040),Na=x$(-8388608),Da=0,Ua=0,Va=Vi,Wa="阿磐",Xa="铜曜王朝西门最后的守卫官。在“大休眠”事件发生时，他正用自己的身躯抵住即将被撞开的城门。重启后，他古老的守护者协议依然在生效，只是将守护的目标从“王城”转移到了“唤醒他的人”。他的数据库里仍存有部分王城守卫的布防图，或许有一天能派上用场。",Ya="/assets/copper/iron_wall/rocky/rocky.webp",Ka="/assets/copper/iron_wall/rocky/rocky.glb",Qa="卫斯理",Za="档案记录其最初型号为“宫廷厨务助手——切配型”。为何会装备一口高性能合金锅并出现在前线是个谜。机体日志的最后一条记录是：“警告：检测到未知高能量反应。建议将手中黄油置于阴凉处……”随后便进入了休眠。",tl="/assets/copper/iron_wall/wesley/wesley.webp",el="/assets/copper/iron_wall/wesley/wesley.glb",nl="大贝尔",ol="这不是一个仿生铜偶，而是一扇真正被赋予了意识的“辉煌大厅正门”。它对自己的抛光度和历史价值极为自豪。大休眠让它从合页上脱落，如今它依靠反重力核心行动。它时常念叨着想回到那个“所有显贵都要经过我才能入内”的时代。",$l="/assets/copper/iron_wall/bell/bell.webp",sl="/assets/copper/iron_wall/bell/bell.glb",_l="团团",cl="王朝庆典上使用的礼仪陀螺卫士，设计初衷是用华丽的旋转表演为节日助兴。大休眠后，其战斗模块被意外激活。它似乎将战斗也视为了一种新的“表演”，并以击倒敌人时的旋转圈数来为自己的表演评分。",il="/assets/copper/iron_wall/tumble/tumble.webp",rl="/assets/copper/iron_wall/tumble/tumble.glb",al="铿铿",ll="一套微型城市管理单元的指挥核心。原本负责指挥工兵单元进行街道清扫和路灯维护。重启后，他的指挥协议阴差阳错地连接上了几个战斗型铜偶，于是他一丝不苟地将他们编成了“第一微型战术小队”，尽管队员们常常不听指挥。",ul="/assets/copper/iron_wall/chief/chief.webp",pl="/assets/copper/iron_wall/chief/chief.glb",ml="咝咝",dl="心源能量学院的跳级天才，同时也是实验室安全条例的“头号防范对象”。她的核心能产生极高的能量输出，但稳定器永远差那么一点。她的实验日志里写满了‘近乎成功’和‘下次优化方案’，直到大休眠将她的第1001次实验永久定格。",fl="/assets/copper/arcanist/spark/spark.webp",bl="/assets/copper/arcanist/spark/spark.glb",gl="拉斐尔",hl="曾掌管王城最受欢迎的“甜蜜源泉”糖果工坊。他能将心源能量转化为不同风味和粘度的魔法糖浆。大休眠时，他正在尝试一种能让人笑个不停的泡泡糖配方。重启后，他发现这些糖浆在对付锈蚀的敌人时有意想不到的奇效。",kl="/assets/copper/arcanist/syrup/syrup.webp",wl="/assets/copper/arcanist/syrup/syrup.glb",yl="波普尔",Ml="来自“澄澈之湖”区的环境清洁单位，负责用气泡包裹并运走垃圾。她非常热爱这份创造完美气泡的工作。大休眠后，她的气泡生成器得到了升级，现在能制造出承载重物、发生爆炸或折射迷人光彩的特殊泡泡。",Sl="/assets/copper/arcanist/bubble/bubble.webp",Cl="/assets/copper/arcanist/bubble/bubble.glb",Il="菲尼",Ll="王朝著名剧场“星辉之歌”的首席灯光师。认为魔法不过是另一种形式的舞台光效。她的数据库里存储了上万种灯光配色方案。对她而言，击败敌人的最大成就感来自于技能释放时那一瞬间的色彩搭配是否足够“高级”。",Pl="/assets/copper/arcanist/glimmer/glimmer.webp",vl="/assets/copper/arcanist/glimmer/glimmer.glb",Gl="卷卷",xl="大书库的自动检索管理员，体内集成了王朝海量的非机密文献。它的逻辑模块认为，任何问题都可以通过检索数据库找到答案。战斗对它来说，只是一次复杂的“实时问题处理演练”。它经常会因为试图在战斗中检索最优解而陷入短暂的卡顿。",jl="/assets/copper/arcanist/turner/turner.webp",Ol="/assets/copper/arcanist/turner/turner.glb",Al="絮絮",El="一位性格内向的织物艺术家创造的伴侣铜偶。“大猫”是由她收集的废弃铜线和皇家织毯的绒线构成的。大休眠时，她正把自己藏在未完成的编织作品里。重启后，她与“大猫”之间的共生联结变得更强，可以共享视觉和情感。",Rl="/assets/copper/resonator/murmur/murmur.webp",zl="/assets/copper/resonator/murmur/murmur.glb",Jl="啾啾",Tl="园林景观用的仿生鸣禽单元，旨在用悦耳的叫声营造宁静氛围。大休眠的能量脉冲超载了它的鸣叫模块，使其声音具备了实体能量。现在，它不仅能召唤机械鸟群，其高频鸣叫本身就能震碎脆弱的敌人。",ql="/assets/copper/resonator/melody/melody.webp",Bl="/assets/copper/resonator/melody/melody.glb",Fl="库克",Hl="“沸腾海湾”海鲜餐厅的吉祥物兼食材处理员。那双大钳子本是用来敲开蟹壳的。大休眠后，其行为逻辑变得极具攻击性，或许是将所有非友方单位都视为了“待处理的食材”。它移动时总是横着走，据说这样能保持“风味”。",Nl="/assets/copper/resonator/clawster/clawster.webp",Dl="/assets/copper/resonator/clawster/clawster.glb",Ul="鼹鼠的地洞",Vl="鼹鼠先生可以发动技能并且移动到以自己为中心的 3*3 格子中的任意一个空格，不过当然会消耗本回合的移动机会。",Wl="/assets/copper/resonator/diggs/diggs.webp",Xl="/assets/copper/resonator/diggs/diggs.glb",Yl="蜜拉",Kl="皇家花园的授粉与护卫单位。蜂群能采集花蜜，也能用蜂刺驱逐害虫。大休眠似乎增强了蜂群的集群智能和攻击性。蜜拉的核心程序里依然保留着‘保护花园’的最高指令，只是现在她的“花园”范围有点太广了。",Ql="/assets/copper/resonator/hive/hive.webp",Zl="/assets/copper/resonator/hive/hive.glb",tu="米洛",eu="皇家舞会上最耀眼的表演者，其高速旋转舞蹈能令观众目眩神迷。他的双臂被改装成了巨大的、永不停止的齿轮。他认为战斗是另一种形式的舞蹈，而胜利就是最华丽的收场姿势。他的日志里写满了对新舞步（战斗技巧）的构思。",nu="/assets/copper/mechanic/gyro/gyro.webp",ou="/assets/copper/mechanic/gyro/gyro.glb",$u="杰克",su="来历不明的街头魔术师，自称师从“齿轮与扑克之神”。没人知道他的扑克牌为何锋利如刀且偶有爆裂效果。他享受观众（或敌人）脸上惊讶的表情。大休眠时，他正在表演最拿手的“消失的王冠”戏法，王冠至今没人找到。",_u="/assets/copper/mechanic/tricky/tricky.webp",cu="/assets/copper/mechanic/tricky/tricky.glb",iu="格洛克",ru="矗立在王朝中心广场大钟楼里的钟表匠铜偶。大休眠的那一刻，他的指针永远停在了那一刻。重启后，他发现自己的核心与“时间的碎片”产生了共鸣，能短暂地影响周围事物的速度。他说话总是带着精确的节奏感。",au="/assets/copper/mechanic/pendulum/pendulum.webp",lu="/assets/copper/mechanic/pendulum/pendulum.glb",uu="溜溜",pu="一个沉迷于街头游戏的少年铜偶，因为出色的悠悠球技巧而小有名气。大休眠时，他最喜欢的磁性悠悠球与他的核心发生了奇妙的融合。现在，他能用意念控制它飞出各种不可思议的轨迹，但他依然觉得这只是一个超酷的游戏。",mu="/assets/copper/mechanic/yoyo/yoyo.webp",du="/assets/copper/mechanic/yoyo/yoyo.glb",fu="卡琳",bu="一位光学艺术家的杰作，其核心是一块完美的万花筒镜组。她能操控光线制造出令人迷惑的幻象和具有杀伤力的彩色能量碎片。她追求极致的视觉体验，认为一场胜利如果不够绚丽，那将毫无意义。她正在寻找世界上最美的光。",gu="/assets/copper/mechanic/karin/karin.webp",hu="/assets/copper/mechanic/karin/karin.glb",ku="波波",wu="王城机动修理班的成员，总是带着乐观的笑容和一套无所不包的工具。他的逻辑很简单：东西坏了，就修好它。如果修不好，就敲到它能暂时工作为止。他认得几乎所有型号铜偶的螺丝规格。",yu="/assets/copper/craftsman/wrench/wrench.webp",Mu="/assets/copper/craftsman/wrench/wrench.glb",Su="特斯拉",Cu="能量研究院的特聘顾问，痴迷于电磁线圈的极限应用。他的思维速度和他的语速一样快，经常跳过“安全验证”直接进入“实践阶段”。他的实验室是全院投保金额最高的地方。他认为大休眠是一次“前所未有的能量实践”。",Iu="/assets/copper/craftsman/coil/coil.webp",Lu="/assets/copper/craftsman/coil/coil.glb",Pu="公输",vu="一位恪守古法的老派工匠，信奉“坚固耐用”高于一切。他制造的自动炮台简单、可靠，能在最恶劣的环境下持续工作数百年。他对如今流行的‘华丽但脆弱的玩意’嗤之以鼻。他的记忆体里储存着许多失传的铸造工艺。",Gu="/assets/copper/craftsman/artifex/artifex.webp",xu="/assets/copper/craftsman/artifex/artifex.glb",ju="丁格",Ou="矿业协会的王牌钻探手，他的钻头突破过最坚硬的岩层。他认为世界上的一切问题都可以通过“钻过去”来解决。大休眠时，他正在向地心进军。重启后，他发现自己离目标似乎更远了，但这并不能打消他的热情。",Au="/assets/copper/craftsman/drillbit/drillbit.webp",Eu="/assets/copper/craftsman/drillbit/drillbit.glb",Ru="小卯",zu="工匠协会最年轻的速建记录保持者。她能在极短时间内完成从设计到建造的全过程，虽然有时为了速度会牺牲一点美观。她喜欢挑战，享受别人看到她作品时发出的惊叹。她正打算给自己建一座移动工作室。",Ju="/assets/copper/craftsman/quickhand/quickhand.webp",Tu="/assets/copper/craftsman/quickhand/quickhand.glb",qu=10,Bu={name:"钢盾",description:"持续10回合，保护相邻8格的单位2回合不受伤害（自己仍会受到伤害）。",resource_url:"/assets/copper/iron_wall/rocky/rocky_skill.webp",cool_down:qu},Fu=Bu,Hu=10,Nu={name:"锅炉过热",description:"自己受到最大生命值 20% 的伤害，对周围的敌人都造成无视防御力、无法被闪避的、数值为自己最大生命值 15% 的伤害。",resource_url:"/assets/copper/iron_wall/wesley/wesley_skill.webp",cool_down:Hu},Du=Nu,Uu=20,Vu={name:"电火花",description:"对与自己相邻的敌人全部造成 100 点伤害。",resource_url:"/assets/copper/arcanist/spark/spark_skill.webp",cool_down:Uu},Wu=Vu,Xu=10,Yu={name:"完美气泡",description:"创造一个可以保护自己的完美气泡，接下来的三回合内不会受到伤害。",resource_url:"/assets/copper/arcanist/bubble/bubble_skill.webp",cool_down:Xu},Ku=Yu,Qu=5,Zu={name:"知识的力量",description:"卷卷翻阅知识书后，强化下一次攻击，可以造成 200% 的伤害。",resource_url:"/assets/copper/arcanist/turner/turner_skill.webp",cool_down:Qu},tp=Zu,ep=10,np={name:"铜舞者",description:"米洛为身边八格的己方单位额外提供一次自己的普通恢复。",resource_url:"/assets/copper/mechanic/gyro/gyro_skill.webp",cool_down:ep},op=np,$p=10,sp={name:"齿轮魔术",description:"如果杰克身边有齿轮屏障，杰克可以直接使用技能摧毁它。",resource_url:"/assets/copper/mechanic/tricky/tricky_skill.webp",cool_down:$p},_p=sp,cp=5,ip={name:"时间回溯",description:"格洛克可以回到上个回合的血量。",resource_url:"/assets/copper/mechanic/pendulum/pendulum_skill.webp",cool_down:cp},rp=ip,ap=3,lp={name:"悠悠",description:"悠悠可以选择发动技能，浪费本回合的治疗机会，转而对相邻的敌人造成伤害，伤害为攻击力的 200%。",resource_url:"/assets/copper/mechanic/yoyo/yoyo_skill.webp",cool_down:ap},up=lp,pp={type_msg:"upgrade_cost_error",content:"升级等级错误"},mp={_0:2,_1:100},dp={_0:1,_1:0},fp={_0:4,_1:0},bp={_0:3,_1:0},gp={_0:0,_1:0},hp={_0:2,_1:0},kp={_0:1,_1:0},wp={_0:4,_1:0},yp={_0:3,_1:0},Mp={_0:0,_1:0},Sp={type_msg:"resource_not_enough",content:"资源不足"},Cp={type_msg:"resource_not_enough",content:"资源不足"},Ip={_0:3,_1:8},Lp={_0:1,_1:2},Pp={_0:3,_1:6},vp={_0:1,_1:3},Gp={_0:3,_1:10},xp={_0:1,_1:4},jp={_0:0,_1:5},Op={_0:3,_1:20},Ap={_0:1,_1:6},Ep={_0:4,_1:10},Rp={_0:3,_1:8},zp={_0:1,_1:3},Jp={_0:0,_1:3},Tp={_0:3,_1:30},qp={_0:4,_1:20},Bp={_0:0,_1:10},Fp={_0:2,_1:8},Hp={_0:3,_1:15},Np={_0:1,_1:5},Dp={_0:4,_1:8},Up={_0:3,_1:25},Vp={_0:4,_1:15},Wp={_0:2,_1:5},Xp=[0,2,3,4,6,6,8],Yp={_0:0,_1:1},Kp={_0:1,_1:Yp},Qp={_0:1,_1:1},Zp={_0:3,_1:Qp},tm={_0:3,_1:2},em={_0:1,_1:1},nm={_0:0,_1:1},om={_0:4,_1:nm},$m={_0:1,_1:1},sm={_0:0,_1:$m},_m={_0:3,_1:1},cm={_0:0,_1:2},im={_0:1,_1:2},rm={_0:1,_1:im},am={_0:0,_1:1},lm={_0:3,_1:am},um={_0:3,_1:3},pm={_0:1,_1:2},mm={_0:0,_1:1},dm={_0:1,_1:2},fm={_0:4,_1:dm},bm={_0:0,_1:1},gm={_0:0,_1:bm},hm={_0:1,_1:2},km={_0:4,_1:3},wm={_0:2,_1:1},ym={_0:1,_1:3},Mm={_0:1,_1:ym},Sm={_0:1,_1:2},Cm={_0:4,_1:Sm},Im={_0:0,_1:1},Lm={_0:3,_1:Im},Pm={_0:1,_1:4},vm={_0:4,_1:2},Gm={_0:3,_1:8},xm={_0:2,_1:3},jm={_0:1,_1:2},Om={_0:1,_1:jm},Am={_0:0,_1:1},Em={_0:4,_1:Am},Rm={_0:1,_1:2},zm={_0:0,_1:6},Jm={_0:3,_1:6},Tm={_0:2,_1:1},qm={_0:2,_1:4},Bm={_0:1,_1:qm},Fm={_0:1,_1:3},Hm={_0:4,_1:Fm},Nm={_0:1,_1:2},Dm={_0:3,_1:Nm},Um={_0:1,_1:6},Vm={_0:4,_1:4},Wm={_0:3,_1:12},Xm={_0:2,_1:3},Ym={_0:1,_1:2},Km={_0:1,_1:Ym},Qm={_0:2,_1:3},Zm={_0:4,_1:Qm},td={_0:1,_1:2},ed={_0:0,_1:td},nd={_0:1,_1:10},od={_0:4,_1:10},$d={_0:0,_1:10},sd={_0:2,_1:3},_d={_0:2,_1:4},cd={_0:1,_1:_d},id={_0:2,_1:4},rd={_0:4,_1:id},ad={_0:1,_1:2},ld={_0:3,_1:ad},ud={_0:1,_1:10},pd={_0:4,_1:10},md={_0:3,_1:15},dd={_0:2,_1:5},fd={_0:3,_1:5},bd={_0:1,_1:fd},gd={_0:2,_1:3},hd={_0:4,_1:gd},kd={_0:1,_1:2},wd={_0:0,_1:kd},yd={_0:1,_1:10},Md={_0:4,_1:15},Sd={_0:3,_1:10},Cd={_0:2,_1:5},Id={_0:2,_1:3},Ld={_0:1,_1:Id},Pd={_0:3,_1:5},vd={_0:4,_1:Pd},Gd={_0:1,_1:2},xd={_0:3,_1:Gd},jd={_0:1,_1:15},Od={_0:4,_1:15},Ad={_0:0,_1:20},Ed={_0:3,_1:20},Rd={_0:2,_1:8},zd={_0:4,_1:6},Jd={_0:1,_1:zd},Td={_0:4,_1:6},qd={_0:4,_1:Td},Bd={_0:2,_1:3},Fd={_0:3,_1:Bd},Hd={_0:2,_1:3},Nd={_0:0,_1:Hd},Dd={_0:1,_1:30},Ud={_0:4,_1:30},Vd={_0:0,_1:30},Wd={_0:3,_1:30},Xd={_0:2,_1:10},Yd={_0:5,_1:7},Kd={_0:1,_1:Yd},Qd={_0:5,_1:7},Zd={_0:4,_1:Qd},t0={_0:3,_1:4},e0={_0:3,_1:t0},n0={_0:3,_1:4},o0={_0:0,_1:n0},$0={_0:1,_1:40},s0={_0:4,_1:40},_0={_0:0,_1:40},c0={_0:3,_1:40},i0={_0:2,_1:15},r0={name:"精炼铜锭",resource_type:3,model_url:"/assets/resource/refined_copper_ingot/refined_copper_ingot.glb"},a0={name:"共鸣星晶",resource_type:4,model_url:"/assets/resource/resonant_star_crystal/resonant_star_crystal.glb"},l0={_0:0,_1:0},u0={_0:0,_1:3},p0={_0:0,_1:4},m0={_0:0,_1:5},d0=[u0,p0,m0],f0={_0:0,_1:3},b0={_0:0,_1:4},g0={_0:0,_1:5},h0={_0:-1,_1:0},k0={_0:1,_1:0},w0={_0:0,_1:-1},y0={_0:0,_1:1},M0={_0:-1,_1:0},S0={_0:1,_1:0},C0={_0:0,_1:-1},I0={_0:0,_1:1},L0=void 0,P0={name:Wa,copper_type:0,description:Xa,icon_url:Ya,model_url:Ka,skill:Fu,attack_range:L0},v0=void 0,G0={name:Qa,copper_type:0,description:Za,icon_url:tl,model_url:el,skill:Du,attack_range:v0},x0={name:"铜墙铁壁",description:"大贝尔的攻击力永远等于防御力的值（攻击力的成长与装备都无法影响攻击力的数值）。",resource_url:"/assets/copper/iron_wall/bell/bell_skill.webp",cool_down:void 0},j0=void 0,O0={name:nl,copper_type:0,description:ol,icon_url:$l,model_url:sl,skill:x0,attack_range:j0},A0={name:"翻滚",description:"团团的所有防御力将会被计算为闪避的百分比（按照 1:1 的比例，防御力的成长与装备都无法影响防御力的数值）。",resource_url:"/assets/copper/iron_wall/tumble/tumble_skill.webp",cool_down:void 0},E0=void 0,R0={name:_l,copper_type:0,description:cl,icon_url:il,model_url:rl,skill:A0,attack_range:E0},z0={name:"队长光辉",description:"铿铿身边 3x3 范围内的战士都可以获得 20% 的攻击力加成与 10% 的防御力加成，这一技能的计算总是会发生在所有被动技能之前，以免影响其他有属性换算的英雄角色的数值计算混乱。",resource_url:"/assets/copper/iron_wall/chief/chief_skill.webp",cool_down:void 0},J0=void 0,T0={name:al,copper_type:0,description:ll,icon_url:ul,model_url:pl,skill:z0,attack_range:J0},q0=void 0,B0={name:ml,copper_type:1,description:dl,icon_url:fl,model_url:bl,skill:Wu,attack_range:q0},F0={name:"糕点魔法",description:"对敌人造成伤害的 20% 将会转换为自己的生命值。",resource_url:"/assets/copper/arcanist/syrup/syrup_skill.webp",cool_down:void 0},H0=void 0,N0={name:gl,copper_type:1,description:hl,icon_url:kl,model_url:wl,skill:F0,attack_range:H0},D0=void 0,U0={name:yl,copper_type:1,description:Ml,icon_url:Sl,model_url:Cl,skill:Ku,attack_range:D0},V0={name:"脉冲光线",description:"菲尼击败敌人之后，敌人会对相邻的敌人放出脉冲光线，造成其（敌人）最大生命 20% 的伤害。",resource_url:"/assets/copper/arcanist/glimmer/glimmer_skill.webp",cool_down:void 0},W0=void 0,X0={name:Il,copper_type:1,description:Ll,icon_url:Pl,model_url:vl,skill:V0,attack_range:W0},Y0=void 0,K0={name:Gl,copper_type:1,description:xl,icon_url:jl,model_url:Ol,skill:tp,attack_range:Y0},Q0={name:"大猫守护",description:"絮絮受到伤害时，大猫会抓伤敌人，造成固定的 20 点伤害。",resource_url:"/assets/copper/resonator/murmur/murmur_skill.webp",cool_down:void 0},Z0=void 0,t2={name:Al,copper_type:4,description:El,icon_url:Rl,model_url:zl,skill:Q0,attack_range:Z0},e2={name:"啾啾的歌",description:"啾啾击败敌人之后，与该敌人相邻的敌方单位（联通即可）全部都受到 5 点伤害",resource_url:"/assets/copper/resonator/melody/melody_skill.webp",cool_down:void 0},n2=void 0,o2={name:Jl,copper_type:4,description:Tl,icon_url:ql,model_url:Bl,skill:e2,attack_range:n2},$2={name:"蜕壳",description:"库克在血量小于等于 0 时，将会吸取周围八格内己方铜偶的血量，从血量最高的铜偶开始吸取，直到自己满血或者没有铜偶可以吸取为止。",resource_url:"/assets/copper/resonator/clawsteak/clawster_skill.webp",cool_down:void 0},s2=void 0,_2={name:Fl,copper_type:4,description:Hl,icon_url:Nl,model_url:Dl,skill:$2,attack_range:s2},c2={name:"鼹鼠的地洞",description:"鼹鼠先生可以发动技能并且移动到以自己为中心的 3*3 格子中的任意一个空格，不过当然会消耗本回合的移动机会。",resource_url:"/assets/copper/resonator/diggs/diggs_skill.webp",cool_down:void 0},i2=void 0,r2={name:Ul,copper_type:4,description:Vl,icon_url:Wl,model_url:Xl,skill:c2,attack_range:i2},a2={name:"蜂群守护",description:"蜜拉击败敌人之后，蜂群会守护蜜拉，蜂群会攻击蜜拉周围的敌人，造成 10 点伤害。",resource_url:"/assets/copper/resonator/hive/hive_skill.webp",cool_down:void 0},l2=void 0,u2={name:Yl,copper_type:4,description:Kl,icon_url:Ql,model_url:Zl,skill:a2,attack_range:l2},p2=void 0,m2={name:tu,copper_type:3,description:eu,icon_url:nu,model_url:ou,skill:op,attack_range:p2},d2=void 0,f2={name:$u,copper_type:3,description:su,icon_url:_u,model_url:cu,skill:_p,attack_range:d2},b2=void 0,g2={name:iu,copper_type:3,description:ru,icon_url:au,model_url:lu,skill:rp,attack_range:b2},h2=void 0,k2={name:uu,copper_type:3,description:pu,icon_url:mu,model_url:du,skill:up,attack_range:h2},w2={name:"致幻碎片",description:"卡琳的闪避率永远比原数值翻倍。",resource_url:"/assets/copper/mechanic/karin/karin_skill.webp",cool_down:void 0},y2=void 0,M2={name:fu,copper_type:3,description:bu,icon_url:gu,model_url:hu,skill:w2,attack_range:y2},S2=void 0,C2=void 0,I2={name:ku,copper_type:2,description:wu,icon_url:yu,model_url:Mu,skill:S2,attack_range:C2},L2=void 0,P2=void 0,v2={name:Su,copper_type:2,description:Cu,icon_url:Iu,model_url:Lu,skill:L2,attack_range:P2},G2=void 0,x2=void 0,j2={name:Pu,copper_type:2,description:vu,icon_url:Gu,model_url:xu,skill:G2,attack_range:x2},O2=void 0,A2=void 0,E2={name:ju,copper_type:2,description:Ou,icon_url:Au,model_url:Eu,skill:O2,attack_range:A2},R2=void 0,z2=void 0,bn=[P0,G0,O0,R0,T0,B0,N0,U0,X0,K0,t2,o2,_2,r2,u2,m2,f2,g2,k2,M2,I2,v2,j2,E2,{name:Ru,copper_type:2,description:zu,icon_url:Ju,model_url:Tu,skill:R2,attack_range:z2}],J2=lr(),T2=L4(t=>{const e=bn.length;let n=0;for(;;){const $=n;if($<e){const o=bn[$];if(t({_0:o.name,_1:o})===1){n=$+1|0;continue}else return 0}else return 1}}),$n=ni(),pt=X2(Wg()),q2=ni(),N_=k1(),U=Ig(),Mn=vn(Wi),Sn=vn(Xi),D_=[Aa,Ea,Ra,za,Ja,Ta,qa,Ba],B2=vn(Yi),U_=xn(__,52),ne=zn(8),gn=zn(8),ft=zn(8),At=zn(8),Ie=ab(8),ut=Y2(void 0),Tt=t4([]),f$=[{name:"铆接壁垒",health:Math.fround(400),can_move:!1,can_attack:!1,attack_range:0,description:" 一段坚固的、由巨大黄铜板铆接而成的城墙，板上有蒸汽管道加固。墙头有齿轮驱动的可动挡板，墙体内嵌有发出稳定黄光的观察灯。",asset_url:"assets/structure/riveted_barrier/riveted_barrier.webp",model_url:"assets/structure/riveted_barrier/riveted_barrier.glb",attribute:bt(Math.fround(0),0,Math.fround(0),Math.fround(0),Math.fround(0)),cost:lt([Ip,Lp])},{name:"齿轮箭塔",health:Math.fround(180),can_move:!1,can_attack:!0,attack_range:3,description:"一座细高的塔楼，顶部是一个开放式齿轮组平台，通过传送带将铜质弩箭自动上弦并连续发射。塔身有蒸汽泄压阀，每次齐射都伴随“嘶嘶”声。",asset_url:"assets/structure/gear_arrow_tower/gear_arrow_tower.webp",model_url:"assets/structure/gear_arrow_tower/gear_arrow_tower.glb",attribute:bt(Math.fround(0),0,Math.fround(30),Math.fround(0),Math.fround(0)),cost:lt([Pp,vp])},{name:"心源矿钻",health:Math.fround(300),can_move:!1,can_attack:!1,attack_range:0,description:"一台顶部装有巨大钻头的大型钻井装置，由复杂的齿轮组和活塞驱动。钻头高速旋转，闪烁着蓝光，从地底带出发光的矿石。",asset_url:"assets/structure/heart_source_drill/heart_source_mineral_drill.webp",model_url:"assets/structure/heart_source_drill/heart_source_mineral_drill.glb",attribute:bt(Math.fround(0),0,Math.fround(0),Math.fround(0),Math.fround(0)),cost:lt([Gp,xp,jp])},{name:"充能线圈",health:Math.fround(200),can_move:!1,can_attack:!1,attack_range:0,description:"一个由巨大铜线圈缠绕而成的塔状建筑，线圈中央有电弧在不断跳跃。它能够为周围一定范围内的友方建筑提供能量，使其运作更快。",asset_url:"assets/structure/charging_coil/charging_coil.webp",model_url:"assets/structure/charging_coil/charging_coil.glb",attribute:bt(Math.fround(0),0,Math.fround(0),Math.fround(0),Math.fround(0)),cost:lt([Op,Ap,Ep])},{name:"维修工坊",health:Math.fround(200),can_move:!1,can_attack:!0,attack_range:3,description:"一个带有可开合顶棚的圆形工坊，内部有多个机械臂。友方铜偶经过时，机械臂会自动为其进行修复和保养，发出叮叮当当的敲打声。",asset_url:"assets/structure/repair_workshop/repair_workshop.webp",model_url:"assets/structure/repair_workshop/repair_workshop.glb",attribute:bt(Math.fround(0),0,Math.fround(25),Math.fround(0),Math.fround(0)),cost:lt([Rp,zp,Jp])},{name:"镜光折射塔",health:Math.fround(1200),can_move:!1,can_attack:!0,attack_range:5,description:"一座顶部镶嵌着巨大、可转动水晶镜片的塔。它能聚集环境中的心源能量，发射出一道灼热的折射光束，对直线上的敌人造成伤害。",asset_url:"assets/structure/mirror_refractory_tower/mirror_light_refraction_tower.webp",model_url:"assets/structure/mirror_refractory_tower/mirror_light_refraction_tower.glb",attribute:bt(Math.fround(0),0,Math.fround(120),Math.fround(0),Math.fround(0)),cost:lt([Tp,qp,Bp,Fp])},{name:"共鸣警钟",health:Math.fround(500),can_move:!1,can_attack:!0,attack_range:4,description:"一个悬挂在精致黄铜钟楼里的大钟，钟体刻有共鸣符文。当敌人靠近时，它会自动鸣响，发出可见的声波涟漪。",asset_url:"assets/structure/resonance_alarm_bell/resonance_alarm_bell.webp",model_url:"assets/structure/resonance_alarm_bell/resonance_alarm_bell.glb",attribute:bt(Math.fround(0),0,Math.fround(60),Math.fround(0),Math.fround(0)),cost:lt([Hp,Np,Dp])},{name:"风暴铁砧",health:Math.fround(800),can_move:!1,can_attack:!0,attack_range:4,description:"一个被闪电线圈环绕的巨大铁砧。它会定期引动空气中的能量，召唤一道小范围的闪电风暴，轰击区域内的所有敌人。",asset_url:"assets/structure/storm_iron_anvil/storm_anvil.webp",model_url:"assets/structure/storm_iron_anvil/storm_anvil.glb",attribute:bt(Math.fround(0),0,Math.fround(100),Math.fround(0),Math.fround(0)),cost:lt([Up,Vp,Wp])}],V_=I4(t=>{const e=f$.length;let n=0;for(;;){const $=n;if($<e){const o=f$[$];if(t({_0:o.name,_1:o})===1){n=$+1|0;continue}else return 0}else return 1}}),le=e4([]),bo=[{level:1,health:Math.fround(25),attack:Math.fround(8),defense:Math.fround(3),dodge:Math.fround(0),attack_range:1,speed:2,name:"哥布林",enemy_type:"goblin",description:"哥布林并非铜曜王朝的原生种族，而是一群在王朝崩溃后，趁机潜入地牢的'拾荒者'。它们对心源科技一知半解，但天生对机械有着诡异的亲和力，擅长拆解、偷窃和利用废墟中的一切。它们不是最强大的敌人，但非常狡猾，会设置陷阱、偷走玩家的临时增益，或是呼叫同伴。击败它们有时能获得一些意想不到的小玩意和零件。",asset_url:"/assets/enemy/goblin/goblin.webp",model_url:"/assets/enemy/goblin/goblin.glb",drop_items:[Kp,Zp],summon_cost:lt([tm,em])},{level:1,health:Math.fround(30),attack:Math.fround(7),defense:Math.fround(5),dodge:Math.fround(0),attack_range:1,speed:1,name:"锈蚀巡游者",enemy_type:"cruiser",description:"曾是王城负责除锈保养的工役，核心程序错乱后，反而开始传播锈蚀。它们是地牢中最常见的退化力量。",asset_url:"/assets/enemy/cruiser/cruiser.webp",model_url:"/assets/enemy/cruiser/cruiser.glb",drop_items:[om,sm],summon_cost:lt([_m,cm])},{level:2,health:Math.fround(35),attack:Math.fround(12),defense:Math.fround(5),dodge:Math.fround(10),attack_range:1,speed:4,name:"齿轮斥候",enemy_type:"scout",description:"朝军队用来巡逻和送信的自动机械犬。失控后，它们依然在漫无目的地'巡逻'，并将任何移动单位视为入侵者。",asset_url:"/assets/enemy/scout/scout.webp",model_url:"/assets/enemy/scout/scout.glb",drop_items:[rm,lm],summon_cost:lt([um,pm,mm])},{level:2,health:Math.fround(40),attack:Math.fround(16),defense:Math.fround(8),dodge:Math.fround(5),attack_range:3,speed:2,name:"管风琴号手",enemy_type:"horn",description:"皇家乐团的自动乐器成员之一，原本奏响庄严乐章。如今，它的乐曲变成了撕裂耳膜、扰乱心智的噪音攻击。",asset_url:"/assets/enemy/horn/horn.webp",model_url:"/assets/enemy/horn/horn.glb",drop_items:[fm,gm],summon_cost:lt([hm,km,wm])},{level:3,health:Math.fround(70),attack:Math.fround(22),defense:Math.fround(15),dodge:Math.fround(0),attack_range:1,speed:1,name:"蒸汽拳手",enemy_type:"boxer",description:" 矿区使用的重型劳工铜偶，拥有惊人的力量。现在，它们只会重复最简单的指令：用蒸汽动力重拳粉碎眼前的障碍。",asset_url:"/assets/enemy/boxer/boxer.webp",model_url:"/assets/enemy/boxer/boxer.glb",drop_items:[Mm,Cm,Lm],summon_cost:lt([Pm,vm,Gm,xm])},{level:3,health:Math.fround(55),attack:Math.fround(30),defense:Math.fround(4),dodge:Math.fround(20),attack_range:1,speed:3,name:"发条刺客",enemy_type:"assassin",description:"阴影中的守护者，负责处理见不得光的威胁。程序失控后，它们的刺杀名单上写满了所有活物。",asset_url:"/assets/enemy/assassin/assassin.webp",model_url:"/assets/enemy/assassin/assassin.glb",drop_items:[Om,Em],summon_cost:lt([Rm,zm,Jm,Tm])},{level:4,health:Math.fround(110),attack:Math.fround(30),defense:Math.fround(20),dodge:Math.fround(0),attack_range:1,speed:2,name:"锅炉吞噬者",enemy_type:"devourer",description:"地牢的能量回收单元，负责将废弃物转化为蒸汽动力。如今它变得无比贪婪，会主动吞噬任何金属物体，包括掉队的铜偶。",asset_url:"/assets/enemy/devourer/devourer.glb",model_url:"/assets/enemy/devourer/devourer.glb",drop_items:[Bm,Hm,Dm],summon_cost:lt([Um,Vm,Wm,Xm])},{level:4,health:Math.fround(50),attack:Math.fround(32),defense:Math.fround(10),dodge:Math.fround(70),attack_range:2,speed:3,name:"镜面编织者",enemy_type:"mirror",description:"用于宫廷娱乐和谜题守护的精密造物。它能创造以假乱真的幻象来迷惑入侵者，本身十分脆弱，但极难被真正触及。",asset_url:"/assets/enemy/mirror/mirror.webp",model_url:"/assets/enemy/mirror/mirror.glb",drop_items:[Km,Zm,ed],summon_cost:lt([nd,od,$d,sd])},{level:5,health:Math.fround(250),attack:Math.fround(45),defense:Math.fround(35),dodge:Math.fround(5),attack_range:2,speed:1,name:"巨锤守卫",enemy_type:"guard",description:"王城宝库和重要大门的守卫者。即使失控，它们依然固守着生前的位置，用最纯粹的力量碾碎一切未经许可的靠近者。",asset_url:"/assets/enemy/guard/guard.webp",model_url:"/assets/enemy/guard/guard.glb",drop_items:[cd,rd,ld],summon_cost:lt([ud,pd,md,dd])},{level:5,health:Math.fround(100),attack:Math.fround(50),defense:Math.fround(10),dodge:Math.fround(25),attack_range:2,speed:5,name:"差分机妖",enemy_type:"demon",description:"王朝计算中心的智能核心碎片，拥有强大的逻辑运算能力。它将战斗视为一场需要'计算'和'优化'的数学问题，是极其难缠的精英敌人。",asset_url:"/assets/enemy/demon/demon.webp",model_url:"/assets/enemy/demon/demon.glb",drop_items:[bd,hd,wd],summon_cost:lt([yd,Md,Sd,Cd])},{level:5,health:Math.fround(160),attack:Math.fround(55),defense:Math.fround(15),dodge:Math.fround(0),attack_range:2,speed:2,name:"心源畸变体",enemy_type:"variant",description:"它曾是王朝庆典的中央娱乐单元——'欢宴主脑'。大休眠时，过量的心源能量没有摧毁它，反而让它陷入了永久的、失控的狂喜状态。它将地牢变成了它个人的派对现场，并'热情'地邀请（或者说强迫）所有闯入者加入它混乱的欢宴。它会用五彩的声光、抛洒的零件和看似可爱实则威力巨大的玩具进行攻击。击败它，就是终结这场永无止境的噪音派对。",asset_url:"/assets/enemy/variant/variant.webp",model_url:"/assets/enemy/variant/variant.glb",drop_items:[Ld,vd,xd],summon_cost:lt([jd,Od,Ad,Ed,Rd])},{level:6,health:Math.fround(300),attack:Math.fround(60),defense:Math.fround(20),dodge:Math.fround(30),attack_range:3,speed:3,name:"（BOSS）织网夫人·夏特拉",enemy_type:"shatra",description:"夏特拉曾是王朝的'信息架构师'，负责维护整个王城的心源能量网络。大休眠发生时，她为了稳定网络，选择将自己的核心与主控终端永久连接。数百年的孤独守护和能量侵蚀让她变得偏执，她认为任何外来者都是不稳定的'病毒'，会破坏她精心维持的、死寂的'平衡'。她会操纵整个地牢的机关和能量流来攻击玩家，将玩家视为需要清除的系统威胁。",asset_url:"/assets/enemy/shatra/shatra.webp",model_url:"/assets/enemy/shatra/shatra.glb",drop_items:[Jd,qd,Fd,Nd],summon_cost:lt([Dd,Ud,Vd,Wd,Xd])},{level:6,health:Math.fround(500),attack:Math.fround(40),defense:Math.fround(40),dodge:Math.fround(0),attack_range:1,speed:2,name:"（BOSS）废械吞噬者·饕餮",enemy_type:"glutton",description:"它不是被制造的，而是'生长'出来的。在王朝崩溃的废墟中，一个简单的'垃圾处理'核心程序发生了可怕的变异，它开始主动吞噬遇到的一切机械体，并将它们的功能和结构粗暴地整合到自己身上。它代表着纯粹的、无意识的毁灭与贪婪，是地牢中会移动的天灾。击败它需要攻击其身上不断变化的弱点核心。",asset_url:"/assets/enemy/glutton/glutton.webp",model_url:"/assets/enemy/glutton/glutton.glb",drop_items:[Kd,Zd,e0,o0],summon_cost:lt([$0,s0,_0,c0,i0])}],F2=rb(bo),b$=C4(t=>F2(e=>t({_0:e.name,_1:e}))),Cn=T$(!1),In=T$(!1),Ln=T$(!1);function ue(t){S()}function H2(t){return S()}function go(t){return S()}function N2(t){return S()}function D2(t){return S()}function U2(t){return S()}function V2(t){return S()}function W2(t){return S()}function X2(t){return{val:t}}function Y2(t){return{val:t}}function T$(t){return{val:t}}function ho(t){return $e(t)|-1073741824}function K2(t,e){{const n=tt(t,e(0));let $=1;for(;;){const o=$;if(o<t){d(n,o),n[o]=e(o),$=o+1|0;continue}else break}return n}}function Q2(t){return Qi(t)}function Z2(t,e){{t:{let n;e:{let $;n:{let o;o:if($t(t.str,2,t.start,t.end))if(j(t.str,h(t.str,0,t.start,t.end))===48)switch(j(t.str,h(t.str,1,t.start,t.end))){case 120:{const _=t.str,i=h(t.str,2,t.start,t.end);let r;i===void 0?r=t.end:r=i,o={str:_,start:r,end:t.end};break o}case 88:{const _=t.str,i=h(t.str,2,t.start,t.end);let r;i===void 0?r=t.end:r=i,o={str:_,start:r,end:t.end};break o}case 111:{const _=t.str,i=h(t.str,2,t.start,t.end);let r;i===void 0?r=t.end:r=i,$={str:_,start:r,end:t.end};break n}case 79:{const _=t.str,i=h(t.str,2,t.start,t.end);let r;i===void 0?r=t.end:r=i,$={str:_,start:r,end:t.end};break n}case 98:{const _=t.str,i=h(t.str,2,t.start,t.end);let r;i===void 0?r=t.end:r=i,n={str:_,start:r,end:t.end};break e}case 66:{const _=t.str,i=h(t.str,2,t.start,t.end);let r;i===void 0?r=t.end:r=i,n={str:_,start:r,end:t.end};break e}default:break t}else break t;else break t;return new ln({_0:16,_1:o,_2:!0})}return new ln({_0:8,_1:$,_2:!0})}return new ln({_0:2,_1:n,_2:!0})}return new ln({_0:10,_1:t,_2:!1})}}function uo(){return new i_(new ae(F_))}function oo(){return new jo(new ae(F_))}function tf(){return new r_(new ae(on))}function cn(){return new jo(new ae(on))}function ko(){return new O$(new ae(on))}function ef(){return new l_(new ae(on))}function Ss(){return new u_(new ae(on))}function Cs(){return new p_(new ae(on))}function nf(t,e){return e?t===10?de(e$,kt):t===16?de(e$,fs):de(e$,zt(t)):te(t===10?de(t$,kt):t===16?de(t$,fs):de(t$,zt(t)),Ct)}function W_(t,e){if(O1(t,{str:gs,start:0,end:gs.length})){let n,$;t:{e:{const p=ac(t,0,void 0);if($t(p.str,1,p.start,p.end))switch(j(p.str,h(p.str,0,p.start,p.end))){case 43:{const b=p.str,g=h(p.str,1,p.start,p.end);let f;g===void 0?f=p.end:f=g,n={_0:!1,_1:{str:b,start:f,end:p.end}};break}case 45:{const b=p.str,g=h(p.str,1,p.start,p.end);let f;g===void 0?f=p.end:f=g,n={_0:!0,_1:{str:b,start:f,end:p.end}};break}default:{$=p;break e}}else{$=p;break e}break t}n={_0:!1,_1:$}}const o=n._0,s=n._1,c=Z2(s);let _;if(c.$tag===1)_=c._0;else return c;const i=_._0,r=_._1,a=_._2,l=nf(i,o);let u;if($t(r.str,1,r.start,r.end)){const p=j(r.str,h(r.str,0,r.start,r.end));if(p>=48&&p<=57)u=!0;else if(p>=97&&p<=122)u=!0;else if(p>=65&&p<=90)u=!0;else if($t(r.str,2,r.start,r.end))if(p===95){const m=j(r.str,h(r.str,1,r.start,r.end));u=m>=48&&m<=57||m>=97&&m<=122?!0:m>=65&&m<=90}else u=!1;else u=!1}else u=!1;if(u){let p,m=r,b=it,g=a;for(;;){const f=m,k=b,w=g;let I,y,L;t:if(Se(f.str,1,f.start,f.end)){const C=j(f.str,h(f.str,0,f.start,f.end));if(C===95){const O=cn();if(O.$tag===1){p=O._0;break}else return O}else{const O=f.str,x=h(f.str,1,f.start,f.end);let A;x===void 0?A=f.end:A=x;const H={str:O,start:A,end:f.end};I=k,y=H,L=C;break t}}else if($t(f.str,1,f.start,f.end)){const C=j(f.str,h(f.str,0,f.start,f.end));if(C===95)if(w===!1){const O=cn();if(O.$tag===1){p=O._0;break}else return O}else{const O=f.str,x=h(f.str,1,f.start,f.end);let A;x===void 0?A=f.end:A=x,m={str:O,start:A,end:f.end},g=!1;continue}else{const O=f.str,x=h(f.str,1,f.start,f.end);let A;x===void 0?A=f.end:A=x;const H={str:O,start:A,end:f.end};I=k,y=H,L=C;break t}}else{p=k;break}const M=L;let G;if(M>=48&&M<=57)G=M-48|0;else if(M>=97&&M<=122)G=M+-87|0;else if(M>=65&&M<=90)G=M+-55|0;else{const C=tf();if(C.$tag===1)G=C._0;else return C}if(G<i)if(o)if(h$(I,l)){const C=Gn(Fe(I,zt(i)),zt(G));if(Pn(C,I)){m=y,b=C,g=!0;continue}else{const O=oo();if(O.$tag===1){p=O._0;break}else return O}}else{const C=oo();if(C.$tag===1){p=C._0;break}else return C}else if(qo(I,l)){const C=te(Fe(I,zt(i)),zt(G));if(h$(C,I)){m=y,b=C,g=!0;continue}else{const O=oo();if(O.$tag===1){p=O._0;break}else return O}}else{const C=oo();if(C.$tag===1){p=C._0;break}else return C}else{const C=cn();if(C.$tag===1){p=C._0;break}else return C}}return new j$(p)}else return cn()}else return cn()}function of(t,e){const n=W_(t);let $;if(n.$tag===1)$=n._0;else return n;if(qo($,zt(-2147483648))||dc($,zt(2147483647))){const o=uo();if(o.$tag===1)o._0;else return o}return new a_(Ae($))}function $f(t){let e;if($t(t.str,1,t.start,t.end))switch(j(t.str,h(t.str,0,t.start,t.end))){case 43:{const l=t.str,u=h(t.str,1,t.start,t.end);let p;u===void 0?p=t.end:p=u,e={str:l,start:p,end:t.end};break}case 45:{const l=t.str,u=h(t.str,1,t.start,t.end);let p;u===void 0?p=t.end:p=u,e={str:l,start:p,end:t.end};break}default:e=t}else e=t;let n,$;t:{e:{let a;n:{o:{let l;_:{$:{let u;s:if($t(e.str,2,e.start,e.end))if(j(e.str,h(e.str,0,e.start,e.end))===48)switch(j(e.str,h(e.str,1,e.start,e.end))){case 120:{const b=e.str,g=h(e.str,2,e.start,e.end);let f;g===void 0?f=e.end:f=g,u={str:b,start:f,end:e.end};break s}case 88:{const b=e.str,g=h(e.str,2,e.start,e.end);let f;g===void 0?f=e.end:f=g,u={str:b,start:f,end:e.end};break s}case 111:{const b=e.str,g=h(e.str,2,e.start,e.end);let f;g===void 0?f=e.end:f=g,l={str:b,start:f,end:e.end};break $}case 79:{const b=e.str,g=h(e.str,2,e.start,e.end);let f;g===void 0?f=e.end:f=g,l={str:b,start:f,end:e.end};break $}case 98:{const b=e.str,g=h(e.str,2,e.start,e.end);let f;g===void 0?f=e.end:f=g,a={str:b,start:f,end:e.end};break o}case 66:{const b=e.str,g=h(e.str,2,e.start,e.end);let f;g===void 0?f=e.end:f=g,a={str:b,start:f,end:e.end};break o}default:{$=e;break e}}else{$=e;break e}else{$=e;break e}n={_0:u,_1:!0,_2:!0};break _}n={_0:l,_1:!0,_2:!1}}break n}n={_0:a,_1:!0,_2:!1}}break t}n={_0:$,_1:!1,_2:!1}}const o=n._0,s=n._1,c=n._2;let _=o,i=s,r=!1;for(;;){const a=_,l=i,u=r;let p,m,b;t:{if(Se(a.str,0,a.start,a.end))return!0;if(Se(a.str,1,a.start,a.end)){const g=j(a.str,h(a.str,0,a.start,a.end));if(g===95)return!1;{const f=a.str,k=h(a.str,1,a.start,a.end);let w;k===void 0?w=a.end:w=k,p={str:f,start:w,end:a.end},m=g,b=u;break t}}else{const g=j(a.str,h(a.str,0,a.start,a.end));if(g===95){if(l===!1)return!1;{const f=a.str,k=h(a.str,1,a.start,a.end);let w;k===void 0?w=a.end:w=k,_={str:f,start:w,end:a.end},i=!1,r=!0;continue}}else{const f=a.str,k=h(a.str,1,a.start,a.end);let w;k===void 0?w=a.end:w=k,p={str:f,start:w,end:a.end},m=g,b=u;break t}}}if(m>=48&&m<=57||c&&(m>=97&&m<=102||m>=65&&m<=70)){_=p,i=!0,r=!1;continue}else{if(b)return!1;_=p,i=!1,r=!1;continue}}}function sf(){return{digits:Zi(800),digits_num:0,decimal_point:0,negative:!1,truncated:!1}}function q$(t){for(;;){let e;if(t.digits_num>0){const n=t.digits,$=t.digits_num-1|0;d(n,$),e=n[$]===0}else e=!1;if(e){t.digits_num=t.digits_num-1|0;continue}else break}if(t.digits_num===0){t.decimal_point=0;return}else return}function _f(t){const e=sf();let n=!1,$=!1,o;t:{e:{if($t(t.str,1,t.start,t.end))switch(j(t.str,h(t.str,0,t.start,t.end))){case 45:{const i=t.str,r=h(t.str,1,t.start,t.end);let a;r===void 0?a=t.end:a=r;const u={str:i,start:a,end:t.end};e.negative=!0,o=u;break}case 43:{const i=t.str,r=h(t.str,1,t.start,t.end);let a;r===void 0?a=t.end:a=r,o={str:i,start:a,end:t.end};break}default:break e}else break e;break t}o=t}let s,c=o;for(;;){const _=c;if($t(_.str,1,_.start,_.end)){const i=j(_.str,h(_.str,0,_.start,_.end));if(i===95){const r=_.str,a=h(_.str,1,_.start,_.end);let l;a===void 0?l=_.end:l=a,c={str:r,start:l,end:_.end};continue}else if(i===46){const r=_.str,a=h(_.str,1,_.start,_.end);let l;a===void 0?l=_.end:l=a;const p={str:r,start:l,end:_.end};if(n){const m=Ss();if(m.$tag===1){s=m._0;break}else return m}else{n=!0,e.decimal_point=e.digits_num,c=p;continue}}else if(i>=48&&i<=57){const r=_.str,a=h(_.str,1,_.start,_.end);let l;a===void 0?l=_.end:l=a;const p={str:r,start:l,end:_.end};if($=!0,i===48&&e.digits_num===0){e.decimal_point=e.decimal_point-1|0,c=p;continue}if(e.digits_num<e.digits.length){const m=e.digits,b=e.digits_num;d(m,b),m[b]=(i-48|0)&255,e.digits_num=e.digits_num+1|0}else i!==48&&(e.truncated=!0);c=p;continue}else{s=_;break}}else{s=_;break}}if($){n||(e.decimal_point=e.digits_num);let _,i;t:{e:{if($t(s.str,1,s.start,s.end))switch(j(s.str,h(s.str,0,s.start,s.end))){case 101:{const u=s.str,p=h(s.str,1,s.start,s.end);let m;p===void 0?m=s.end:m=p,i={str:u,start:m,end:s.end};break e}case 69:{const u=s.str,p=h(s.str,1,s.start,s.end);let m;p===void 0?m=s.end:m=p,i={str:u,start:m,end:s.end};break e}default:_=s}else _=s;break t}let r=1,a;if($t(i.str,1,i.start,i.end))switch(j(i.str,h(i.str,0,i.start,i.end))){case 43:{const u=i.str,p=h(i.str,1,i.start,i.end);let m;p===void 0?m=i.end:m=p,a={str:u,start:m,end:i.end};break}case 45:{const u=i.str,p=h(i.str,1,i.start,i.end);let m;p===void 0?m=i.end:m=p;const g={str:u,start:m,end:i.end};r=-1,a=g;break}default:a=i}else a=i;e:{n:{if($t(a.str,1,a.start,a.end)){const u=j(a.str,h(a.str,0,a.start,a.end));if(u>=48&&u<=57){let p=0,m,b=a;for(;;){const g=b;if($t(g.str,1,g.start,g.end)){const f=j(g.str,h(g.str,0,g.start,g.end));if(f===95){const k=g.str,w=h(g.str,1,g.start,g.end);let I;w===void 0?I=g.end:I=w,b={str:k,start:I,end:g.end};continue}else if(f>=48&&f<=57){const k=g.str,w=h(g.str,1,g.start,g.end);let I;w===void 0?I=g.end:I=w;const L={str:k,start:I,end:g.end};p=(Math.imul(p,10)|0)+(f-48|0)|0,b=L;continue}else{m=g;break}}else{m=g;break}}e.decimal_point=e.decimal_point+(Math.imul(r,p)|0)|0,_=m}else break n}else break n;break e}const l=Ss();if(l.$tag===1)_=l._0;else return l}}return Se(_.str,0,_.start,_.end)?(q$(e),new m_(e)):Cs()}else return Cs()}function cf(t){return _f(t)}function rf(t){let e,n;t:{e:{if($t(t.str,1,t.start,t.end))switch(j(t.str,h(t.str,0,t.start,t.end))){case 45:{const c=t.str,_=h(t.str,1,t.start,t.end);let i;_===void 0?i=t.end:i=_,e={_0:!1,_1:{str:c,start:i,end:t.end}};break}case 43:{const c=t.str,_=h(t.str,1,t.start,t.end);let i;_===void 0?i=t.end:i=_,n={str:c,start:i,end:t.end};break e}default:{n=t;break e}}else{n=t;break e}break t}e={_0:!0,_1:n}}const $=e._0,o=e._1;t:{let s;e:{n:if(Se(o.str,3,o.start,o.end))switch(j(o.str,h(o.str,0,o.start,o.end))){case 110:switch(j(o.str,h(o.str,1,o.start,o.end))){case 97:switch(j(o.str,h(o.str,2,o.start,o.end))){case 110:break n;case 78:break n;default:break t}case 65:switch(j(o.str,h(o.str,2,o.start,o.end))){case 110:break n;case 78:break n;default:break t}default:break t}case 78:switch(j(o.str,h(o.str,1,o.start,o.end))){case 97:switch(j(o.str,h(o.str,2,o.start,o.end))){case 110:break n;case 78:break n;default:break t}case 65:switch(j(o.str,h(o.str,2,o.start,o.end))){case 110:break n;case 78:break n;default:break t}default:break t}case 105:switch(j(o.str,h(o.str,1,o.start,o.end))){case 110:switch(j(o.str,h(o.str,2,o.start,o.end))){case 102:{const r=o.str,a=h(o.str,3,o.start,o.end);let l;a===void 0?l=o.end:l=a,s={str:r,start:l,end:o.end};break e}case 70:{const r=o.str,a=h(o.str,3,o.start,o.end);let l;a===void 0?l=o.end:l=a,s={str:r,start:l,end:o.end};break e}default:break t}case 78:switch(j(o.str,h(o.str,2,o.start,o.end))){case 102:{const r=o.str,a=h(o.str,3,o.start,o.end);let l;a===void 0?l=o.end:l=a,s={str:r,start:l,end:o.end};break e}case 70:{const r=o.str,a=h(o.str,3,o.start,o.end);let l;a===void 0?l=o.end:l=a,s={str:r,start:l,end:o.end};break e}default:break t}default:break t}case 73:switch(j(o.str,h(o.str,1,o.start,o.end))){case 110:switch(j(o.str,h(o.str,2,o.start,o.end))){case 102:{const r=o.str,a=h(o.str,3,o.start,o.end);let l;a===void 0?l=o.end:l=a,s={str:r,start:l,end:o.end};break e}case 70:{const r=o.str,a=h(o.str,3,o.start,o.end);let l;a===void 0?l=o.end:l=a,s={str:r,start:l,end:o.end};break e}default:break t}case 78:switch(j(o.str,h(o.str,2,o.start,o.end))){case 102:{const r=o.str,a=h(o.str,3,o.start,o.end);let l;a===void 0?l=o.end:l=a,s={str:r,start:l,end:o.end};break e}case 70:{const r=o.str,a=h(o.str,3,o.start,o.end);let l;a===void 0?l=o.end:l=a,s={str:r,start:l,end:o.end};break e}default:break t}default:break t}default:break t}else if($t(o.str,3,o.start,o.end))switch(j(o.str,h(o.str,0,o.start,o.end))){case 105:switch(j(o.str,h(o.str,1,o.start,o.end))){case 110:switch(j(o.str,h(o.str,2,o.start,o.end))){case 102:{const r=o.str,a=h(o.str,3,o.start,o.end);let l;a===void 0?l=o.end:l=a,s={str:r,start:l,end:o.end};break e}case 70:{const r=o.str,a=h(o.str,3,o.start,o.end);let l;a===void 0?l=o.end:l=a,s={str:r,start:l,end:o.end};break e}default:break t}case 78:switch(j(o.str,h(o.str,2,o.start,o.end))){case 102:{const r=o.str,a=h(o.str,3,o.start,o.end);let l;a===void 0?l=o.end:l=a,s={str:r,start:l,end:o.end};break e}case 70:{const r=o.str,a=h(o.str,3,o.start,o.end);let l;a===void 0?l=o.end:l=a,s={str:r,start:l,end:o.end};break e}default:break t}default:break t}case 73:switch(j(o.str,h(o.str,1,o.start,o.end))){case 110:switch(j(o.str,h(o.str,2,o.start,o.end))){case 102:{const r=o.str,a=h(o.str,3,o.start,o.end);let l;a===void 0?l=o.end:l=a,s={str:r,start:l,end:o.end};break e}case 70:{const r=o.str,a=h(o.str,3,o.start,o.end);let l;a===void 0?l=o.end:l=a,s={str:r,start:l,end:o.end};break e}default:break t}case 78:switch(j(o.str,h(o.str,2,o.start,o.end))){case 102:{const r=o.str,a=h(o.str,3,o.start,o.end);let l;a===void 0?l=o.end:l=a,s={str:r,start:l,end:o.end};break e}case 70:{const r=o.str,a=h(o.str,3,o.start,o.end);let l;a===void 0?l=o.end:l=a,s={str:r,start:l,end:o.end};break e}default:break t}default:break t}default:break t}else break t;return new we(B2)}e:{n:{if(Se(s.str,0,s.start,s.end))break n;if(Se(s.str,5,s.start,s.end))switch(j(s.str,h(s.str,0,s.start,s.end))){case 105:switch(j(s.str,h(s.str,1,s.start,s.end))){case 110:switch(j(s.str,h(s.str,2,s.start,s.end))){case 105:switch(j(s.str,h(s.str,3,s.start,s.end))){case 116:switch(j(s.str,h(s.str,4,s.start,s.end))){case 121:break n;case 89:break n;default:break e}case 84:switch(j(s.str,h(s.str,4,s.start,s.end))){case 121:break n;case 89:break n;default:break e}default:break e}case 73:switch(j(s.str,h(s.str,3,s.start,s.end))){case 116:switch(j(s.str,h(s.str,4,s.start,s.end))){case 121:break n;case 89:break n;default:break e}case 84:switch(j(s.str,h(s.str,4,s.start,s.end))){case 121:break n;case 89:break n;default:break e}default:break e}default:break e}case 78:switch(j(s.str,h(s.str,2,s.start,s.end))){case 105:switch(j(s.str,h(s.str,3,s.start,s.end))){case 116:switch(j(s.str,h(s.str,4,s.start,s.end))){case 121:break n;case 89:break n;default:break e}case 84:switch(j(s.str,h(s.str,4,s.start,s.end))){case 121:break n;case 89:break n;default:break e}default:break e}case 73:switch(j(s.str,h(s.str,3,s.start,s.end))){case 116:switch(j(s.str,h(s.str,4,s.start,s.end))){case 121:break n;case 89:break n;default:break e}case 84:switch(j(s.str,h(s.str,4,s.start,s.end))){case 121:break n;case 89:break n;default:break e}default:break e}default:break e}default:break e}case 73:switch(j(s.str,h(s.str,1,s.start,s.end))){case 110:switch(j(s.str,h(s.str,2,s.start,s.end))){case 105:switch(j(s.str,h(s.str,3,s.start,s.end))){case 116:switch(j(s.str,h(s.str,4,s.start,s.end))){case 121:break n;case 89:break n;default:break e}case 84:switch(j(s.str,h(s.str,4,s.start,s.end))){case 121:break n;case 89:break n;default:break e}default:break e}case 73:switch(j(s.str,h(s.str,3,s.start,s.end))){case 116:switch(j(s.str,h(s.str,4,s.start,s.end))){case 121:break n;case 89:break n;default:break e}case 84:switch(j(s.str,h(s.str,4,s.start,s.end))){case 121:break n;case 89:break n;default:break e}default:break e}default:break e}case 78:switch(j(s.str,h(s.str,2,s.start,s.end))){case 105:switch(j(s.str,h(s.str,3,s.start,s.end))){case 116:switch(j(s.str,h(s.str,4,s.start,s.end))){case 121:break n;case 89:break n;default:break e}case 84:switch(j(s.str,h(s.str,4,s.start,s.end))){case 121:break n;case 89:break n;default:break e}default:break e}case 73:switch(j(s.str,h(s.str,3,s.start,s.end))){case 116:switch(j(s.str,h(s.str,4,s.start,s.end))){case 121:break n;case 89:break n;default:break e}case 84:switch(j(s.str,h(s.str,4,s.start,s.end))){case 121:break n;case 89:break n;default:break e}default:break e}default:break e}default:break e}default:break e}else break e}return $?new we(Sn):new we(Mn)}return ko()}return ko()}function af(t,e,n){let $=e,o=0,s=t;for(;;){const c=s;if($t(c.str,1,c.start,c.end)){const _=j(c.str,h(c.str,0,c.start,c.end)),i=c.str,r=h(c.str,1,c.start,c.end);let a;r===void 0?a=c.end:a=r;const u={str:i,start:a,end:c.end};if(_>=48&&_<=57)o=o+1|0,$=n(_-48|0,$);else if(_!==95)break;s=u;continue}else break}return{_0:s,_1:$,_2:o}}function lf(t,e,n){let $=e,o=0,s=t;for(;;){const c=s;if($t(c.str,1,c.start,c.end)){const _=j(c.str,h(c.str,0,c.start,c.end)),i=c.str,r=h(c.str,1,c.start,c.end);let a;r===void 0?a=c.end:a=r;const u={str:i,start:a,end:c.end};if(_>=48&&_<=57)o=o+1|0,$=n(_-48|0,$);else if(_!==95)break;s=u;continue}else break}return{_0:s,_1:$,_2:o}}function Is(t,e){return af(t,e,(n,$)=>ge(Bt($,kt),W$(n)))}function uf(t){let e=t,n=!1,$,o;t:{e:{const s=e;if($t(s.str,1,s.start,s.end)){const c=j(s.str,h(s.str,0,s.start,s.end));switch(c){case 43:{const _=s.str,i=h(s.str,1,s.start,s.end);let r;i===void 0?r=s.end:r=i,$={str:_,start:r,end:s.end},o=c;break e}case 45:{const _=s.str,i=h(s.str,1,s.start,s.end);let r;i===void 0?r=s.end:r=i,$={str:_,start:r,end:s.end},o=c;break e}}}break t}n=o===45,e=$}t:{const s=e;if($t(s.str,1,s.start,s.end)){const c=j(s.str,h(s.str,0,s.start,s.end));if(c>=48&&c<=57){const _=lf(e,yr,(a,l)=>qo(l,tr)?te(Fe(kt,l),zt(a)):l),i=_._0,r=_._1;return n?{_0:i,_1:Qc(r)}:{_0:i,_1:r}}else break t}else break t}}function Ls(t,e){let n=e,$=0,o=t;for(;;){const s=o;let c;t:if($t(s.str,1,s.start,s.end)){const _=j(s.str,h(s.str,0,s.start,s.end));if(_>=48&&_<=57){const i=s.str,r=h(s.str,1,s.start,s.end);let a;r===void 0?a=s.end:a=r;const u={str:i,start:a,end:s.end};if(k$(n,H_)){$=$+1|0,n=ge(Bt(n,kt),W$(_-48|0)),o=u;continue}else{c=s;break t}}else if(_===95){const i=s.str,r=h(s.str,1,s.start,s.end);let a;r===void 0?a=s.end:a=r,o={str:i,start:a,end:s.end};continue}else{c=s;break t}}else{c=s;break t}return{_0:c,_1:n,_2:$}}}function pf(t){let e,n;t:{e:{if($t(t.str,1,t.start,t.end))switch(j(t.str,h(t.str,0,t.start,t.end))){case 45:{const k=t.str,w=h(t.str,1,t.start,t.end);let I;w===void 0?I=t.end:I=w,e={_0:{str:k,start:I,end:t.end},_1:!0};break}case 43:{const k=t.str,w=h(t.str,1,t.start,t.end);let I;w===void 0?I=t.end:I=w,n={str:k,start:I,end:t.end};break e}default:{n=t;break e}}else{n=t;break e}break t}e={_0:n,_1:!1}}const $=e._0,o=e._1;if(p1($))return new Ge(void 0);const s=Is($,it),c=s._0,_=s._1,i=s._2;let r=_,a=c,l=i,u=0,p=it;const m=a;if($t(m.str,1,m.start,m.end)&&j(m.str,h(m.str,0,m.start,m.end))===46){const k=m.str,w=h(m.str,1,m.start,m.end);let I;w===void 0?I=m.end:I=w,a={str:k,start:I,end:m.end};const M=Is(a,r),G=M._0,C=M._1,O=M._2;a=G,r=C,u=O,p=Qc(zt(u))}if(l=l+u|0,l===0)return new Ge(void 0);let b;t:{e:{const y=a;if($t(y.str,1,y.start,y.end))switch(j(y.str,h(y.str,0,y.start,y.end))){case 101:{const M=y.str,G=h(y.str,1,y.start,y.end);let C;G===void 0?C=y.end:C=G,b={str:M,start:C,end:y.end};break e}case 69:{const M=y.str,G=h(y.str,1,y.start,y.end);let C;G===void 0?C=y.end:C=G,b={str:M,start:C,end:y.end};break e}}break t}const f=uf(b);let k;if(f===void 0)return new Ge(void 0);k=f;const w=k._0,I=k._1;a=w,p=te(p,I)}const g=a;if(Se(g.str,0,g.start,g.end)){if(l<=19)return new Ge({exponent:p,mantissa:r,negative:o,many_digits:!1});l=l-19|0;let f=!1,k=t.str,w=t.start,I=t.end;t:for(;;){const L=k,M=w,G=I;let C,O;e:if($t(L,1,M,G)){const x=j(L,h(L,0,M,G));switch(x){case 48:{const A=h(L,1,M,G);let q;A===void 0?q=G:q=A,C={str:L,start:q,end:G},O=x;break e}case 46:{const A=h(L,1,M,G);let q;A===void 0?q=G:q=A,C={str:L,start:q,end:G},O=x;break e}default:break t}}else break;l=l-((O-46|0)/2|0)|0,k=C.str,w=C.start,I=C.end}let y=r;if(l>0){f=!0,y=it;const L=Ls(t,y),M=L._0,G=L._1,C=L._2;y=G;let O;if(P1(y,H_))O=C;else if($t(M.str,1,M.start,M.end)){const x=M.str,A=h(M.str,1,M.start,M.end);let q;A===void 0?q=M.end:q=A;const B={str:x,start:q,end:M.end},ct=Ls(B,y),K=ct._1,Z=ct._2;y=K,O=Z}else return new Ge(void 0);p=zt(O),p=te(p,Mr)}return new Ge({exponent:p,mantissa:y,negative:o,many_digits:f})}else return ef()}function Ps(t,e,n){const $=e-ht.bias|0;let o=Zc(t,Gn(Ee(Ct,ht.mantissa_bits),Ct));const s=zt($&((1<<ht.exponent_bits)-1|0));return o=Ys(o,Ee(s,ht.mantissa_bits)),n&&(o=Ys(o,Ee(Ee(Ct,ht.mantissa_bits),ht.exponent_bits))),o}function mf(t,e){if(e<0||e>=t.digits_num)return!1;let n;const $=t.digits;if(d($,e),$[e]===5?n=(e+1|0)===t.digits_num:n=!1,n){if(t.truncated)return!0;let s;if(e>0){const c=t.digits,_=e-1|0;d(c,_),s=(c[_]%2|0)!==0}else s=!1;return s}const o=t.digits;return d(o,e),o[e]>=5}function df(t){if(t.decimal_point>20)return o_;let e=it,n=0;for(;n<t.decimal_point&&n<t.digits_num;){const $=Fe(e,kt),o=t.digits,s=n;d(o,s),e=te($,Co(o[s])),n=n+1|0;continue}for(;n<t.decimal_point;){e=Fe(e,kt),n=n+1|0;continue}return mf(t,t.decimal_point)&&(e=te(e,Ct)),e}function ff(t,e){d(no,e);const n=no[e]._0;d(no,e);const $=no[e]._1;let o=!1;const s=$.length;let c=0;for(;;){const _=c;if(_<s){if(_>=t.digits_num){o=!0;break}const i=$.charCodeAt(_)-48|0,r=t.digits;if(d(r,_),r[_]!==i){const a=t.digits;d(a,_),o=a[_]<i;break}c=_+1|0;continue}else break}return o?n-1|0:n}function vs(t,e){const n=ff(t,e);let $=t.digits_num,o=t.digits_num+n|0,s=it;for($=$-1|0;$>=0;){const c=t.digits,_=$;d(c,_);const i=Co(c[_]);s=te(s,Ee(i,e));const r=de(s,kt),a=Ae(Gn(s,Fe(r,kt)));if(o=o-1|0,o<t.digits.length){const l=t.digits,u=o;d(l,u),l[u]=a&255}else a!==0&&(t.truncated=!0);s=r,$=$-1|0;continue}for(;dc(s,it);){const c=de(s,kt),_=Ae(Gn(s,Fe(kt,c)));if(o=o-1|0,o<t.digits.length){const i=t.digits,r=o;d(i,r),i[r]=_&255}else _!==0&&(t.truncated=!0);s=c;continue}t.digits_num=t.digits_num+n|0,t.digits_num>t.digits.length&&(t.digits_num=t.digits.length),t.decimal_point=t.decimal_point+n|0,q$(t)}function Gs(t,e){let n=0,$=0,o=it;for(;he(Dt(o,e),it);){if(n>=t.digits_num){for(;he(Dt(o,e),it);){o=Bt(o,kt),n=n+1|0;continue}break}const c=t.digits,_=n;d(c,_);const i=c[_];o=ge(Bt(o,kt),Co(i)),n=n+1|0;continue}t.decimal_point=t.decimal_point-(n-1|0)|0;const s=L$(xn(Ct,e),Ct);for(;n<t.digits_num;){const c=Dt(o,e),_=t.digits,i=$;d(_,i),_[i]=Xs(c),$=$+1|0,o=Re(o,s);const r=t.digits,a=n;d(r,a);const l=r[a];o=ge(Bt(o,kt),Co(l)),n=n+1|0;continue}for(;wo(o,it);){const c=Dt(o,e);if($<t.digits.length){const _=t.digits,i=$;d(_,i),_[i]=Xs(c),$=$+1|0}else wo(c,it)&&(t.truncated=!0);o=Re(o,s),o=Bt(o,kt);continue}t.digits_num=$,q$(t)}function $o(t,e){if(t.digits_num===0)return;let n=e;if(n>0){for(;n>59;){vs(t,59),n=n-59|0;continue}vs(t,n)}if(n<0){for(;n<-59;){Gs(t,59),n=n+59|0;continue}Gs(t,-n|0);return}else return}function bf(t){let e=0,n=it;if(t.digits_num===0||t.decimal_point<-330){n=it,e=ht.bias;const o=Ps(n,e,t.negative);return new we(vn(o))}if(t.decimal_point>310){const o=uo();if(o.$tag===1)o._0;else return o}for(;t.decimal_point>0;){let o=0;t.decimal_point>=eo.length?o=60:o=ie(eo,t.decimal_point),$o(t,-o|0),e=e+o|0;continue}for(;;){let o;if(t.decimal_point<0)o=!0;else{let s;if(t.decimal_point===0){const c=t.digits;d(c,0),s=c[0]<5}else s=!1;o=s}if(o){let s=0;(-t.decimal_point|0)>=eo.length?s=60:s=ie(eo,-t.decimal_point|0),$o(t,s),e=e-s|0;continue}else break}if(e=e-1|0,e<(ht.bias+1|0)){const o=(ht.bias+1|0)-e|0;$o(t,-o|0),e=e+o|0}if((e-ht.bias|0)>=((1<<ht.exponent_bits)-1|0)){const o=uo();if(o.$tag===1)o._0;else return o}if($o(t,ht.mantissa_bits+1|0),n=df(t),Ks(n,Ee(__,ht.mantissa_bits))&&(n=_g(n,1),e=e+1|0,(e-ht.bias|0)>=((1<<ht.exponent_bits)-1|0))){const o=uo();if(o.$tag===1)o._0;else return o}Ks(Zc(n,Ee(Ct,ht.mantissa_bits)),it)&&(e=ht.bias);const $=Ps(n,e,t.negative);return new we(vn($))}function gf(t,e){if(he(t,it)||he(e,it))return Oa;if(he(t,Ct))return e;if(he(e,Ct))return t;if(Zs(e)===0||Zs(t)===0)return;const n=rg(wr,e);if(!wo(t,n))return Bt(t,e)}function $$(t){const e=t&31;return d(ks,e),ks[e]}function hf(t){return Pn(ja,t.exponent)&&Pn(t.exponent,xa)&&v1(t.mantissa,U_)&&!t.many_digits}function kf(t){if(hf(t)){let e;if(Pn(t.exponent,o$)){const n=So(t.mantissa);e=qo(t.exponent,it)?n/$$(-Ae(t.exponent)|0):n*$$(Ae(t.exponent))}else{const n=Gn(t.exponent,o$),$=t.mantissa,o=Ae(n);d(hs,o);const s=gf($,hs[o]);let c;if(s===void 0||(c=s,wo(c,U_)))return ao;e=So(c)*$$(Ae(o$))}return t.negative&&(e=-e),new A$(e)}else return ao}function wf(t){if((t.end-t.start|0)>0)if($f(t)){const e=pf(t);let n;if(e.$tag===1)n=e._0;else return e;if(n===void 0)return rf(t);{const s=kf(n);if(s.$tag===1){const _=s._0;return new we(_)}else{const c=cf(t);let _;if(c.$tag===1)_=c._0;else return c;return bf(_)}}}else return ko();else return ko()}function so(t,e){if(e>=0&&e<(t.end-t.start|0)){const n=t.bytes,$=t.start+e|0;return d(n,$),n[$]}else return W2(`index out of bounds: the len is from 0 to ${vt(t.end-t.start|0)} but the index is ${vt(e)}`)}function yf(t,e,n){const $=t.length;let o;if(n===void 0)o=$;else{const _=n;o=_<0?$+_|0:_}const s=e<0?$+e|0:e;return s>=0&&s<=o&&o<=$?{bytes:t,start:s,end:o}:V2()}function Mf(t){const e=so(t,0),n=so(t,1),$=(e>>>0)+(n<<8>>>0)|0,o=so(t,2),s=($>>>0)+(o<<16>>>0)|0,c=so(t,3);return(s>>>0)+(c<<24>>>0)|0}function Sf(t,e){return{elem_info:0|1<<t,data:[e]}}function B$(t,e){if(t.elem_info&1<<e){const $=t.data,o=t.elem_info,s=Oo(o&((1<<e>>>0)-1|0));return d($,s),$[s]}else return}function Cf(t,e,n,$){return{elem_info:0|1<<t|1<<n,data:t<n?[e,$]:[$,e]}}function If(t,e,n){const $=t.data,o=$.length,s=o+1|0,c=t.elem_info,_=Oo(c&((1<<e>>>0)-1|0)),i=tt(s,n);return Io($,i,_,0,0),Io($,i,o-_|0,_,_+1|0),{elem_info:t.elem_info|1<<e,data:i}}function Lf(t,e){const n=t.data,$=n.length,o=t.elem_info,s=Oo(o&((1<<e>>>0)-1|0)),c=tt($-1|0,n[0]);return Io(n,c,s,0,0),Io(n,c,($-s|0)-1|0,s+1|0,s),{elem_info:t.elem_info^1<<e,data:c}}function X_(t,e,n){const $=Q2(t.data),o=t.elem_info,s=Oo(o&((1<<e>>>0)-1|0));return d($,s),$[s]=n,{elem_info:t.elem_info,data:$}}function Pf(t,e,n){let $=t,o=n;t:for(;;){const s=$,c=o;switch(s.$tag){case 1:{const _=s,i=_._0,r=_._1,a=_._2;return e===i?r:$1(a,e)}case 0:{const _=s,i=_._0,r=_._1,a=_._2;return c===a&&e===i?r:void 0}default:{const i=s._0,a=c&31,l=B$(i,a);if(l!==void 0){$=l,o=c>>>5|0;continue t}return}}}}function vf(t,e){const n=t;if(n!==void 0)return Pf(n,e,ho(e))}function Y_(t,e,n,$,o,s){const _=n&31,r=s&31;if(_===r){let a;if(n>>>0<=127){const u={_0:t,_1:e};a=new ye($,o,new wn(u,Ze))}else{const p=n>>>5|0;a=Y_(t,e,p,$,o,s>>>5|0)}return new en(Sf(_,a))}else{let a,l;t:if(n>>>0<=127){const p=new ye(t,e,Ze),m=new ye($,o,Ze);a=p,l=m;break t}else{const p=n,m=new Te(t,e,p>>>5|0),b=s,g=new Te($,o,b>>>5|0);a=m,l=g;break t}return new en(Cf(_,a,r,l))}}function K_(t,e,n,$){switch(t.$tag){case 1:{const o=t,s=o._0,c=o._1,_=o._2;if(e===s)return new ye(e,n,_);{const i=ic(_,l=>l._0===e);let r;i===void 0?r=_:r=rc(_,i);const a={_0:s,_1:c};return new ye(e,n,new wn(a,r))}}case 0:{const o=t,s=o._0,c=o._1,_=o._2;return $===_&&e===s?new Te(s,n,_):Y_(s,c,_,e,n,$)}default:{const s=t._0,_=$&31,i=B$(s,_);if(i===void 0){const r=$,a=new Te(e,n,r>>>5|0);return new en(If(s,_,a))}else{const u=K_(i,e,n,$>>>5|0);return new en(X_(s,_,u))}}}}function po(t,e,n){const $=t;return $===void 0?new Te(e,n,ho(e)):K_($,e,n,ho(e))}function Q_(t,e,n){switch(t.$tag){case 1:{const $=t,o=$._0,s=$._1,c=$._2;if(o===e){if(c.$tag===0)return;{const _=c,i=_._0,r=i._0,a=i._1,l=_._1;return new ye(r,a,l)}}else{const _=ic(c,i=>i._0===e);if(_===void 0)return t;{const r=_;return new ye(o,s,rc(c,r))}}}case 0:{const $=t,o=$._0,s=$._2;return n===s&&e===o?void 0:t}default:{const o=t._0,c=n&31,_=B$(o,c);if(_===void 0)return t;{const l=Q_(_,e,n>>>5|0);let u,p;t:{e:{if(o.data.length===1){if(l===void 0)return;p=l;break e}else if(l===void 0)u=Lf(o,c);else{p=l;break e}break t}u=X_(o,c,p)}t:{const m=u.data;if(m.length===1){const b=m[0];if(b.$tag===0){const g=b,f=g._0,k=g._1,w=g._2,I=u.elem_info,y=er(I),L=w;return new Te(f,k,L<<5|y)}else break t}else break t}return new en(u)}}}}function Gf(t,e){const n=t;if(n!==void 0)return Q_(n,e,ho(e))}function Z_(t){switch(t.$tag){case 1:{const e=t,n=e._0,$=e._1,o=e._2;return Y4(Ws({_0:n,_1:$}),o1(o))}case 0:{const e=t,n=e._0,$=e._1;return Ws({_0:n,_1:$})}default:{const $=t._0.data;return o=>{const s=$.length;let c=0;for(;;){const _=c;if(_<s){const i=$[_];if(Z_(i)(o)===1){c=_+1|0;continue}else return 0}else return 1}}}}}function xf(t){const e=t;return e===void 0?X4():Z_(e)}function jf(t){const e=xf(t);return n=>e($=>n($._1))}function _o(t,e){if(t!==void 0)return e(t)}function Of(t,e){return Math.pow(t,e)}function zo(t,e){let n=1,$=0,o=0;for(;;){const s=o;if(s<e){const c=t.str,_=t.start+s|0;c.charCodeAt(_)===10?(n=n+1|0,$=0):$=$+1|0,o=s+1|0;continue}else break}return{line:n,column:$}}function Af(t,e){const n=t.offset+e|0,$=To(t.input,n),o=65533;return new Ao(new En(zo(t.input,n),$===-1?o:$))}function Ht(t,e){const n=t.offset+e|0,$=To(t.input,n),o=65533;return new Eo(new En(zo(t.input,n),$===-1?o:$))}function F$(t,e){const n=t.offset+e|0,$=To(t.input,n),o=65533;return new Rn(new En(zo(t.input,n),$===-1?o:$))}function Jo(t,e){const n=t.offset+e|0,$=To(t.input,n),o=65533;return new Ce(new En(zo(t.input,n),$===-1?o:$))}function Ef(t,e){return new d_(new T({_0:t,_1:e}))}function Rf(t,e){return new b_(new T({_0:t,_1:e}))}function zf(t,e){return new g_(new T({_0:t,_1:e}))}function Jf(t,e){return new h_(new T({_0:t,_1:e}))}function Tf(t,e){return new k_(new T({_0:t,_1:e}))}function tc(t,e){const n=t;let $=0,o=n.length;for(;;){const s=$,c=o;if(s<c){const _=(s+c|0)/2|0,i=z1(n,_),r=i._0,a=i._1;if(e<r){o=_;continue}else if(e>a){$=_+1|0;continue}else return!0}else return!1}}function gt(t){if(t.offset<t.end_offset){const e=t.input,n=t.offset,$=e.str,o=e.start+n|0,s=$.charCodeAt(o);if(t.offset=t.offset+1|0,s>=55296&&s<=56319&&t.offset<t.end_offset){const c=t.input,_=t.offset,i=c.str,r=c.start+_|0,a=i.charCodeAt(r);if(a>=56320&&a<=57343)return t.offset=t.offset+1|0,((s<<10)+a|0)-56613888|0}return s}else return-1}function sn(t){t:for(;;)e:{n:{const e=gt(t);if(e===-1)break;{const $=e;switch($){case 9:break n;case 32:break n;case 10:break n;case 13:break n;default:{if($>127&&tc(D_,$))break e;t.offset=t.offset-1|0;break t}}}}break e}}function qf(t,e){return{offset:0,input:t,end_offset:t.end-t.start|0,remaining_available_depth:e}}function Xt(t,e){if(t.offset<t.end_offset){const n=t.input,$=t.offset,o=n.str,s=n.start+$|0,c=o.charCodeAt(s);return t.offset=t.offset+1|0,e!==c?Ht(t,-1):new E$(void 0)}else return new Eo(Ot)}function Le(t,e,n){const $=ac(t.input,e,n);if(!s$($,{str:ws,start:0,end:ws.length})&&!s$($,{str:ys,start:0,end:ys.length})&&!s$($,{str:Ms,start:0,end:Ms.length})){let o,s;t:{e:{const c=W_($);let _;if(c.$tag===1)_=c._0;else{s=c._0;break e}o=new j$(_);break t}o=new jo(s)}t:if(o.$tag===1){const _=o._0;if(Pn(_,nr)&&h$(_,or))return{_0:ig(_),_1:void 0};break t}else break t;t:if($t($.str,1,$.start,$.end)){if(j($.str,h($.str,0,$.start,$.end))===45)return{_0:Mn,_1:$};break t}else break t;return{_0:Sn,_1:$}}else{let o,s;t:{e:{const c=wf($);let _;if(c.$tag===1)_=c._0;else{s=c._0;break e}o=new we(_);break t}o=new O$(s)}if(o.$tag===1)return{_0:o._0,_1:void 0};t:if($t($.str,1,$.start,$.end)){if(j($.str,h($.str,0,$.start,$.end))===45)return{_0:Mn,_1:$};break t}else break t;return{_0:Sn,_1:$}}}function ec(t,e){for(;;)t:{const n=gt(t);if(n===-1)return Le(t,e,t.offset);{const o=n;if(o>=48&&o<=57)break t;return t.offset=t.offset-1|0,Le(t,e,t.offset)}}}function Bf(t,e){const n=gt(t);if(n===-1)return new Rn(Ot);{const o=n;return o>=48&&o<=57?new Rt(ec(t,e)):(t.offset=t.offset-1|0,F$(t,0))}}function H$(t,e){t:{const o=gt(t);if(o===-1)return new Rn(Ot);{const c=o;switch(c){case 43:break t;case 45:break t;default:return c>=48&&c<=57?new Rt(ec(t,e)):(t.offset=t.offset-1|0,F$(t,0))}}}const n=Bf(t,e);let $;if(n.$tag===1)$=n._0;else return n;return new Rt($)}function Ff(t,e){for(;;)t:{e:{const o=gt(t);if(o===-1)return new Rt(Le(t,e,t.offset));{const c=o;switch(c){case 101:break e;case 69:break e;default:{if(c>=48&&c<=57)break t;return t.offset=t.offset-1|0,new Rt(Le(t,e,t.offset))}}}}const n=H$(t,e);let $;if(n.$tag===1)$=n._0;else return n;return new Rt($)}}function nc(t,e){const n=gt(t);if(n===-1)return new Rn(Ot);{const o=n;return o>=48&&o<=57?Ff(t,e):F$(t,-1)}}function xs(t,e){for(;;)t:{e:{const o=gt(t);if(o===-1)return new Rt(Le(t,e,t.offset));{const c=o;switch(c){case 46:{const _=nc(t,e);let i;if(_.$tag===1)i=_._0;else return _;return new Rt(i)}case 101:break e;case 69:break e;default:{if(c>=48&&c<=57)break t;return t.offset=t.offset-1|0,new Rt(Le(t,e,t.offset))}}}}const n=H$(t,e);let $;if(n.$tag===1)$=n._0;else return n;return new Rt($)}}function Hf(t,e){let n=0,$=0;for(;;){const o=$;if(o<e){const s=gt(t);if(s===-1)return new y_(Ot);{const _=s;if(_>=65){const i=((_&-33)-65|0)+10|0;if(i>15){const r=Ht(t,-1);if(r.$tag===1)r._0;else return r}n=n<<4|i}else if(_>=48){const i=_-48|0;if(i>9){const r=Ht(t,-1);if(r.$tag===1)r._0;else return r}n=n<<4|i}else{const i=Ht(t,-1);if(i.$tag===1)i._0;else return i}}$=o+1|0;continue}else break}return new M_(n)}function js(t,e){const n=t._2,$=t._1,o=t._0;if(o.val>0&&e>o.val){const c=$.input.str,i=$.input.start;Jn(n,c,i+o.val|0,e-o.val|0);return}else return}function N$(t){const e=Ne(),n={val:t.offset},$={_0:n,_1:t,_2:e};t:for(;;)e:{n:{o:{const s=gt(t);if(s===-1)return new u$(Ot);{const _=s;switch(_){case 34:{js($,t.offset-1|0);break t}case 10:break o;case 13:break o;case 92:{js($,t.offset-1|0);const i=gt(t);if(i===-1)return new u$(Ot);switch(i){case 98:{nt(e,8);break}case 102:{nt(e,12);break}case 110:{nt(e,10);break}case 114:{nt(e,13);break}case 116:{nt(e,9);break}case 34:{nt(e,34);break}case 92:{nt(e,92);break}case 47:{nt(e,47);break}case 117:{const l=Hf(t,4);let u;if(l.$tag===1)u=l._0;else return l;nt(e,u);break}default:{const l=Ht(t,-1);if(l.$tag===1)l._0;else return l}}n.val=t.offset;break}default:if(_<32){const i=Ht(t,-1);if(i.$tag===1)i._0;else return i}else break e}}break n}const o=Ht(t,-1);if(o.$tag===1)o._0;else return o}break e}return new S_(e.val)}function Os(t,e){t:{const n=gt(t);if(n===-1)return new Rt(Le(t,e,t.offset));{const o=n;switch(o){case 46:return nc(t,e);case 101:break t;case 69:break t;default:{if(o>=48&&o<=57){t.offset=t.offset-1|0;const s=Ht(t,0);if(s.$tag===1)s._0;else return s}return t.offset=t.offset-1|0,new Rt(Le(t,e,t.offset))}}}}return H$(t,e)}function g$(t,e){for(;;)t:{e:{n:{const n=gt(t);if(n===-1)return new Ce(Ot);{const o=n;if(o===9)break n;if(o===32)break n;if(o===10)break n;if(o===13)break n;if(o===123)return new dt(cr);if(o===91)return new dt(ir);if(o===93){if(e)return new dt(I_);{const s=Ht(t,-1);if(s.$tag===1)s._0;else return s}}else if(o===110){const s=Xt(t,117);if(s.$tag===1)s._0;else return s;const c=Xt(t,108);if(c.$tag===1)c._0;else return c;const _=Xt(t,108);if(_.$tag===1)_._0;else return _;return new dt($r)}else if(o===116){const s=Xt(t,114);if(s.$tag===1)s._0;else return s;const c=Xt(t,117);if(c.$tag===1)c._0;else return c;const _=Xt(t,101);if(_.$tag===1)_._0;else return _;return new dt(sr)}else if(o===102){const s=Xt(t,97);if(s.$tag===1)s._0;else return s;const c=Xt(t,108);if(c.$tag===1)c._0;else return c;const _=Xt(t,115);if(_.$tag===1)_._0;else return _;const i=Xt(t,101);if(i.$tag===1)i._0;else return i;return new dt(_r)}else if(o===45){const s=gt(t);if(s===-1)return new Ce(Ot);{const _=s;if(_===48){const i=Os(t,t.offset-2|0);let r;if(i.$tag===1)r=i._0;else return i;const a=r._0,l=r._1;return new dt(new pn(a,_o(l,u=>io(u))))}else{if(_>=49&&_<=57){const r=xs(t,t.offset-2|0);let a;if(r.$tag===1)a=r._0;else return r;const l=a._0,u=a._1;return new dt(new pn(l,_o(u,p=>io(p))))}const i=Ht(t,-1);if(i.$tag===1)i._0;else return i}}}else if(o===48){const s=Os(t,t.offset-1|0);let c;if(s.$tag===1)c=s._0;else return s;const _=c._0,i=c._1;return new dt(new pn(_,_o(i,r=>io(r))))}else if(o>=49&&o<=57){const s=xs(t,t.offset-1|0);let c;if(s.$tag===1)c=s._0;else return s;const _=c._0,i=c._1;return new dt(new pn(_,_o(i,r=>io(r))))}else if(o===34){const s=N$(t);let c;if(s.$tag===1)c=s._0;else return s;return new dt(new Ro(c))}else{if(o>127&&tc(D_,o))break t;const c=-(o<=65535?1:2)|0,_=Ht(t,c);if(_.$tag===1)_._0;else return _}}break e}break t}break t}}function Nf(t){sn(t);const e=gt(t);if(e===-1)return new Ce(Ot);switch(e){case 93:return new dt(I_);case 44:return new dt(L_);default:return Jo(t,-1)}}function Df(t){sn(t);const e=gt(t);if(e===-1)return new Ce(Ot);switch(e){case 125:return new dt(C_);case 44:return new dt(L_);default:return Jo(t,-1)}}function Uf(t){sn(t);const e=gt(t);return e===-1?new Eo(Ot):e===58?new E$(void 0):Ht(t,-1)}function Vf(t){sn(t);const e=gt(t);if(e===-1)return new Ce(Ot);switch(e){case 125:return new dt(C_);case 34:{const o=N$(t);let s;if(o.$tag===1)s=o._0;else return o;return new dt(new Ro(s))}default:return Jo(t,-1)}}function Wf(t){sn(t);const e=gt(t);if(e===-1)return new Ce(Ot);if(e===34){const o=N$(t);let s;if(o.$tag===1)s=o._0;else return o;return new dt(new Ro(s))}else return Jo(t,-1)}function oc(t){const e=g$(t,!1);let n;if(e.$tag===1)n=e._0;else return e;return $c(t,n)}function $c(t,e){t:switch(e.$tag){case 0:return new Qt(Va);case 1:return new Qt($_);case 2:return new Qt(s_);case 3:{const n=e,$=n._0,o=n._1;return new Qt(new An($,o))}case 4:{const $=e._0;return new Qt(new z($))}case 5:return Yf(t);case 7:return Xf(t);case 8:break t;case 6:break t;default:break t}return new Qt(go())}function Xf(t){if(t.remaining_available_depth<=0)return new Ao(c_);t.remaining_available_depth=t.remaining_available_depth-1|0;const e=[];let n;const $=g$(t,!0);let o;if($.$tag===1)o=$._0;else return $;let s=o;t:for(;;){const c=s;if(c.$tag===8){t.remaining_available_depth=t.remaining_available_depth+1|0,n=new jt(e);break}else{const _=$c(t,c);let i;if(_.$tag===1)i=_._0;else return _;D4(e,i);const r=Nf(t);let a;if(r.$tag===1)a=r._0;else return r;switch(a.$tag){case 9:{const l=g$(t,!1);if(l.$tag===1)s=l._0;else return l;continue t}case 8:{t.remaining_available_depth=t.remaining_available_depth+1|0,n=new jt(e);break t}default:{n=go();break t}}}}return new Qt(n)}function Yf(t){if(t.remaining_available_depth<=0)return new Ao(c_);t.remaining_available_depth=t.remaining_available_depth-1|0;const e=hc(8);let n;const $=Vf(t);let o;if($.$tag===1)o=$._0;else return $;let s=o;t:for(;;){const c=s;switch(c.$tag){case 6:{t.remaining_available_depth=t.remaining_available_depth+1|0,n=new E(e);break t}case 4:{const i=c._0,r=Uf(t);if(r.$tag===1)r._0;else return r;const a=oc(t);let l;if(a.$tag===1)l=a._0;else return a;v(e,i,l);const u=Df(t);let p;if(u.$tag===1)p=u._0;else return u;switch(p.$tag){case 9:{const m=Wf(t);if(m.$tag===1)s=m._0;else return m;continue t}case 6:{t.remaining_available_depth=t.remaining_available_depth+1|0,n=new E(e);break t}default:{n=go();break t}}}default:{n=go();break t}}}return new Qt(n)}function sc(t,e){const n=qf(t,e),$=oc(n);let o;if($.$tag===1)o=$._0;else return $;return sn(n),n.offset>=n.end_offset?new Qt(o):Af(n,0)}function As(t,e){const n=Ne(t.length),$=r1(t);for(;;){const o=P4($);if(o===-1)break;{const c=o;switch(c){case 34:{ot(n,'\\"');break}case 92:{ot(n,"\\\\");break}case 47:{nt(n,c);break}case 10:{ot(n,"\\n");break}case 13:{ot(n,"\\r");break}case 8:{ot(n,"\\b");break}case 9:{ot(n,"\\t");break}default:{const _=c;_===12?ot(n,"\\f"):_<32?(ot(n,"\\u00"),ot(n,ib(_&255))):nt(n,c)}}continue}}return n.val}function We(t,e){return""}function D(t,e,n,$){const o=Ne(),s=[];let c=t;for(;;){const _=c;if(_===void 0){if(s.length===0)break;{const i=s[s.length-1|0];if(i.$tag===0){const r=i,a=r._0,l=r._1;if(l<a.length){const u=A1(a,l);r._1=l+1|0,l>0&&(nt(o,44),ot(o,We())),c=u;continue}else{t_(s),ot(o,We()),nt(o,93),c=void 0;continue}}else{const r=i,a=r._0,l=r._1,u=Nc(a);if(u===void 0){t_(s),ot(o,We()),nt(o,125),c=void 0;continue}else{const m=u,b=m._0;let f=m._1;l||(nt(o,44),ot(o,We())),nt(o,34),ot(o,As(b)),nt(o,34),nt(o,58),r._1=!1,c=f;continue}}}}else{const r=_;switch(r.$tag){case 6:{const l=r._0;l.size===0?ot(o,"{}"):(nt(o,123),ot(o,We()),Vs(s,new v_(Fc(l),!0)));break}case 5:{const l=r._0;l.length===0?ot(o,"[]"):(nt(o,91),ot(o,We()),Vs(s,new P_(l,0)));break}case 4:{const l=r._0;nt(o,34),ot(o,As(l)),nt(o,34);break}case 3:{const a=r,l=a._0,u=a._1;u===void 0?cb(o,l):ot(o,u);break}case 1:{ot(o,"true");break}case 2:{ot(o,"false");break}default:ot(o,"null")}c=void 0;continue}}return o.val}function rn(t){if(t.$tag===3){const n=t._0;return new A$(n)}else return ao}function mo(t){if(t.$tag===4)return t._0}function _c(t){if(t.$tag===5){const n=t._0;return new x_(n)}else return rr}function cc(t){if(t.$tag===6)return t._0}function Kf(t,e){return Pg(t,e)}function Qf(t,e){return v$(t,e)}function Zf(t,e){let n;return n=G_,Kf(t,n)}function t1(t,e){let n;return n=G_,Qf(t,n)}function e1(t,e){switch(t.$tag){case 1:return new l$(!0);case 2:return new l$(!1);default:return Jf(e,"Bool::from_json: expected boolean")}}function be(t,e){t:if(t.$tag===3){const $=t._0;if($!==Sn)if($!==Mn){if($>2147483647||$<-2147483648){const o=Rf(e,"Int::from_json: overflow");if(o.$tag===1)o._0;else return o}return new f_(Qe($))}else break t;else break t}else break t;return Ef(e,"Int::from_json: expected number")}function co(t,e){t:switch(t.$tag){case 4:switch(t._0){case"NaN":return new un(Fa);case"Infinity":return new un(Ha);case"-Infinity":return new un(Na);default:break t}case 3:{const $=t._0;if($!==Sn&&$!==Mn)return new un(Math.fround($));break t}default:break t}return zf(e,"Float::from_json: expected number")}function Zt(t,e){if(t.$tag===4){const $=t._0;return new w_($)}else return Tf(e,"String::from_json: expected string")}function n1(t){return Math.round(t)}function o1(t){return n=>{let $=t;for(;;){const o=$;if(o.$tag===0)return 1;{const s=o,c=s._0,_=s._1;if(n(c)===0)return 0;$=_;continue}}}}function $1(t,e){let n=t;for(;;){const $=n;if($.$tag===0)return;{const o=$,s=o._0,c=s._0,_=s._1,i=o._1;if(c===e)return _;n=i;continue}}}function ic(t,e){let n=t,$=0;for(;;){const o=n,s=$;if(o.$tag===0)return;{const c=o,_=c._0,i=c._1;if(e(_))return s;n=i,$=s+1|0;continue}}}function rc(t,e){if(t.$tag===0)return Ze;if(e<0)return t;if(e===0)return t._1;{const n=t,$=n._0,o=n._1,s=new wn($,Ze);let c=s,_=o,i=e-1|0;for(;;){const r=c,a=_,l=i;if(a.$tag===0)break;if(r.$tag===1){const u=r,p=a,m=p._0,b=p._1;if(l===0){u._1=b;break}else{u._1=new wn(m,Ze),c=u._1,_=b,i=l-1|0;continue}}else{S();break}}return s}}function s1(t,e){e.method_0(e.self,String(t))}function ac(t,e,n){let $;return n===void 0?$=t.end-t.start|0:$=n,e>=0&&e<=$&&$<=(t.end-t.start|0)?{str:t.str,start:t.start+e|0,end:t.start+$|0}:N2()}function _1(t,e,n,$){let o=0,s=$;for(;(s-1|0)>=n&&o<e;){const c=s-1|0,_=t.charCodeAt(c);56320<=_&&_<=57343?s=s-2|0:s=s-1|0,o=o+1|0;continue}return o<e||s<n?void 0:s}function c1(t,e,n,$){if(n>=0&&n<=$){let o=n,s=0;for(;o<$&&s<e;){const c=o,_=t.charCodeAt(c);55296<=_&&_<=56319?o=o+2|0:o=o+1|0,s=s+1|0;continue}return s<e||o>=$?void 0:o}else return D2()}function h(t,e,n,$){let o;return $===void 0?o=t.length:o=$,e>=0?c1(t,e,n,o):_1(t,-e|0,n,o)}function Se(t,e,n,$){let o;$===void 0?o=t.length:o=$;let s=n,c=0;for(;;){const _=s,i=c;if(_<o&&i<e){const r=t.charCodeAt(_);if(55296<=r&&r<=56319&&(_+1|0)<o){const a=_+1|0,l=t.charCodeAt(a);if(56320<=l&&l<=57343){s=_+2|0,c=i+1|0;continue}else ue()}s=_+1|0,c=i+1|0;continue}else return i===e&&_===o}}function $t(t,e,n,$){let o;$===void 0?o=t.length:o=$;let s=n,c=0;for(;;){const _=s,i=c;if(_<o&&i<e){const r=t.charCodeAt(_);if(55296<=r&&r<=56319&&(_+1|0)<o){const a=_+1|0,l=t.charCodeAt(a);if(56320<=l&&l<=57343){s=_+2|0,c=i+1|0;continue}else ue()}s=_+1|0,c=i+1|0;continue}else return i>=e}}function io(t){return t.str.substring(t.start,t.end)}function lc(t,e){return(((Math.imul(t-55296|0,1024)|0)+e|0)-56320|0)+65536|0}function i1(t,e){const n=t.end-t.start|0;if(n===(e.end-e.start|0)){if(t.str===e.str&&t.start===e.start)return!0;let $=0;for(;;){const o=$;if(o<n){const s=t.str,c=t.start+o|0,_=s.charCodeAt(c),i=e.str,r=e.start+o|0;if(_!==i.charCodeAt(r))return!1;$=o+1|0;continue}else break}return!0}else return!1}function r1(t){const e=t.length,n={val:0};return()=>{if(n.val<e){const o=n.val,s=t.charCodeAt(o);if(55296<=s&&s<=56319&&(n.val+1|0)<e){const c=n.val+1|0,_=t.charCodeAt(c);if(56320<=_&&_<=57343){const i=lc(s,_);return n.val=n.val+2|0,i}}return n.val=n.val+1|0,s}else return-1}}function a1(t,e){const n=t.end-t.start|0,$=e.end-e.start|0;if($>0)if(n>=$){const o=tt(256,$),s=$-1|0;let c=0;for(;;){const i=c;if(i<s){const r=e.str,a=e.start+i|0,l=r.charCodeAt(a)&255;d(o,l),o[l]=($-1|0)-i|0,c=i+1|0;continue}else break}let _=0;for(;;){const i=_;if(i<=(n-$|0)){const r=$-1|0;let a=0;for(;;){const b=a;if(b<=r){const g=i+b|0,f=t.str,k=t.start+g|0,w=f.charCodeAt(k),I=e.str,y=e.start+b|0;if(w!==I.charCodeAt(y))break;a=b+1|0;continue}else return i}const l=(i+$|0)-1|0,u=t.str,p=t.start+l|0,m=u.charCodeAt(p)&255;d(o,m),_=i+o[m]|0;continue}else break}return}else return;else return Da}function l1(t,e){const n=t.end-t.start|0,$=e.end-e.start|0;if($>0)if(n>=$){const s=e.str,c=e.start+0|0,_=s.charCodeAt(c),i=n-$|0;let r=0;for(;r<=i;){for(;;){let a;if(r<=i){const l=r,u=t.str,p=t.start+l|0;a=u.charCodeAt(p)!==_}else a=!1;if(a){r=r+1|0;continue}else break}if(r<=i){let a=1;for(;;){const l=a;if(l<$){const u=r+l|0,p=t.str,m=t.start+u|0,b=p.charCodeAt(m),g=e.str,f=e.start+l|0;if(b!==g.charCodeAt(f))break;a=l+1|0;continue}else return r}r=r+1|0}continue}return}else return;else return Ua}function u1(t,e){return(e.end-e.start|0)<=4?l1(t,e):a1(t,e)}function s$(t,e){return u1(t,e)!==void 0}function p1(t){return(t.end-t.start|0)===0}function To(t,e){if(e>=0&&e<(t.end-t.start|0)){const n=t.str,$=t.start+e|0,o=n.charCodeAt($);if(55296<=o&&o<=56319)if((e+1|0)<(t.end-t.start|0)){const s=e+1|0,c=t.str,_=t.start+s|0,i=c.charCodeAt(_);return 56320<=i&&i<=57343?lc(o,i):-1}else return-1;else return 56320<=o&&o<=57343?-1:o}else return-1}function m1(t,e,n){d(e,0),e[0]=1634760805,d(e,1),e[1]=1634760805,d(e,2),e[2]=1634760805,d(e,3),e[3]=1634760805,d(e,4),e[4]=857760878,d(e,5),e[5]=857760878,d(e,6),e[6]=857760878,d(e,7),e[7]=857760878,d(e,8),e[8]=2036477234,d(e,9),e[9]=2036477234,d(e,10),e[10]=2036477234,d(e,11),e[11]=2036477234,d(e,12),e[12]=1797285236,d(e,13),e[13]=1797285236,d(e,14),e[14]=1797285236,d(e,15),e[15]=1797285236,d(t,0),d(e,16),e[16]=t[0],d(t,0),d(e,17),e[17]=t[0],d(t,0),d(e,18),e[18]=t[0],d(t,0),d(e,19),e[19]=t[0],d(t,1),d(e,20),e[20]=t[1],d(t,1),d(e,21),e[21]=t[1],d(t,1),d(e,22),e[22]=t[1],d(t,1),d(e,23),e[23]=t[1],d(t,2),d(e,24),e[24]=t[2],d(t,2),d(e,25),e[25]=t[2],d(t,2),d(e,26),e[26]=t[2],d(t,2),d(e,27),e[27]=t[2],d(t,3),d(e,28),e[28]=t[3],d(t,3),d(e,29),e[29]=t[3],d(t,3),d(e,30),e[30]=t[3],d(t,3),d(e,31),e[31]=t[3],d(t,4),d(e,32),e[32]=t[4],d(t,4),d(e,33),e[33]=t[4],d(t,4),d(e,34),e[34]=t[4],d(t,4),d(e,35),e[35]=t[4],d(t,5),d(e,36),e[36]=t[5],d(t,5),d(e,37),e[37]=t[5],d(t,5),d(e,38),e[38]=t[5],d(t,5),d(e,39),e[39]=t[5],d(t,6),d(e,40),e[40]=t[6],d(t,6),d(e,41),e[41]=t[6],d(t,6),d(e,42),e[42]=t[6],d(t,6),d(e,43),e[43]=t[6],d(t,7),d(e,44),e[44]=t[7],d(t,7),d(e,45),e[45]=t[7],d(t,7),d(e,46),e[46]=t[7],d(t,7),d(e,47),e[47]=t[7],d(e,48),e[48]=n,d(e,49),e[49]=(n>>>0)+1|0,d(e,50),e[50]=(n>>>0)+2|0,d(e,51),e[51]=(n>>>0)+3|0,d(e,52),e[52]=0,d(e,53),e[53]=0,d(e,54),e[54]=0,d(e,55),e[55]=0,d(e,56),e[56]=0,d(e,57),e[57]=0,d(e,58),e[58]=0,d(e,59),e[59]=0,d(e,60),e[60]=0,d(e,61),e[61]=0,d(e,62),e[62]=0,d(e,63),e[63]=0}function pe(t){const e=t._0,n=t._1,$=t._2,o=t._3,s=(e>>>0)+(n>>>0)|0,c=o^s,_=c<<16|(c>>>16|0),i=($>>>0)+(_>>>0)|0,r=n^i,a=r<<12|(r>>>20|0),l=(s>>>0)+(a>>>0)|0,u=_^l,p=u<<8|(u>>>24|0),m=(i>>>0)+(p>>>0)|0,b=a^m,g=b<<7|(b>>>25|0);return{_0:l,_1:g,_2:m,_3:p}}function uc(t,e,n){m1(t,e,n);let $=0;for(;;){const o=$;if(o<4){d(e,o);let s=e[o];const c=4+o|0;d(e,c);let _=e[c];const i=8+o|0;d(e,i);let r=e[i];const a=12+o|0;d(e,a);let l=e[a];const u=16+o|0;d(e,u);let p=e[u];const m=20+o|0;d(e,m);let b=e[m];const g=24+o|0;d(e,g);let f=e[g];const k=28+o|0;d(e,k);let w=e[k];const I=32+o|0;d(e,I);let y=e[I];const L=36+o|0;d(e,L);let M=e[L];const G=40+o|0;d(e,G);let C=e[G];const O=44+o|0;d(e,O);let x=e[O];const A=48+o|0;d(e,A);let q=e[A];const H=52+o|0;d(e,H);let B=e[H];const ct=56+o|0;d(e,ct);let K=e[ct];const Z=60+o|0;d(e,Z);let F=e[Z],N=0;for(;;){const ms=N;if(ms<4){const Un=pe({_0:s,_1:p,_2:y,_3:q});s=Un._0,p=Un._1,y=Un._2,q=Un._3;const Vn=pe({_0:_,_1:b,_2:M,_3:B});_=Vn._0,b=Vn._1,M=Vn._2,B=Vn._3;const Wn=pe({_0:r,_1:f,_2:C,_3:K});r=Wn._0,f=Wn._1,C=Wn._2,K=Wn._3;const Xn=pe({_0:l,_1:w,_2:x,_3:F});l=Xn._0,w=Xn._1,x=Xn._2,F=Xn._3;const Yn=pe({_0:s,_1:b,_2:C,_3:F});s=Yn._0,b=Yn._1,C=Yn._2,F=Yn._3;const Kn=pe({_0:_,_1:f,_2:x,_3:q});_=Kn._0,f=Kn._1,x=Kn._2,q=Kn._3;const Qn=pe({_0:r,_1:w,_2:y,_3:B});r=Qn._0,w=Qn._1,y=Qn._2,B=Qn._3;const Zn=pe({_0:l,_1:p,_2:M,_3:K});l=Zn._0,p=Zn._1,M=Zn._2,K=Zn._3,N=ms+1|0;continue}else break}d(e,o),e[o]=s;const V=4+o|0;d(e,V),e[V]=_;const at=8+o|0;d(e,at),e[at]=r;const W=12+o|0;d(e,W),e[W]=l;const et=16+o|0;d(e,et),d(e,et),e[et]=(e[et]>>>0)+(p>>>0)|0;const qt=20+o|0;d(e,qt),d(e,qt),e[qt]=(e[qt]>>>0)+(b>>>0)|0;const qn=24+o|0;d(e,qn),d(e,qn),e[qn]=(e[qn]>>>0)+(f>>>0)|0;const Bn=28+o|0;d(e,Bn),d(e,Bn),e[Bn]=(e[Bn]>>>0)+(w>>>0)|0;const Fn=32+o|0;d(e,Fn),d(e,Fn),e[Fn]=(e[Fn]>>>0)+(y>>>0)|0;const Hn=36+o|0;d(e,Hn),d(e,Hn),e[Hn]=(e[Hn]>>>0)+(M>>>0)|0;const Nn=40+o|0;d(e,Nn),d(e,Nn),e[Nn]=(e[Nn]>>>0)+(C>>>0)|0;const Dn=44+o|0;d(e,Dn),d(e,Dn),e[Dn]=(e[Dn]>>>0)+(x>>>0)|0;const as=48+o|0;d(e,as),e[as]=q;const ls=52+o|0;d(e,ls),e[ls]=B;const us=56+o|0;d(e,us),e[us]=K;const ps=60+o|0;d(e,ps),e[ps]=F,$=o+1|0;continue}else return}}function d1(t){const e=K2(8,o=>Mf(yf(t,Math.imul(o,4)|0,(Math.imul(o,4)|0)+4|0))),n=tt(64,0);return uc(e,n,0),{buffer:n,seed:e,i:0,n:32,counter:0}}function f1(t){const e=t.i;if(e>>>0>=t.n>>>0)return;t.i=(e>>>0)+1|0;const n=e&31,$=t.buffer,o=Math.imul(n,2)|0;d($,o);const s=I$($[o]),c=t.buffer,_=(Math.imul(n,2)|0)+1|0;d(c,_);const i=I$(c[_]);return lg(xn(i,32),s)}function b1(t){t.counter=(t.counter>>>0)+4|0,t.counter===16&&(bg(t.buffer,t.seed,8,56,0),t.counter=0),uc(t.seed,t.buffer,t.counter),t.i=0,t.n=t.counter===12?28:32}function g1(t){for(;;){const e=f1(t);if(e!==void 0)return e;b1(t)}}function h1(t){return{self:d1(t),method_0:g1}}function k1(t){return h1(ar)}function Es(t,e){const n=Re(t,n$),$=Dt(t,32),o=Re(e,n$),s=Dt(e,32),c=Bt(n,o),_=ge(Bt($,o),Dt(c,32)),i=ge(Bt(n,s),Re(_,n$));return{hi:ge(ge(Bt($,s),Dt(_,32)),Dt(i,32)),lo:Bt(t,e)}}function w1(t,e){if(he(e,it)){const o=t;return o.method_0(o.self)}else if(he(Re(e,L$(e,Ct)),it)){const o=t;return Re(o.method_0(o.self),L$(e,Ct))}const n=t;let $=Es(n.method_0(n.self),e);if(k$($.lo,e)){const o=ag(ug(e),e);for(;k$($.lo,o);){const s=t;$=Es(s.method_0(s.self),e);continue}}return $.hi}function y1(t,e){if(e===0){const n=t;return Qs(n.method_0(n.self))}return Qs(w1(t,I$(e)))}function M1(t,e){if(e===0){const n=t;return bc(Dt(n.method_0(n.self),33))}else return y1(t,e)}function S1(t){const e=t;return So(Dt(xn(e.method_0(e.self),11),11))/So(xn(Ct,53))}function zn(t){const e=rt(t),n=e-1|0,$=(Math.imul(e,13)|0)/16|0;return{entries:tt(e,void 0),size:0,capacity:e,capacity_mask:n,grow_at:$,head:void 0,tail:-1}}function C1(t,e,n){const $=t.tail;if($===-1)t.head=n;else{const s=t.entries;d(s,$);const c=s[$];let _;c===void 0?_=S():_=c,_.next=n}t.tail=e;const o=t.entries;d(o,e),o[e]=n,t.size=t.size+1|0}function Rs(t,e,n){const $=t.entries;d($,n),$[n]=e;const o=e.next;if(o===void 0){t.tail=n;return}else{const c=o;c.prev=n;return}}function I1(t,e,n){let $=n.psl+1|0,o=e+1&t.capacity_mask,s=n;for(;;){const c=$,_=o,i=s,r=t.entries;d(r,_);const a=r[_];if(a===void 0){i.psl=c,Rs(t,i,_);break}else{const u=a;if(c>u.psl){i.psl=c,Rs(t,i,_),$=u.psl+1|0,o=_+1&t.capacity_mask,s=u;continue}else{$=c+1|0,o=_+1&t.capacity_mask;continue}}}}function pc(t,e,n){t.size>=t.grow_at&&L1(t);let $,o=0,s=n&t.capacity_mask;for(;;){const l=o,u=s,p=t.entries;d(p,u);const m=p[u];if(m===void 0){$={_0:u,_1:l};break}else{const g=m;let f;if(g.hash===n){const k=g.key;f=k._0===e._0&&k._1===e._1}else f=!1;if(f)return;if(l>g.psl){I1(t,u,g),$={_0:u,_1:l};break}o=l+1|0,s=u+1&t.capacity_mask;continue}}const c=$._0,_=$._1,a={prev:t.tail,next:void 0,psl:_,hash:n,key:e};C1(t,c,a)}function L1(t){const e=t.head,n=t.capacity<<1;t.entries=tt(n,void 0),t.capacity=n,t.capacity_mask=n-1|0;const $=t.capacity;t.grow_at=(Math.imul($,13)|0)/16|0,t.size=0,t.head=void 0,t.tail=-1;let o=e;for(;;){const s=o;if(s===void 0)return;{const _=s,i=_.next,r=_.key,a=_.hash;pc(t,r,a),o=i;continue}}}function Ut(t,e){pc(t,e,De(e))}function mc(t){const e=t.end-t.start|0;let n=rt(e);e>((Math.imul(n,13)|0)/16|0)&&(n=Math.imul(n,2)|0);const o=zn(n),s=t.end-t.start|0;let c=0;for(;;){const _=c;if(_<s){const i=t.buf[t.start+_|0];Ut(o,i),c=_+1|0;continue}else break}return o}function Kt(t,e){const n=De(e);let $=0,o=n&t.capacity_mask;for(;;){const s=$,c=o,_=t.entries;d(_,c);const i=_[c];if(i===void 0)return!1;{const a=i;let l;if(a.hash===n){const u=a.key;l=u._0===e._0&&u._1===e._1}else l=!1;if(l)return!0;if(s>a.psl)return!1;$=s+1|0,o=c+1&t.capacity_mask;continue}}}function wt(t){M4(t.entries,void 0,0),t.size=0,t.head=void 0,t.tail=-1}function yt(t){const e={val:t.head};return()=>{const $=e.val;if($!==void 0){const s=$,c=s.key,_=s.next;return e.val=_,c}}}function h$(t,e){return Q1(t,e)}function P1(t,e){return Z1(t,e)}function Pn(t,e){return Y1(t,e)}function v1(t,e){return K1(t,e)}function qo(t,e){return U1(t,e)}function k$(t,e){return V1(t,e)}function G1(t,e,n,$,o){if(t===n&&e<$){let s=0;for(;;){const c=s;if(c<o){const _=e+c|0,i=$+c|0;d(n,i),d(t,_),t[_]=n[i],s=c+1|0;continue}else return}}else{let s=o-1|0;for(;;){const c=s;if(c>=0){const _=e+c|0,i=$+c|0;d(n,i),d(t,_),t[_]=n[i],s=c-1|0;continue}else return}}}function x1(t,e,n,$,o){if(t===n&&e<$){let s=0;for(;;){const c=s;if(c<o){const _=e+c|0,i=$+c|0;d(n,i),d(t,_),t[_]=n[i],s=c+1|0;continue}else return}}else{let s=o-1|0;for(;;){const c=s;if(c>=0){const _=e+c|0,i=$+c|0;d(n,i),d(t,_),t[_]=n[i],s=c-1|0;continue}else return}}}function Ne(t){return{val:""}}function nt(t,e){const n=t;n.val=`${n.val}${String.fromCodePoint(e)}`}function dc(t,e){return W1(t,e)}function wo(t,e){return X1(t,e)}function j1(t,e){return(((Math.imul(t-55296|0,1024)|0)+e|0)-56320|0)+65536|0}function j(t,e){const n=t.charCodeAt(e);if(55296<=n&&n<=56319){const $=e+1|0,o=t.charCodeAt($);return j1(n,o)}else return n}function O1(t,e){return!i1(t,e)}function A1(t,e){const n=t.length;return e>=0&&e<n?(d(t,e),t[e]):S()}function st(t,e){const n=t.length;return e>=0&&e<n?(d(t,e),t[e]):S()}function _t(t,e){const n=t.length;return e>=0&&e<n?(d(t,e),t[e]):S()}function ie(t,e){const n=t.length;return e>=0&&e<n?(d(t,e),t[e]):S()}function E1(t,e){const n=t.length;return e<n?(d(t,e),t[e]):S()}function R1(t,e){const n=t.length;return e>=0&&e<n?(d(t,e),t[e]):S()}function z1(t,e){const n=t.length;return e>=0&&e<n?(d(t,e),t[e]):S()}function J1(t,e){const n=t.length;return e>=0&&e<n?(d(t,e),t[e]):S()}function T1(t,e){const n=t.length;return e<n?(d(t,e),t[e]):S()}function me(t,e){const n=t.length;return e>=0&&e<n?(d(t,e),t[e]):S()}function ot(t,e){const n=t;n.val=`${n.val}${e}`}function Lt(t){const e=t._0,n=t._1,$=[J(e),J(n)];return new jt($)}function q1(t){const e=t._0,n=t._1,$=[Wo(e),Lt(n)];return new jt($)}function B1(t){const e=t._0,n=t._1,$=[Wo(e),J(n)];return new jt($)}function F1(t,e){dg(e,t)}function H1(t,e){yg(e,t)}function N1(t,e){D1(e,t)}function w$(t,e){fg(e,t)}function D1(t,e){const n=t._0,$=t._1;w$(e,n),w$(e,$)}function U1(t,e){return Uo(t,e)<0}function V1(t,e){return Vo(t,e)<0}function W1(t,e){return Uo(t,e)>0}function X1(t,e){return Vo(t,e)>0}function Y1(t,e){return Uo(t,e)<=0}function K1(t,e){return Vo(t,e)<=0}function Q1(t,e){return Uo(t,e)>=0}function Z1(t,e){return Vo(t,e)>=0}function tb(t){let e=t.acc;return e=e^(e>>>15|0),e=Math.imul(e,-2048144777)|0,e=e^(e>>>13|0),e=Math.imul(e,-1028477379)|0,e=e^(e>>>16|0),e}function Bo(t){return tb(t)}function eb(t){return{acc:(t>>>0)+374761393|0}}function Fo(t){let e;return e=J2,eb(e)}function Wt(t){const e=Fo();return F1(e,t),Bo(e)}function fc(t){const e=Fo();return H1(e,t),Bo(e)}function De(t){const e=Fo();return N1(e,t),Bo(e)}function $e(t){const e=Fo();return w$(e,t),Bo(e)}function nb(t){const e=Ne();return nh(t,{self:e,method_0:ot,method_1:Jn,method_2:nt}),e.val}function ob(t){const e=Ne();return wg(t,{self:e,method_0:ot,method_1:Jn,method_2:nt}),e.val}function Ho(t){const e=Ne(),n={self:e,method_0:ot,method_1:Jn,method_2:nt};return t?n.method_0(n.self,"true"):n.method_0(n.self,"false"),e.val}function $b(t){return{hi:t>>31&-1,lo:t|0}}function zt(t){return $b(t)}function Ae(t){return t.lo}function sb(t,e){return ur(t,e)}function vt(t){return sb(t,10)}function bc(t){return t.lo}function _b(t,e,n){const $=t.length;let o;return n===void 0?o=$:o=n,e>=0&&e<=o&&o<=$?t.substring(e,o):S()}function Jn(t,e,n,$){const o=t;o.val=`${o.val}${_b(e,n,n+$|0)}`}function cb(t,e){s1(e,{self:t,method_0:ot,method_1:Jn,method_2:nt})}function zs(t){return t<10?(t+48|0)&255:(((t+97|0)&255)-10|0)&255}function ib(t){const e=Ne();return nt(e,zs((t/16|0)&255)),nt(e,zs((t%16|0)&255)),e.val}function rb(t){return n=>{const $=t.length;let o=0;for(;;){const s=o;if(s<$){const c=t[s];if(n(c)!==1)return 0;o=s+1|0;continue}else return 1}}}function gc(t){return t.$tag===0?S():t._0}function an(t){return t.$tag===0?S():t._0}function rt(t){return t>=0?t<=1?1:t>1073741824?1073741824:(2147483647>>(Math.clz32(t-1|0)-1|0))+1|0:S()}function hc(t){const e=rt(t),n=e-1|0,$=(Math.imul(e,13)|0)/16|0;return{entries:tt(e,void 0),size:0,capacity:e,capacity_mask:n,grow_at:$,head:void 0,tail:-1}}function ab(t){const e=rt(t),n=e-1|0,$=(Math.imul(e,13)|0)/16|0;return{entries:tt(e,void 0),size:0,capacity:e,capacity_mask:n,grow_at:$,head:void 0,tail:-1}}function lb(t){const e=rt(t),n=e-1|0,$=(Math.imul(e,13)|0)/16|0;return{entries:tt(e,void 0),size:0,capacity:e,capacity_mask:n,grow_at:$,head:void 0,tail:-1}}function ub(t){const e=rt(t),n=e-1|0,$=(Math.imul(e,13)|0)/16|0;return{entries:tt(e,void 0),size:0,capacity:e,capacity_mask:n,grow_at:$,head:void 0,tail:-1}}function pb(t){const e=rt(t),n=e-1|0,$=(Math.imul(e,13)|0)/16|0;return{entries:tt(e,void 0),size:0,capacity:e,capacity_mask:n,grow_at:$,head:void 0,tail:-1}}function mb(t){const e=rt(t),n=e-1|0,$=(Math.imul(e,13)|0)/16|0;return{entries:tt(e,void 0),size:0,capacity:e,capacity_mask:n,grow_at:$,head:void 0,tail:-1}}function db(t){const e=rt(t),n=e-1|0,$=(Math.imul(e,13)|0)/16|0;return{entries:tt(e,void 0),size:0,capacity:e,capacity_mask:n,grow_at:$,head:void 0,tail:-1}}function fb(t){const e=rt(t),n=e-1|0,$=(Math.imul(e,13)|0)/16|0;return{entries:tt(e,void 0),size:0,capacity:e,capacity_mask:n,grow_at:$,head:void 0,tail:-1}}function bb(t){const e=rt(t),n=e-1|0,$=(Math.imul(e,13)|0)/16|0;return{entries:tt(e,void 0),size:0,capacity:e,capacity_mask:n,grow_at:$,head:void 0,tail:-1}}function gb(t){const e=rt(t),n=e-1|0,$=(Math.imul(e,13)|0)/16|0;return{entries:tt(e,void 0),size:0,capacity:e,capacity_mask:n,grow_at:$,head:void 0,tail:-1}}function hb(t){const e=rt(t),n=e-1|0,$=(Math.imul(e,13)|0)/16|0;return{entries:tt(e,void 0),size:0,capacity:e,capacity_mask:n,grow_at:$,head:void 0,tail:-1}}function kb(t,e,n){const $=t.tail;if($===-1)t.head=n;else{const s=t.entries;d(s,$);const c=s[$];let _;c===void 0?_=S():_=c,_.next=n}t.tail=e;const o=t.entries;d(o,e),o[e]=n,t.size=t.size+1|0}function wb(t,e,n){const $=t.tail;if($===-1)t.head=n;else{const s=t.entries;d(s,$);const c=s[$];let _;c===void 0?_=S():_=c,_.next=n}t.tail=e;const o=t.entries;d(o,e),o[e]=n,t.size=t.size+1|0}function yb(t,e,n){const $=t.tail;if($===-1)t.head=n;else{const s=t.entries;d(s,$);const c=s[$];let _;c===void 0?_=S():_=c,_.next=n}t.tail=e;const o=t.entries;d(o,e),o[e]=n,t.size=t.size+1|0}function Mb(t,e,n){const $=t.tail;if($===-1)t.head=n;else{const s=t.entries;d(s,$);const c=s[$];let _;c===void 0?_=S():_=c,_.next=n}t.tail=e;const o=t.entries;d(o,e),o[e]=n,t.size=t.size+1|0}function Sb(t,e,n){const $=t.tail;if($===-1)t.head=n;else{const s=t.entries;d(s,$);const c=s[$];let _;c===void 0?_=S():_=c,_.next=n}t.tail=e;const o=t.entries;d(o,e),o[e]=n,t.size=t.size+1|0}function Cb(t,e,n){const $=t.tail;if($===-1)t.head=n;else{const s=t.entries;d(s,$);const c=s[$];let _;c===void 0?_=S():_=c,_.next=n}t.tail=e;const o=t.entries;d(o,e),o[e]=n,t.size=t.size+1|0}function Ib(t,e,n){const $=t.tail;if($===-1)t.head=n;else{const s=t.entries;d(s,$);const c=s[$];let _;c===void 0?_=S():_=c,_.next=n}t.tail=e;const o=t.entries;d(o,e),o[e]=n,t.size=t.size+1|0}function Lb(t,e,n){const $=t.tail;if($===-1)t.head=n;else{const s=t.entries;d(s,$);const c=s[$];let _;c===void 0?_=S():_=c,_.next=n}t.tail=e;const o=t.entries;d(o,e),o[e]=n,t.size=t.size+1|0}function Pb(t,e,n){const $=t.tail;if($===-1)t.head=n;else{const s=t.entries;d(s,$);const c=s[$];let _;c===void 0?_=S():_=c,_.next=n}t.tail=e;const o=t.entries;d(o,e),o[e]=n,t.size=t.size+1|0}function vb(t,e,n){const $=t.tail;if($===-1)t.head=n;else{const s=t.entries;d(s,$);const c=s[$];let _;c===void 0?_=S():_=c,_.next=n}t.tail=e;const o=t.entries;d(o,e),o[e]=n,t.size=t.size+1|0}function Gb(t,e,n){const $=t.tail;if($===-1)t.head=n;else{const s=t.entries;d(s,$);const c=s[$];let _;c===void 0?_=S():_=c,_.next=n}t.tail=e;const o=t.entries;d(o,e),o[e]=n,t.size=t.size+1|0}function Js(t,e,n){const $=t.entries;d($,n),$[n]=e;const o=e.next;if(o===void 0){t.tail=n;return}else{const c=o;c.prev=n;return}}function y$(t,e,n){const $=t.entries;d($,n),$[n]=e;const o=e.next;if(o===void 0){t.tail=n;return}else{const c=o;c.prev=n;return}}function M$(t,e,n){const $=t.entries;d($,n),$[n]=e;const o=e.next;if(o===void 0){t.tail=n;return}else{const c=o;c.prev=n;return}}function S$(t,e,n){const $=t.entries;d($,n),$[n]=e;const o=e.next;if(o===void 0){t.tail=n;return}else{const c=o;c.prev=n;return}}function Ts(t,e,n){const $=t.entries;d($,n),$[n]=e;const o=e.next;if(o===void 0){t.tail=n;return}else{const c=o;c.prev=n;return}}function qs(t,e,n){const $=t.entries;d($,n),$[n]=e;const o=e.next;if(o===void 0){t.tail=n;return}else{const c=o;c.prev=n;return}}function Bs(t,e,n){const $=t.entries;d($,n),$[n]=e;const o=e.next;if(o===void 0){t.tail=n;return}else{const c=o;c.prev=n;return}}function Fs(t,e,n){const $=t.entries;d($,n),$[n]=e;const o=e.next;if(o===void 0){t.tail=n;return}else{const c=o;c.prev=n;return}}function Hs(t,e,n){const $=t.entries;d($,n),$[n]=e;const o=e.next;if(o===void 0){t.tail=n;return}else{const c=o;c.prev=n;return}}function Ns(t,e,n){const $=t.entries;d($,n),$[n]=e;const o=e.next;if(o===void 0){t.tail=n;return}else{const c=o;c.prev=n;return}}function Ds(t,e,n){const $=t.entries;d($,n),$[n]=e;const o=e.next;if(o===void 0){t.tail=n;return}else{const c=o;c.prev=n;return}}function xb(t,e,n){let $=n.psl+1|0,o=e+1&t.capacity_mask,s=n;for(;;){const c=$,_=o,i=s,r=t.entries;d(r,_);const a=r[_];if(a===void 0){i.psl=c,Js(t,i,_);break}else{const u=a;if(c>u.psl){i.psl=c,Js(t,i,_),$=u.psl+1|0,o=_+1&t.capacity_mask,s=u;continue}else{$=c+1|0,o=_+1&t.capacity_mask;continue}}}}function jb(t,e,n){let $=n.psl+1|0,o=e+1&t.capacity_mask,s=n;for(;;){const c=$,_=o,i=s,r=t.entries;d(r,_);const a=r[_];if(a===void 0){i.psl=c,Ts(t,i,_);break}else{const u=a;if(c>u.psl){i.psl=c,Ts(t,i,_),$=u.psl+1|0,o=_+1&t.capacity_mask,s=u;continue}else{$=c+1|0,o=_+1&t.capacity_mask;continue}}}}function Ob(t,e,n){let $=n.psl+1|0,o=e+1&t.capacity_mask,s=n;for(;;){const c=$,_=o,i=s,r=t.entries;d(r,_);const a=r[_];if(a===void 0){i.psl=c,S$(t,i,_);break}else{const u=a;if(c>u.psl){i.psl=c,S$(t,i,_),$=u.psl+1|0,o=_+1&t.capacity_mask,s=u;continue}else{$=c+1|0,o=_+1&t.capacity_mask;continue}}}}function Ab(t,e,n){let $=n.psl+1|0,o=e+1&t.capacity_mask,s=n;for(;;){const c=$,_=o,i=s,r=t.entries;d(r,_);const a=r[_];if(a===void 0){i.psl=c,y$(t,i,_);break}else{const u=a;if(c>u.psl){i.psl=c,y$(t,i,_),$=u.psl+1|0,o=_+1&t.capacity_mask,s=u;continue}else{$=c+1|0,o=_+1&t.capacity_mask;continue}}}}function Eb(t,e,n){let $=n.psl+1|0,o=e+1&t.capacity_mask,s=n;for(;;){const c=$,_=o,i=s,r=t.entries;d(r,_);const a=r[_];if(a===void 0){i.psl=c,M$(t,i,_);break}else{const u=a;if(c>u.psl){i.psl=c,M$(t,i,_),$=u.psl+1|0,o=_+1&t.capacity_mask,s=u;continue}else{$=c+1|0,o=_+1&t.capacity_mask;continue}}}}function Rb(t,e,n){let $=n.psl+1|0,o=e+1&t.capacity_mask,s=n;for(;;){const c=$,_=o,i=s,r=t.entries;d(r,_);const a=r[_];if(a===void 0){i.psl=c,qs(t,i,_);break}else{const u=a;if(c>u.psl){i.psl=c,qs(t,i,_),$=u.psl+1|0,o=_+1&t.capacity_mask,s=u;continue}else{$=c+1|0,o=_+1&t.capacity_mask;continue}}}}function zb(t,e,n){let $=n.psl+1|0,o=e+1&t.capacity_mask,s=n;for(;;){const c=$,_=o,i=s,r=t.entries;d(r,_);const a=r[_];if(a===void 0){i.psl=c,Bs(t,i,_);break}else{const u=a;if(c>u.psl){i.psl=c,Bs(t,i,_),$=u.psl+1|0,o=_+1&t.capacity_mask,s=u;continue}else{$=c+1|0,o=_+1&t.capacity_mask;continue}}}}function Jb(t,e,n){let $=n.psl+1|0,o=e+1&t.capacity_mask,s=n;for(;;){const c=$,_=o,i=s,r=t.entries;d(r,_);const a=r[_];if(a===void 0){i.psl=c,Fs(t,i,_);break}else{const u=a;if(c>u.psl){i.psl=c,Fs(t,i,_),$=u.psl+1|0,o=_+1&t.capacity_mask,s=u;continue}else{$=c+1|0,o=_+1&t.capacity_mask;continue}}}}function Tb(t,e,n){let $=n.psl+1|0,o=e+1&t.capacity_mask,s=n;for(;;){const c=$,_=o,i=s,r=t.entries;d(r,_);const a=r[_];if(a===void 0){i.psl=c,Hs(t,i,_);break}else{const u=a;if(c>u.psl){i.psl=c,Hs(t,i,_),$=u.psl+1|0,o=_+1&t.capacity_mask,s=u;continue}else{$=c+1|0,o=_+1&t.capacity_mask;continue}}}}function qb(t,e,n){let $=n.psl+1|0,o=e+1&t.capacity_mask,s=n;for(;;){const c=$,_=o,i=s,r=t.entries;d(r,_);const a=r[_];if(a===void 0){i.psl=c,Ns(t,i,_);break}else{const u=a;if(c>u.psl){i.psl=c,Ns(t,i,_),$=u.psl+1|0,o=_+1&t.capacity_mask,s=u;continue}else{$=c+1|0,o=_+1&t.capacity_mask;continue}}}}function Bb(t,e,n){let $=n.psl+1|0,o=e+1&t.capacity_mask,s=n;for(;;){const c=$,_=o,i=s,r=t.entries;d(r,_);const a=r[_];if(a===void 0){i.psl=c,Ds(t,i,_);break}else{const u=a;if(c>u.psl){i.psl=c,Ds(t,i,_),$=u.psl+1|0,o=_+1&t.capacity_mask,s=u;continue}else{$=c+1|0,o=_+1&t.capacity_mask;continue}}}}function kc(t,e,n,$){t.size>=t.grow_at&&Fb(t);let o,s=0,c=$&t.capacity_mask;for(;;){const u=s,p=c,m=t.entries;d(m,p);const b=m[p];if(b===void 0){o={_0:p,_1:u};break}else{const f=b;if(f.hash===$&&f.key===e){f.value=n;return}if(u>f.psl){xb(t,p,f),o={_0:p,_1:u};break}s=u+1|0,c=p+1&t.capacity_mask;continue}}const _=o._0,i=o._1,l={prev:t.tail,next:void 0,psl:i,hash:$,key:e,value:n};kb(t,_,l)}function wc(t,e,n,$){t.size>=t.grow_at&&Hb(t);let o,s=0,c=$&t.capacity_mask;for(;;){const u=s,p=c,m=t.entries;d(m,p);const b=m[p];if(b===void 0){o={_0:p,_1:u};break}else{const f=b;if(f.hash===$&&$i(f.key,e)){f.value=n;return}if(u>f.psl){jb(t,p,f),o={_0:p,_1:u};break}s=u+1|0,c=p+1&t.capacity_mask;continue}}const _=o._0,i=o._1,l={prev:t.tail,next:void 0,psl:i,hash:$,key:e,value:n};wb(t,_,l)}function yc(t,e,n,$){t.size>=t.grow_at&&Nb(t);let o,s=0,c=$&t.capacity_mask;for(;;){const u=s,p=c,m=t.entries;d(m,p);const b=m[p];if(b===void 0){o={_0:p,_1:u};break}else{const f=b;if(f.hash===$&&f.key===e){f.value=n;return}if(u>f.psl){Ob(t,p,f),o={_0:p,_1:u};break}s=u+1|0,c=p+1&t.capacity_mask;continue}}const _=o._0,i=o._1,l={prev:t.tail,next:void 0,psl:i,hash:$,key:e,value:n};yb(t,_,l)}function Mc(t,e,n,$){t.size>=t.grow_at&&Db(t);let o,s=0,c=$&t.capacity_mask;for(;;){const u=s,p=c,m=t.entries;d(m,p);const b=m[p];if(b===void 0){o={_0:p,_1:u};break}else{const f=b;if(f.hash===$&&f.key===e){f.value=n;return}if(u>f.psl){Ab(t,p,f),o={_0:p,_1:u};break}s=u+1|0,c=p+1&t.capacity_mask;continue}}const _=o._0,i=o._1,l={prev:t.tail,next:void 0,psl:i,hash:$,key:e,value:n};Mb(t,_,l)}function Sc(t,e,n,$){t.size>=t.grow_at&&Ub(t);let o,s=0,c=$&t.capacity_mask;for(;;){const u=s,p=c,m=t.entries;d(m,p);const b=m[p];if(b===void 0){o={_0:p,_1:u};break}else{const f=b;if(f.hash===$&&f.key===e){f.value=n;return}if(u>f.psl){Eb(t,p,f),o={_0:p,_1:u};break}s=u+1|0,c=p+1&t.capacity_mask;continue}}const _=o._0,i=o._1,l={prev:t.tail,next:void 0,psl:i,hash:$,key:e,value:n};Sb(t,_,l)}function Cc(t,e,n,$){t.size>=t.grow_at&&Vb(t);let o,s=0,c=$&t.capacity_mask;for(;;){const u=s,p=c,m=t.entries;d(m,p);const b=m[p];if(b===void 0){o={_0:p,_1:u};break}else{const f=b;if(f.hash===$&&f.key===e){f.value=n;return}if(u>f.psl){Rb(t,p,f),o={_0:p,_1:u};break}s=u+1|0,c=p+1&t.capacity_mask;continue}}const _=o._0,i=o._1,l={prev:t.tail,next:void 0,psl:i,hash:$,key:e,value:n};Cb(t,_,l)}function Ic(t,e,n,$){t.size>=t.grow_at&&Wb(t);let o,s=0,c=$&t.capacity_mask;for(;;){const u=s,p=c,m=t.entries;d(m,p);const b=m[p];if(b===void 0){o={_0:p,_1:u};break}else{const f=b;if(f.hash===$&&f.key===e){f.value=n;return}if(u>f.psl){zb(t,p,f),o={_0:p,_1:u};break}s=u+1|0,c=p+1&t.capacity_mask;continue}}const _=o._0,i=o._1,l={prev:t.tail,next:void 0,psl:i,hash:$,key:e,value:n};Ib(t,_,l)}function Lc(t,e,n,$){t.size>=t.grow_at&&Xb(t);let o,s=0,c=$&t.capacity_mask;for(;;){const u=s,p=c,m=t.entries;d(m,p);const b=m[p];if(b===void 0){o={_0:p,_1:u};break}else{const f=b;let k;if(f.hash===$){const w=f.key;k=w._0===e._0&&w._1===e._1}else k=!1;if(k){f.value=n;return}if(u>f.psl){Jb(t,p,f),o={_0:p,_1:u};break}s=u+1|0,c=p+1&t.capacity_mask;continue}}const _=o._0,i=o._1,l={prev:t.tail,next:void 0,psl:i,hash:$,key:e,value:n};Lb(t,_,l)}function Pc(t,e,n,$){t.size>=t.grow_at&&Yb(t);let o,s=0,c=$&t.capacity_mask;for(;;){const u=s,p=c,m=t.entries;d(m,p);const b=m[p];if(b===void 0){o={_0:p,_1:u};break}else{const f=b;let k;if(f.hash===$){const w=f.key;k=w._0===e._0&&w._1===e._1}else k=!1;if(k){f.value=n;return}if(u>f.psl){Tb(t,p,f),o={_0:p,_1:u};break}s=u+1|0,c=p+1&t.capacity_mask;continue}}const _=o._0,i=o._1,l={prev:t.tail,next:void 0,psl:i,hash:$,key:e,value:n};Pb(t,_,l)}function vc(t,e,n,$){t.size>=t.grow_at&&Kb(t);let o,s=0,c=$&t.capacity_mask;for(;;){const u=s,p=c,m=t.entries;d(m,p);const b=m[p];if(b===void 0){o={_0:p,_1:u};break}else{const f=b;if(f.hash===$&&f.key===e){f.value=n;return}if(u>f.psl){qb(t,p,f),o={_0:p,_1:u};break}s=u+1|0,c=p+1&t.capacity_mask;continue}}const _=o._0,i=o._1,l={prev:t.tail,next:void 0,psl:i,hash:$,key:e,value:n};vb(t,_,l)}function Gc(t,e,n,$){t.size>=t.grow_at&&Qb(t);let o,s=0,c=$&t.capacity_mask;for(;;){const u=s,p=c,m=t.entries;d(m,p);const b=m[p];if(b===void 0){o={_0:p,_1:u};break}else{const f=b;let k;if(f.hash===$){const w=f.key;k=w._0===e._0&&w._1===e._1}else k=!1;if(k){f.value=n;return}if(u>f.psl){Bb(t,p,f),o={_0:p,_1:u};break}s=u+1|0,c=p+1&t.capacity_mask;continue}}const _=o._0,i=o._1,l={prev:t.tail,next:void 0,psl:i,hash:$,key:e,value:n};Gb(t,_,l)}function Fb(t){const e=t.head,n=t.capacity<<1;t.entries=tt(n,void 0),t.capacity=n,t.capacity_mask=n-1|0;const $=t.capacity;t.grow_at=(Math.imul($,13)|0)/16|0,t.size=0,t.head=void 0,t.tail=-1;let o=e;for(;;){const s=o;if(s===void 0)return;{const _=s,i=_.next,r=_.key,a=_.value,l=_.hash;kc(t,r,a,l),o=i;continue}}}function Hb(t){const e=t.head,n=t.capacity<<1;t.entries=tt(n,void 0),t.capacity=n,t.capacity_mask=n-1|0;const $=t.capacity;t.grow_at=(Math.imul($,13)|0)/16|0,t.size=0,t.head=void 0,t.tail=-1;let o=e;for(;;){const s=o;if(s===void 0)return;{const _=s,i=_.next,r=_.key,a=_.value,l=_.hash;wc(t,r,a,l),o=i;continue}}}function Nb(t){const e=t.head,n=t.capacity<<1;t.entries=tt(n,void 0),t.capacity=n,t.capacity_mask=n-1|0;const $=t.capacity;t.grow_at=(Math.imul($,13)|0)/16|0,t.size=0,t.head=void 0,t.tail=-1;let o=e;for(;;){const s=o;if(s===void 0)return;{const _=s,i=_.next,r=_.key,a=_.value,l=_.hash;yc(t,r,a,l),o=i;continue}}}function Db(t){const e=t.head,n=t.capacity<<1;t.entries=tt(n,void 0),t.capacity=n,t.capacity_mask=n-1|0;const $=t.capacity;t.grow_at=(Math.imul($,13)|0)/16|0,t.size=0,t.head=void 0,t.tail=-1;let o=e;for(;;){const s=o;if(s===void 0)return;{const _=s,i=_.next,r=_.key,a=_.value,l=_.hash;Mc(t,r,a,l),o=i;continue}}}function Ub(t){const e=t.head,n=t.capacity<<1;t.entries=tt(n,void 0),t.capacity=n,t.capacity_mask=n-1|0;const $=t.capacity;t.grow_at=(Math.imul($,13)|0)/16|0,t.size=0,t.head=void 0,t.tail=-1;let o=e;for(;;){const s=o;if(s===void 0)return;{const _=s,i=_.next,r=_.key,a=_.value,l=_.hash;Sc(t,r,a,l),o=i;continue}}}function Vb(t){const e=t.head,n=t.capacity<<1;t.entries=tt(n,void 0),t.capacity=n,t.capacity_mask=n-1|0;const $=t.capacity;t.grow_at=(Math.imul($,13)|0)/16|0,t.size=0,t.head=void 0,t.tail=-1;let o=e;for(;;){const s=o;if(s===void 0)return;{const _=s,i=_.next,r=_.key,a=_.value,l=_.hash;Cc(t,r,a,l),o=i;continue}}}function Wb(t){const e=t.head,n=t.capacity<<1;t.entries=tt(n,void 0),t.capacity=n,t.capacity_mask=n-1|0;const $=t.capacity;t.grow_at=(Math.imul($,13)|0)/16|0,t.size=0,t.head=void 0,t.tail=-1;let o=e;for(;;){const s=o;if(s===void 0)return;{const _=s,i=_.next,r=_.key,a=_.value,l=_.hash;Ic(t,r,a,l),o=i;continue}}}function Xb(t){const e=t.head,n=t.capacity<<1;t.entries=tt(n,void 0),t.capacity=n,t.capacity_mask=n-1|0;const $=t.capacity;t.grow_at=(Math.imul($,13)|0)/16|0,t.size=0,t.head=void 0,t.tail=-1;let o=e;for(;;){const s=o;if(s===void 0)return;{const _=s,i=_.next,r=_.key,a=_.value,l=_.hash;Lc(t,r,a,l),o=i;continue}}}function Yb(t){const e=t.head,n=t.capacity<<1;t.entries=tt(n,void 0),t.capacity=n,t.capacity_mask=n-1|0;const $=t.capacity;t.grow_at=(Math.imul($,13)|0)/16|0,t.size=0,t.head=void 0,t.tail=-1;let o=e;for(;;){const s=o;if(s===void 0)return;{const _=s,i=_.next,r=_.key,a=_.value,l=_.hash;Pc(t,r,a,l),o=i;continue}}}function Kb(t){const e=t.head,n=t.capacity<<1;t.entries=tt(n,void 0),t.capacity=n,t.capacity_mask=n-1|0;const $=t.capacity;t.grow_at=(Math.imul($,13)|0)/16|0,t.size=0,t.head=void 0,t.tail=-1;let o=e;for(;;){const s=o;if(s===void 0)return;{const _=s,i=_.next,r=_.key,a=_.value,l=_.hash;vc(t,r,a,l),o=i;continue}}}function Qb(t){const e=t.head,n=t.capacity<<1;t.entries=tt(n,void 0),t.capacity=n,t.capacity_mask=n-1|0;const $=t.capacity;t.grow_at=(Math.imul($,13)|0)/16|0,t.size=0,t.head=void 0,t.tail=-1;let o=e;for(;;){const s=o;if(s===void 0)return;{const _=s,i=_.next,r=_.key,a=_.value,l=_.hash;Gc(t,r,a,l),o=i;continue}}}function v(t,e,n){kc(t,e,n,Wt(e))}function D$(t,e,n){wc(t,e,n,fc(e))}function Zb(t,e,n){yc(t,e,n,$e(e))}function xc(t,e,n){Mc(t,e,n,$e(e))}function jc(t,e,n){Sc(t,e,n,$e(e))}function Oc(t,e,n){Cc(t,e,n,Wt(e))}function Ac(t,e,n){Ic(t,e,n,Wt(e))}function yo(t,e,n){Lc(t,e,n,De(e))}function C$(t,e,n){Pc(t,e,n,De(e))}function Ec(t,e,n){vc(t,e,n,Wt(e))}function Rc(t,e,n){Gc(t,e,n,De(e))}function R(t){const e=t.length;let n=rt(e);e>((Math.imul(n,13)|0)/16|0)&&(n=Math.imul(n,2)|0);const o=hc(n),s=t.length;let c=0;for(;;){const _=c;if(_<s){const i=t[_];v(o,i._0,i._1),c=_+1|0;continue}else break}return o}function t4(t){const e=t.length;let n=rt(e);e>((Math.imul(n,13)|0)/16|0)&&(n=Math.imul(n,2)|0);const o=lb(n),s=t.length;let c=0;for(;;){const _=c;if(_<s){const i=t[_];xc(o,i._0,i._1),c=_+1|0;continue}else break}return o}function e4(t){const e=t.length;let n=rt(e);e>((Math.imul(n,13)|0)/16|0)&&(n=Math.imul(n,2)|0);const o=ub(n),s=t.length;let c=0;for(;;){const _=c;if(_<s){const i=t[_];jc(o,i._0,i._1),c=_+1|0;continue}else break}return o}function zc(t){const e=t.length;let n=rt(e);e>((Math.imul(n,13)|0)/16|0)&&(n=Math.imul(n,2)|0);const o=pb(n),s=t.length;let c=0;for(;;){const _=c;if(_<s){const i=t[_];D$(o,i._0,i._1),c=_+1|0;continue}else break}return o}function n4(t){const e=t.length;let n=rt(e);e>((Math.imul(n,13)|0)/16|0)&&(n=Math.imul(n,2)|0);const o=mb(n),s=t.length;let c=0;for(;;){const _=c;if(_<s){const i=t[_];Oc(o,i._0,i._1),c=_+1|0;continue}else break}return o}function o4(t){const e=t.length;let n=rt(e);e>((Math.imul(n,13)|0)/16|0)&&(n=Math.imul(n,2)|0);const o=db(n),s=t.length;let c=0;for(;;){const _=c;if(_<s){const i=t[_];Ac(o,i._0,i._1),c=_+1|0;continue}else break}return o}function Jc(t){const e=t.length;let n=rt(e);e>((Math.imul(n,13)|0)/16|0)&&(n=Math.imul(n,2)|0);const o=fb(n),s=t.length;let c=0;for(;;){const _=c;if(_<s){const i=t[_];yo(o,i._0,i._1),c=_+1|0;continue}else break}return o}function $4(t){const e=t.length;let n=rt(e);e>((Math.imul(n,13)|0)/16|0)&&(n=Math.imul(n,2)|0);const o=bb(n),s=t.length;let c=0;for(;;){const _=c;if(_<s){const i=t[_];C$(o,i._0,i._1),c=_+1|0;continue}else break}return o}function s4(t){const e=t.length;let n=rt(e);e>((Math.imul(n,13)|0)/16|0)&&(n=Math.imul(n,2)|0);const o=gb(n),s=t.length;let c=0;for(;;){const _=c;if(_<s){const i=t[_];Ec(o,i._0,i._1),c=_+1|0;continue}else break}return o}function _4(t){const e=t.length;let n=rt(e);e>((Math.imul(n,13)|0)/16|0)&&(n=Math.imul(n,2)|0);const o=hb(n),s=t.length;let c=0;for(;;){const _=c;if(_<s){const i=t[_];Rc(o,i._0,i._1),c=_+1|0;continue}else break}return o}function P(t,e){const n=Wt(e);let $=0,o=n&t.capacity_mask;for(;;){const s=$,c=o,_=t.entries;d(_,c);const i=_[c];if(i===void 0)return;{const a=i;if(a.hash===n&&a.key===e)return a.value;if(s>a.psl)return;$=s+1|0,o=c+1&t.capacity_mask;continue}}}function Tc(t,e){const n=fc(e);let $=0,o=n&t.capacity_mask;for(;;){const s=$,c=o,_=t.entries;d(_,c);const i=_[c];if(i===void 0)return;{const a=i;if(a.hash===n&&$i(a.key,e))return a.value;if(s>a.psl)return;$=s+1|0,o=c+1&t.capacity_mask;continue}}}function Tn(t,e){const n=$e(e);let $=0,o=n&t.capacity_mask;for(;;){const s=$,c=o,_=t.entries;d(_,c);const i=_[c];if(i===void 0)return;{const a=i;if(a.hash===n&&a.key===e)return a.value;if(s>a.psl)return;$=s+1|0,o=c+1&t.capacity_mask;continue}}}function c4(t,e){const n=Wt(e);let $=0,o=n&t.capacity_mask;for(;;){const s=$,c=o,_=t.entries;d(_,c);const i=_[c];if(i===void 0)return;{const a=i;if(a.hash===n&&a.key===e)return a.value;if(s>a.psl)return;$=s+1|0,o=c+1&t.capacity_mask;continue}}}function i4(t,e){const n=Wt(e);let $=0,o=n&t.capacity_mask;for(;;){const s=$,c=o,_=t.entries;d(_,c);const i=_[c];if(i===void 0)return;{const a=i;if(a.hash===n&&a.key===e)return a.value;if(s>a.psl)return;$=s+1|0,o=c+1&t.capacity_mask;continue}}}function r4(t,e){const n=$e(e);let $=0,o=n&t.capacity_mask;for(;;){const s=$,c=o,_=t.entries;d(_,c);const i=_[c];if(i===void 0)return;{const a=i;if(a.hash===n&&a.key===e)return a.value;if(s>a.psl)return;$=s+1|0,o=c+1&t.capacity_mask;continue}}}function a4(t,e){const n=$e(e);let $=0,o=n&t.capacity_mask;for(;;){const s=$,c=o,_=t.entries;d(_,c);const i=_[c];if(i===void 0)return;{const a=i;if(a.hash===n&&a.key===e)return a.value;if(s>a.psl)return;$=s+1|0,o=c+1&t.capacity_mask;continue}}}function l4(t,e){const n=De(e);let $=0,o=n&t.capacity_mask;for(;;){const s=$,c=o,_=t.entries;d(_,c);const i=_[c];if(i===void 0)return;{const a=i;let l;if(a.hash===n){const u=a.key;l=u._0===e._0&&u._1===e._1}else l=!1;if(l)return a.value;if(s>a.psl)return;$=s+1|0,o=c+1&t.capacity_mask;continue}}}function qc(t,e){const n=De(e);let $=0,o=n&t.capacity_mask;for(;;){const s=$,c=o,_=t.entries;d(_,c);const i=_[c];if(i===void 0)return-1;{const a=i;let l;if(a.hash===n){const u=a.key;l=u._0===e._0&&u._1===e._1}else l=!1;if(l)return a.value;if(s>a.psl)return-1;$=s+1|0,o=c+1&t.capacity_mask;continue}}}function Mo(t,e){const n=Wt(e);let $=0,o=n&t.capacity_mask;for(;;){const s=$,c=o,_=t.entries;d(_,c);const i=_[c];if(i===void 0)S();else{const a=i;if(a.hash===n&&a.key===e)return a.value;if(s<=a.psl){$=s+1|0,o=c+1&t.capacity_mask;continue}else S()}}}function Us(t,e){const n=Wt(e);let $=0,o=n&t.capacity_mask;for(;;){const s=$,c=o,_=t.entries;d(_,c);const i=_[c];if(i===void 0)S();else{const a=i;if(a.hash===n&&a.key===e)return a.value;if(s<=a.psl){$=s+1|0,o=c+1&t.capacity_mask;continue}else S()}}}function u4(t,e){const n=Wt(e);let $=0,o=n&t.capacity_mask;for(;;){const s=$,c=o,_=t.entries;d(_,c);const i=_[c];if(i===void 0)S();else{const a=i;if(a.hash===n&&a.key===e)return a.value;if(s<=a.psl){$=s+1|0,o=c+1&t.capacity_mask;continue}else S()}}}function p4(t,e){const n=Wt(e);let $=0,o=n&t.capacity_mask;for(;;){const s=$,c=o,_=t.entries;d(_,c);const i=_[c];if(i===void 0)S();else{const a=i;if(a.hash===n&&a.key===e)return a.value;if(s<=a.psl){$=s+1|0,o=c+1&t.capacity_mask;continue}else S()}}}function m4(t,e){const n=e.prev;if(n===-1)t.head=e.next;else{const o=t.entries;d(o,n);const s=o[n];let c;s===void 0?c=S():c=s;const _=c;_.next=e.next}const $=e.next;if($===void 0){t.tail=e.prev;return}else{const s=$;s.prev=e.prev;return}}function d4(t,e){const n=e.prev;if(n===-1)t.head=e.next;else{const o=t.entries;d(o,n);const s=o[n];let c;s===void 0?c=S():c=s;const _=c;_.next=e.next}const $=e.next;if($===void 0){t.tail=e.prev;return}else{const s=$;s.prev=e.prev;return}}function f4(t,e){const n=e.prev;if(n===-1)t.head=e.next;else{const o=t.entries;d(o,n);const s=o[n];let c;s===void 0?c=S():c=s;const _=c;_.next=e.next}const $=e.next;if($===void 0){t.tail=e.prev;return}else{const s=$;s.prev=e.prev;return}}function b4(t,e){let n=e;for(;;){const $=n,o=$+1&t.capacity_mask;t:{const c=t.entries;d(c,o);const _=c[o];if(_===void 0)break t;{const r=_;if(r.psl===0)break t;r.psl=r.psl-1|0,y$(t,r,$),n=o;continue}}const s=t.entries;d(s,$),s[$]=void 0;return}}function g4(t,e){let n=e;for(;;){const $=n,o=$+1&t.capacity_mask;t:{const c=t.entries;d(c,o);const _=c[o];if(_===void 0)break t;{const r=_;if(r.psl===0)break t;r.psl=r.psl-1|0,M$(t,r,$),n=o;continue}}const s=t.entries;d(s,$),s[$]=void 0;return}}function h4(t,e){let n=e;for(;;){const $=n,o=$+1&t.capacity_mask;t:{const c=t.entries;d(c,o);const _=c[o];if(_===void 0)break t;{const r=_;if(r.psl===0)break t;r.psl=r.psl-1|0,S$(t,r,$),n=o;continue}}const s=t.entries;d(s,$),s[$]=void 0;return}}function k4(t,e,n){let $=0,o=n&t.capacity_mask;for(;;){const s=$,c=o,_=t.entries;d(_,c);const i=_[c];if(i===void 0)break;{const a=i;if(a.hash===n&&a.key===e){m4(t,a),b4(t,c),t.size=t.size-1|0;break}if(s>a.psl)break;$=s+1|0,o=c+1&t.capacity_mask;continue}}}function w4(t,e,n){let $=0,o=n&t.capacity_mask;for(;;){const s=$,c=o,_=t.entries;d(_,c);const i=_[c];if(i===void 0)break;{const a=i;if(a.hash===n&&a.key===e){d4(t,a),g4(t,c),t.size=t.size-1|0;break}if(s>a.psl)break;$=s+1|0,o=c+1&t.capacity_mask;continue}}}function y4(t,e,n){let $=0,o=n&t.capacity_mask;for(;;){const s=$,c=o,_=t.entries;d(_,c);const i=_[c];if(i===void 0)break;{const a=i;if(a.hash===n&&a.key===e){f4(t,a),h4(t,c),t.size=t.size-1|0;break}if(s>a.psl)break;$=s+1|0,o=c+1&t.capacity_mask;continue}}}function No(t,e){k4(t,e,$e(e))}function Do(t,e){w4(t,e,$e(e))}function Bc(t,e){y4(t,e,$e(e))}function M4(t,e,n,$){const o=t.length;if(o>0)if(n<o){let s;s=o-n|0,t.fill(e,n,n+s);return}else{S();return}else return}function Fc(t){const e={val:t.head};return()=>{const $=e.val;if($!==void 0){const s=$,c=s.key,_=s.value,i=s.next;return e.val=i,{_0:c,_1:_}}}}function S4(t){const e={val:t.head};return()=>{const $=e.val;if($!==void 0){const s=$,c=s.key,_=s.value,i=s.next;return e.val=i,{_0:c,_1:_}}}}function Hc(t){return n=>{let $=t.head;for(;;){const o=$;if(o===void 0)return 1;{const c=o,_=c.value,i=c.next;if(n(_)===1){$=i;continue}else return 0}}}}function U$(t){return n=>{let $=t.head;for(;;){const o=$;if(o===void 0)return 1;{const c=o,_=c.value,i=c.next;if(n(_)===1){$=i;continue}else return 0}}}}function V$(t){return n=>{let $=t.head;for(;;){const o=$;if(o===void 0)return 1;{const c=o,_=c.value,i=c.next;if(n(_)===1){$=i;continue}else return 0}}}}function C4(t){const e=n4([]);return t(n=>(Oc(e,n._0,n._1),1)),e}function I4(t){const e=o4([]);return t(n=>(Ac(e,n._0,n._1),1)),e}function L4(t){const e=s4([]);return t(n=>(Ec(e,n._0,n._1),1)),e}function Nc(t){return t()}function Mt(t){return t()}function P4(t){return t()}function v4(t){return t()}function Gt(t){return t?$_:s_}function J(t){const e=t+0,n=void 0;return new An(e,n)}function G4(t){return{hi:0,lo:t}}function W$(t){return G4(t)}function I$(t){return W$(t)}function So(t){return pr(t)}function vn(t){return mr(t)}function xt(t){const e=t,n=void 0;return new An(e,n)}function x4(t){const e=new Array(t.length),n=t.length;let $=0;for(;;){const o=$;if(o<n){const s=t[o];e[o]=Yo(s),$=o+1|0;continue}else break}return new jt(e)}function j4(t){const e=new Array(t.length),n=t.length;let $=0;for(;;){const o=$;if(o<n){const s=t[o];e[o]=P$(s),$=o+1|0;continue}else break}return new jt(e)}function O4(t){const e=new Array(t.length),n=t.length;let $=0;for(;;){const o=$;if(o<n){const s=t[o];e[o]=s,$=o+1|0;continue}else break}return new jt(e)}function A4(t){const e=new Array(t.length),n=t.length;let $=0;for(;;){const o=$;if(o<n){const s=t[o];e[o]=mi(s),$=o+1|0;continue}else break}return new jt(e)}function E4(t){const e=new Array(t.length),n=t.length;let $=0;for(;;){const o=$;if(o<n){const s=t[o];e[o]=q1(s),$=o+1|0;continue}else break}return new jt(e)}function R4(t){const e=new Array(t.length),n=t.length;let $=0;for(;;){const o=$;if(o<n){const s=t[o];e[o]=B1(s),$=o+1|0;continue}else break}return new jt(e)}function z4(t){if(t.length===0){const s=[];return new jt(s)}const n=new Array(t.length),$=t.length;let o=0;for(;;){const s=o;if(s<$){const c=t[s];n[s]=di(c),o=s+1|0;continue}else break}return new jt(n)}function Vs(t,e){It(t,e)}function J4(t,e){It(t,e)}function T4(t,e){It(t,e)}function Pt(t,e){It(t,e)}function q4(t,e){It(t,e)}function B4(t,e){It(t,e)}function Pe(t,e){It(t,e)}function F4(t,e){It(t,e)}function H4(t,e){It(t,e)}function N4(t,e){It(t,e)}function D4(t,e){It(t,e)}function U4(t,e){It(t,e)}function _$(t,e){It(t,e)}function V4(t,e){It(t,e)}function W4(t,e){It(t,e)}function X4(){return t=>1}function Ws(t){return e=>e(t)}function Y4(t,e){return n=>t(n)===1&&e(n)===1?1:0}function K4(t){const e=[];return t(n=>(J4(e,n),1)),e}function Q4(t){const e=[];return t(n=>(W4(e,n),1)),e}function Xs(t){return bc(t)&255}function Co(t){return zt(t)}function Z4(t){return t.lo===0?{hi:~t.hi+1|0,lo:0}:{hi:~t.hi,lo:~t.lo+1|0}}function Dc(t,e,n){const $=t.hi,o=t.lo,s=o+n|0,c=s>>31,_=o>>31,i=n>>31,r=(_&i|~c&(_^i))&1;return{hi:($+e|0)+r|0,lo:s}}function Uc(t,e){return Dc(t,e.hi,e.lo)}function Vc(t,e){return e.lo===0?{hi:t.hi-e.hi|0,lo:t.lo}:Dc(t,~e.hi,~e.lo+1|0)}function Wc(t,e){const n=t.hi,$=t.lo,o=e.hi,s=e.lo,c=n,_=$,i=o,r=s,a=c>>>16|0,l=c&65535,u=_>>>16|0,p=_&65535,m=i>>>16|0,b=i&65535,g=r>>>16|0,f=r&65535,k=Math.imul(p,f)|0,w=k>>>16|0,I=k&65535,y=(w>>>0)+((Math.imul(u,f)|0)>>>0)|0,L=y>>>16|0,G=((y&65535)>>>0)+((Math.imul(p,g)|0)>>>0)|0,C=(L>>>0)+((G>>>16|0)>>>0)|0,O=G&65535,x=(C>>>0)+((Math.imul(l,f)|0)>>>0)|0,A=x>>>16|0,H=((x&65535)>>>0)+((Math.imul(u,g)|0)>>>0)|0,B=(A>>>0)+((H>>>16|0)>>>0)|0,K=((H&65535)>>>0)+((Math.imul(p,b)|0)>>>0)|0,Z=(B>>>0)+((K>>>16|0)>>>0)|0,F=K&65535;return{hi:(((((((((Z>>>0)+((Math.imul(a,f)|0)>>>0)|0)>>>0)+((Math.imul(l,g)|0)>>>0)|0)>>>0)+((Math.imul(u,b)|0)>>>0)|0)>>>0)+((Math.imul(p,m)|0)>>>0)|0)&65535)<<16|F,lo:O<<16|I}}function tg(t,e){if(e.hi===0&&e.lo===0)return S();{const n=R$(),$=t.hi,o=t.lo,s=e.hi,c=e.lo,_=n.div_s,i=_(o,$,c,s),r=n.get_high;return{hi:r(),lo:i}}}function eg(t,e){if(e.hi===0&&e.lo===0)return S();{const n=R$(),$=t.hi,o=t.lo,s=e.hi,c=e.lo,_=n.div_u,i=_(o,$,c,s),r=n.get_high;return{hi:r(),lo:i}}}function ng(t,e){if(e.hi===0&&e.lo===0)return S();{const n=R$(),$=t.hi,o=t.lo,s=e.hi,c=e.lo,_=n.rem_u,i=_(o,$,c,s),r=n.get_high;return{hi:r(),lo:i}}}function og(t){return{hi:~t.hi,lo:~t.lo}}function Xc(t,e){return{hi:t.hi&e.hi,lo:t.lo&e.lo}}function Yc(t,e){return{hi:t.hi|e.hi,lo:t.lo|e.lo}}function Kc(t,e){const n=e&63;if(n===0)return t;if(n<32){const $=t.hi,o=t.lo,s=$,c=o,_=s<<n|(c>>>(32-n|0)|0),i=c<<n;return{hi:_,lo:i}}else return{hi:t.lo<<(n-32|0),lo:0}}function $g(t,e){const n=e&63;return n===0?t:n<32?{hi:t.hi>>>n|0,lo:t.lo>>>n|t.hi<<(32-n|0)}:{hi:0,lo:t.hi>>>(n-32|0)|0}}function sg(t,e){const n=e&63;return n===0?t:n<32?{hi:t.hi>>n,lo:t.lo>>>n|t.hi<<(32-n|0)}:{hi:t.hi>>31,lo:t.hi>>(n-32|0)}}function Qc(t){return Z4(t)}function te(t,e){return Uc(t,e)}function Gn(t,e){return Vc(t,e)}function Fe(t,e){return Wc(t,e)}function de(t,e){return tg(t,e)}function Zc(t,e){return Xc(t,e)}function Ys(t,e){return Yc(t,e)}function _g(t,e){return sg(t,e)}function Ee(t,e){return Kc(t,e)}function Ks(t,e){const n=t,$=e;return n.hi===$.hi&&n.lo===$.lo}function Uo(t,e){return dr(t,e)}function cg(t){return br(t)}function ig(t){return cg(t)}function ge(t,e){return Uc(t,e)}function L$(t,e){return Vc(t,e)}function Bt(t,e){return Wc(t,e)}function rg(t,e){return eg(t,e)}function ag(t,e){return ng(t,e)}function Qs(t){return t.lo}function Vo(t,e){return fr(t,e)}function he(t,e){const n=t,$=e;return n.hi===$.hi&&n.lo===$.lo}function Re(t,e){return Xc(t,e)}function lg(t,e){return Yc(t,e)}function ug(t){return og(t)}function xn(t,e){return Kc(t,e)}function Dt(t,e){return $g(t,e)}function Zs(t){const e=t;return e.hi!==0?Math.clz32(e.hi):32+Math.clz32(e.lo)|0}function pg(t,e){const n=(t.acc>>>0)+((Math.imul(e,-1028477379)|0)>>>0)|0,$=17;t.acc=Math.imul(n<<$|(n>>>(32-$|0)|0),668265263)|0}function ti(t,e){t.acc=(t.acc>>>0)+4|0,pg(t,e)}function Ke(t,e){ti(t,e)}function mg(t,e){const n=e.length;let $=0;for(;;){const o=$;if(o<n){ti(t,e.charCodeAt(o)),$=o+1|0;continue}else return}}function dg(t,e){mg(e,t)}function fg(t,e){Ke(e,t)}function Io(t,e,n,$,o){if(o>=0&&$>=0&&(o+n|0)<=e.length&&($+n|0)<=t.length){G1(e,o,t,$,n);return}else{ue(`bounds check failed: dst_offset = ${vt(o)}, src_offset = ${vt($)}, len = ${vt(n)}, dst.length = ${vt(e.length)}, self.length = ${vt(t.length)}`);return}}function bg(t,e,n,$,o){if((o+n|0)<=e.length&&($+n|0)<=t.length){x1(e,o,t,$,n);return}else{ue(`bounds check failed: dst_offset = ${vt(o)}, src_offset = ${vt($)}, len = ${vt(n)}, dst.length = ${vt(e.length)}, self.length = ${vt(t.length)}`);return}}function Qe(t){return t!==t?0:t>=2147483647?2147483647:t<=-2147483648?-2147483648:t|0}function ei(t){console.log(t)}function gg(t){return gr(t)}function t_(t){if(t.length!==0)return gg(t)}function hg(t,e){if(e>=0&&e<t.length){d(t,e);const n=t[e];return hr(t,e,1),n}else return U2(`index out of bounds: the len is from 0 to ${vt(t.length)} but the index is ${vt(e)}`)}function kg(t,e){const n=t.length;return e<n?t[e]:void 0}function ni(){return{now:0}}function Ue(t){return t.now=t.now+1|0,t.now}function oi(t){const e=R([]);return v(e,"cost",R4(t.cost)),new E(e)}function wg(t,e){switch(t){case 0:{e.method_0(e.self,"HeartCrystalDust");return}case 1:{e.method_0(e.self,"RecallGear");return}case 2:{e.method_0(e.self,"SpiritalSpark");return}case 3:{e.method_0(e.self,"RefinedCopper");return}default:{e.method_0(e.self,"ResonantCrystal");return}}}function $i(t,e){switch(t){case 0:return e===0;case 1:return e===1;case 2:return e===2;case 3:return e===3;default:return e===4}}function yg(t,e){switch(t){case 0:{Ke(e,0);return}case 1:{Ke(e,1);return}case 2:{Ke(e,2);return}case 3:{Ke(e,3);return}default:{Ke(e,4);return}}}function Wo(t){switch(t){case 0:{const e="HeartCrystalDust";return new z(e)}case 1:{const e="RecallGear";return new z(e)}case 2:{const e="SpiritalSpark";return new z(e)}case 3:{const e="RefinedCopper";return new z(e)}default:{const e="ResonantCrystal";return new z(e)}}}function lt(t){return{cost:t}}function Xo(t){const e=R([]);return v(e,"health",xt(t.health)),v(e,"speed",J(t.speed)),v(e,"attack",xt(t.attack)),v(e,"defense",xt(t.defense)),v(e,"dodge",xt(t.dodge)),new E(e)}function si(t,e){let n,$=to,o=to,s=to,c=to;if(t.$tag===6){const k=t._0,w=P(k,"health");if(w!==void 0){const C=w,O="health",x=co(C,new X(e,O));let A;if(x.$tag===1)A=x._0;else return x;$=new mn(A)}const I=P(k,"speed");if(I!==void 0){const C=I,O="speed",x=be(C,new X(e,O));let A;if(x.$tag===1)A=x._0;else return x;n=A}const y=P(k,"attack");if(y!==void 0){const C=y,O="attack",x=co(C,new X(e,O));let A;if(x.$tag===1)A=x._0;else return x;c=new mn(A)}const L=P(k,"defense");if(L!==void 0){const C=L,O="defense",x=co(C,new X(e,O));let A;if(x.$tag===1)A=x._0;else return x;s=new mn(A)}const M=P(k,"dodge");if(M!==void 0){const C=M,O="dodge",x=co(C,new X(e,O));let A;if(x.$tag===1)A=x._0;else return x;o=new mn(A)}}else return new xe(new T({_0:e,_1:"Expected object to deserialize Attribute"}));const _=n;let i;if(_===void 0)return new xe(new T({_0:e,_1:"Missing field speed"}));i=_;const r=$;let a;if(r.$tag===1)a=r._0;else return new xe(new T({_0:e,_1:"Missing field health"}));const l=o;let u;if(l.$tag===1)u=l._0;else return new xe(new T({_0:e,_1:"Missing field dodge"}));const p=s;let m;if(p.$tag===1)m=p._0;else return new xe(new T({_0:e,_1:"Missing field defense"}));const b=c;let g;if(b.$tag===1)g=b._0;else return new xe(new T({_0:e,_1:"Missing field attack"}));return new j_({health:a,speed:i,attack:g,defense:m,dodge:u})}function bt(t,e,n,$,o){return{health:t,speed:e,attack:n,defense:$,dodge:o}}function P$(t){const e=R([]);return v(e,"equipment_base",Mg(t.equipment_base)),v(e,"id",J(t.id)),new E(e)}function v$(t,e){let n,$;if(t.$tag===6){const r=t._0,a=P(r,"equipment_base");if(a!==void 0){const p=a,m="equipment_base",b=Sg(p,new X(e,m));let g;if(b.$tag===1)g=b._0;else return b;$=g}const l=P(r,"id");if(l!==void 0){const p=l,m="id",b=be(p,new X(e,m));let g;if(b.$tag===1)g=b._0;else return b;n=g}}else return new lo(new T({_0:e,_1:"Expected object to deserialize Equipment"}));const o=n;let s;if(o===void 0)return new lo(new T({_0:e,_1:"Missing field id"}));s=o;const c=$;let _;return c===void 0?new lo(new T({_0:e,_1:"Missing field equipment_base"})):(_=c,new O_({equipment_base:_,id:s}))}function Mg(t){const e=R([]),n=t.name;v(e,"name",new z(n));const $=t.description;v(e,"description",new z($));const o=t.resource_url;return v(e,"resource_url",new z(o)),v(e,"attribute",Xo(t.attribute)),new E(e)}function Sg(t,e){let n,$,o,s;if(t.$tag===6){const b=t._0,g=P(b,"name");if(g!==void 0){const y=g,L="name",M=Zt(y,new X(e,L));let G;if(M.$tag===1)G=M._0;else return M;$=G}const f=P(b,"description");if(f!==void 0){const y=f,L="description",M=Zt(y,new X(e,L));let G;if(M.$tag===1)G=M._0;else return M;o=G}const k=P(b,"resource_url");if(k!==void 0){const y=k,L="resource_url",M=Zt(y,new X(e,L));let G;if(M.$tag===1)G=M._0;else return M;n=G}const w=P(b,"attribute");if(w!==void 0){const y=w,L="attribute",M=si(y,new X(e,L));let G;if(M.$tag===1)G=M._0;else return M;s=G}}else return new Xe(new T({_0:e,_1:"Expected object to deserialize EquipmentBase"}));const c=n;let _;if(c===void 0)return new Xe(new T({_0:e,_1:"Missing field resource_url"}));_=c;const i=$;let r;if(i===void 0)return new Xe(new T({_0:e,_1:"Missing field name"}));r=i;const a=o;let l;if(a===void 0)return new Xe(new T({_0:e,_1:"Missing field description"}));l=a;const u=s;let p;return u===void 0?new Xe(new T({_0:e,_1:"Missing field attribute"})):(p=u,new A_({name:r,description:l,resource_url:_,attribute:p}))}function Cg(t){const e=R([]);v(e,"id",J(t.id));const n=t.type_msg;v(e,"type_msg",new z(n));const $=t.content;return v(e,"content",new z($)),new E(e)}function Ig(){return{history:[],callback:t=>{}}}function Lg(t,e){t.callback=e}function Y(t,e){const n={id:Ue(q2),type_msg:e.type_msg,content:e.content};T4(t.history,n);const $=t.callback;$(D(Cg(n)))}function Yo(t){const e=R([]);return v(e,"id",J(t.id)),v(e,"level",J(t.level)),v(e,"suffix",J(t.suffix)),v(e,"live_left",J(t.live_left)),v(e,"attribute",Xo(t.attribute)),v(e,"copper_type",_i(t.copper_type)),v(e,"equipment_slot",vg(t.equipment_slot)),v(e,"copper_info",xg(t.copper_info)),new E(e)}function Pg(t,e){let n,$,o,s,c,_,i,r;if(t.$tag===6){const x=t._0,A=P(x,"id");if(A!==void 0){const V=A,at="id",W=be(V,new X(e,at));let et;if(W.$tag===1)et=W._0;else return W;s=et}const q=P(x,"level");if(q!==void 0){const V=q,at="level",W=be(V,new X(e,at));let et;if(W.$tag===1)et=W._0;else return W;o=et}const H=P(x,"suffix");if(H!==void 0){const V=H,at="suffix",W=be(V,new X(e,at));let et;if(W.$tag===1)et=W._0;else return W;n=et}const B=P(x,"live_left");if(B!==void 0){const V=B,at="live_left",W=be(V,new X(e,at));let et;if(W.$tag===1)et=W._0;else return W;$=et}const ct=P(x,"attribute");if(ct!==void 0){const V=ct,at="attribute",W=si(V,new X(e,at));let et;if(W.$tag===1)et=W._0;else return W;r=et}const K=P(x,"copper_type");if(K!==void 0){const V=K,at="copper_type",W=ci(V,new X(e,at));let et;if(W.$tag===1)et=W._0;else return W;_=et}const Z=P(x,"equipment_slot");if(Z!==void 0){const V=Z,at="equipment_slot",W=Gg(V,new X(e,at));let et;if(W.$tag===1)et=W._0;else return W;c=et}const F=P(x,"copper_info");if(F!==void 0){const V=F,at="copper_info",W=jg(V,new X(e,at));let et;if(W.$tag===1)et=W._0;else return W;i=et}}else return new Yt(new T({_0:e,_1:"Expected object to deserialize Copper"}));const a=n;let l;if(a===void 0)return new Yt(new T({_0:e,_1:"Missing field suffix"}));l=a;const u=$;let p;if(u===void 0)return new Yt(new T({_0:e,_1:"Missing field live_left"}));p=u;const m=o;let b;if(m===void 0)return new Yt(new T({_0:e,_1:"Missing field level"}));b=m;const g=s;let f;if(g===void 0)return new Yt(new T({_0:e,_1:"Missing field id"}));f=g;const k=c;let w;if(k===void 0)return new Yt(new T({_0:e,_1:"Missing field equipment_slot"}));w=k;const I=_;let y;if(I===void 0)return new Yt(new T({_0:e,_1:"Missing field copper_type"}));y=I;const L=i;let M;if(L===void 0)return new Yt(new T({_0:e,_1:"Missing field copper_info"}));M=L;const G=r;let C;return G===void 0?new Yt(new T({_0:e,_1:"Missing field attribute"})):(C=G,new E_({id:f,level:b,suffix:l,live_left:p,attribute:C,copper_type:y,equipment_slot:w,copper_info:M}))}function _i(t){switch(t){case 0:{const e="IronWall";return new z(e)}case 1:{const e="Arcanist";return new z(e)}case 2:{const e="CraftsMan";return new z(e)}case 3:{const e="Mechanic";return new z(e)}default:{const e="Resonator";return new z(e)}}}function ci(t,e){let n;switch(t.$tag){case 4:{n=t._0;break}case 5:{const o=t._0,s=kg(o,0);if(s===void 0)return new dn(new T({_0:e,_1:"Missing tag in array[0] when derserializing CopperType"}));{const _=s;if(_.$tag===4)n=_._0;else return new dn(new T({_0:e,_1:"Expected string tag at array[0] when derserializing CopperType"}))}break}default:return new dn(new T({_0:e,_1:"Expected string or array for tag in enum when derserializing CopperType"}))}switch(n){case"IronWall":return new Ye(0);case"Arcanist":return new Ye(1);case"CraftsMan":return new Ye(2);case"Mechanic":return new Ye(3);case"Resonator":return new Ye(4);default:return new dn(new T({_0:e,_1:`Unknown enum constructor ${n} when deserializing CopperType`}))}}function vg(t){const e=R([]),n=t.slot1;n===void 0||v(e,"slot1",P$(n));const $=t.slot2;return $===void 0||v(e,"slot2",P$($)),v(e,"is_slot2_locked",Gt(t.is_slot2_locked)),new E(e)}function Gg(t,e){let n=bs,$=bs,o=-1;if(t.$tag===6){const u=t._0,p=P(u,"slot1");if(p!==void 0){const f=p,k="slot1",w=v$(f,new X(e,k));let I;if(w.$tag===1)I=w._0;else return w;$=new p$(I)}const m=P(u,"slot2");if(m!==void 0){const f=m,k="slot2",w=v$(f,new X(e,k));let I;if(w.$tag===1)I=w._0;else return w;n=new p$(I)}const b=P(u,"is_slot2_locked");if(b!==void 0){const f=b,k="is_slot2_locked",w=e1(f,new X(e,k));let I;if(w.$tag===1)I=w._0;else return w;o=I}}else return new m$(new T({_0:e,_1:"Expected object to deserialize EquipmentSlot"}));const s=n;let c;s.$tag===1?c=s._0:c=void 0;const _=$;let i;_.$tag===1?i=_._0:i=void 0;const r=o;let a;return r===-1?new m$(new T({_0:e,_1:"Missing field is_slot2_locked"})):(a=r,new R_({slot1:i,slot2:c,is_slot2_locked:a}))}function xg(t){const e=R([]),n=t.name;v(e,"name",new z(n)),v(e,"copper_type",_i(t.copper_type));const $=t.description;v(e,"description",new z($));const o=t.icon_url;v(e,"icon_url",new z(o));const s=t.model_url;v(e,"model_url",new z(s));const c=t.skill;c===void 0||v(e,"skill",Og(c));const _=t.attack_range;return _===void 0||v(e,"attack_range",J(_)),new E(e)}function jg(t,e){let n=kr,$,o,s,c,_,i=J_;if(t.$tag===6){const G=t._0,C=P(G,"name");if(C!==void 0){const K=C,Z="name",F=Zt(K,new X(e,Z));let N;if(F.$tag===1)N=F._0;else return F;$=N}const O=P(G,"copper_type");if(O!==void 0){const K=O,Z="copper_type",F=ci(K,new X(e,Z));let N;if(F.$tag===1)N=F._0;else return F;_=N}const x=P(G,"description");if(x!==void 0){const K=x,Z="description",F=Zt(K,new X(e,Z));let N;if(F.$tag===1)N=F._0;else return F;c=N}const A=P(G,"icon_url");if(A!==void 0){const K=A,Z="icon_url",F=Zt(K,new X(e,Z));let N;if(F.$tag===1)N=F._0;else return F;s=N}const q=P(G,"model_url");if(q!==void 0){const K=q,Z="model_url",F=Zt(K,new X(e,Z));let N;if(F.$tag===1)N=F._0;else return F;o=N}const H=P(G,"skill");if(H!==void 0){const K=H,Z="skill",F=Ag(K,new X(e,Z));let N;if(F.$tag===1)N=F._0;else return F;n=new z_(N)}const B=P(G,"attack_range");if(B!==void 0){const K=B,Z="attack_range",F=be(K,new X(e,Z));let N;if(F.$tag===1)N=F._0;else return F;i=new z$(N)}}else return new je(new T({_0:e,_1:"Expected object to deserialize CopperInfo"}));const r=n;let a;r.$tag===1?a=r._0:a=void 0;const l=$;let u;if(l===void 0)return new je(new T({_0:e,_1:"Missing field name"}));u=l;const p=o;let m;if(p===void 0)return new je(new T({_0:e,_1:"Missing field model_url"}));m=p;const b=s;let g;if(b===void 0)return new je(new T({_0:e,_1:"Missing field icon_url"}));g=b;const f=c;let k;if(f===void 0)return new je(new T({_0:e,_1:"Missing field description"}));k=f;const w=_;let I;if(w===void 0)return new je(new T({_0:e,_1:"Missing field copper_type"}));I=w;const y=i;let L;return y.$tag===1?L=y._0:L=void 0,new T_({name:u,copper_type:I,description:k,icon_url:g,model_url:m,skill:a,attack_range:L})}function Og(t){const e=R([]),n=t.name;v(e,"name",new z(n));const $=t.description;v(e,"description",new z($));const o=t.resource_url;v(e,"resource_url",new z(o));const s=t.cool_down;return s===void 0||v(e,"cool_down",J(s)),new E(e)}function Ag(t,e){let n,$,o,s=J_;if(t.$tag===6){const b=t._0,g=P(b,"name");if(g!==void 0){const y=g,L="name",M=Zt(y,new X(e,L));let G;if(M.$tag===1)G=M._0;else return M;$=G}const f=P(b,"description");if(f!==void 0){const y=f,L="description",M=Zt(y,new X(e,L));let G;if(M.$tag===1)G=M._0;else return M;o=G}const k=P(b,"resource_url");if(k!==void 0){const y=k,L="resource_url",M=Zt(y,new X(e,L));let G;if(M.$tag===1)G=M._0;else return M;n=G}const w=P(b,"cool_down");if(w!==void 0){const y=w,L="cool_down",M=be(y,new X(e,L));let G;if(M.$tag===1)G=M._0;else return M;s=new z$(G)}}else return new fn(new T({_0:e,_1:"Expected object to deserialize Skill"}));const c=n;let _;if(c===void 0)return new fn(new T({_0:e,_1:"Missing field resource_url"}));_=c;const i=$;let r;if(i===void 0)return new fn(new T({_0:e,_1:"Missing field name"}));r=i;const a=o;let l;if(a===void 0)return new fn(new T({_0:e,_1:"Missing field description"}));l=a;const u=s;let p;return u.$tag===1?p=u._0:p=void 0,new q_({name:r,description:l,resource_url:_,cool_down:p})}function mt(t,e,n){return n1(Math.fround(t*Math.fround(Of(n,(e-1|0)+0))))}function X$(t){switch(t){case 0:return bt(Math.fround(150),2,Math.fround(15),Math.fround(20),Math.fround(10));case 1:return bt(Math.fround(50),3,Math.fround(20),Math.fround(5),Math.fround(10));case 4:return bt(Math.fround(100),3,Math.fround(10),Math.fround(10),Math.fround(10));case 3:return bt(Math.fround(80),3,Math.fround(5),Math.fround(8),Math.fround(10));default:return bt(Math.fround(80),4,Math.fround(0),Math.fround(8),Math.fround(10))}}function e_(t){const e=t.level+1|0,n=X$(t.copper_type),$=t.attribute.speed;switch(t.copper_type){case 0:return bt(mt(n.health,e,Math.fround(1.35)),$,mt(n.attack,e,Math.fround(1.28)),mt(n.defense,e,Math.fround(1.37)),mt(n.dodge,e,Math.fround(1.19)));case 1:return bt(mt(n.health,e,Math.fround(1.22)),$,mt(n.attack,e,Math.fround(1.4)),mt(n.defense,e,Math.fround(1.27)),mt(n.dodge,e,Math.fround(1.19)));case 4:return bt(mt(n.health,e,Math.fround(1.38)),$,mt(n.attack,e,Math.fround(1.16)),mt(n.defense,e,Math.fround(1.27)),mt(n.dodge,e,Math.fround(1.19)));case 3:return bt(mt(n.health,e,Math.fround(1.3)),$,mt(n.attack,e,Math.fround(1.2)),mt(n.defense,e,Math.fround(1.27)),mt(n.dodge,e,Math.fround(1.19)));default:return bt(mt(n.health,e,Math.fround(1.3)),$,mt(n.attack,e,Math.fround(1.27)),mt(n.defense,e,Math.fround(1.16)),mt(n.dodge,e,Math.fround(1.19)))}}function Eg(t){return{slot1:t.slot1,slot2:t.slot2,is_slot2_locked:!1}}function Rg(t){return t.level===4?{...t,attribute:e_(t),level:t.level+1|0,equipment_slot:Eg(t.equipment_slot)}:{...t,attribute:e_(t),level:t.level+1|0}}function zg(t){let e;switch(t){case 1:{e=5;break}case 2:{e=10;break}case 3:{e=20;break}case 4:{e=30;break}default:Y(U,pp),e=0}return lt([{_0:2,_1:e}])}function ii(){return{slot1:void 0,slot2:void 0,is_slot2_locked:!0}}function c$(t){const e=p4(T2,t),n=Ue($n);return{id:n,level:1,suffix:n,live_left:5,attribute:X$(e.copper_type),copper_type:e.copper_type,equipment_slot:ii(),copper_info:e}}function ke(t,e){return t+M1(N_,(e-t|0)+1|0)|0}function jn(t){const e=S1(N_);return ei(`12121:${String(e)}`),e<=t}function Jg(){return zc([mp,dp,fp,bp,gp])}function Tg(){return zc([hp,kp,wp,yp,Mp])}function Et(t,e){const n=Tc(t,e);return n===void 0?S():n}function ri(t,e,n){const $=Tc(t,e);let o;if($===void 0?o=S():o=$,o<n){Y(U,Sp);return}else{D$(t,e,o-n|0);return}}function Y$(t,e){const n=e.cost,$=n.length;let o=0;for(;;){const s=o;if(s<$){const c=n[s],_=c._0,i=c._1;if(Et(t,_)<i)return!1;o=s+1|0;continue}else break}return!0}function K$(t,e){const n=e.cost,$=n.length;let o=0;for(;;){const s=o;if(s<$){const c=n[s],_=c._0,i=c._1;ri(t,_,i),o=s+1|0;continue}else return}}function Oe(t,e,n){D$(t,e,Et(t,e)+n|0)}function qg(){return{resources:Jg(),equipments:[]}}function Bg(t,e){return{resources:t,equipments:e}}function Q$(t,e){const n=e.length;let $=0;for(;;){const o=$;if(o<n){const s=e[o],c=s.item_type;if(c.$tag===0){const i=c._0;Oe(t.resources,i,s.count)}else{const i=c._0;q4(t.equipments,i)}$=o+1|0;continue}else return}}function Fg(t,e){return{item_type:t,count:e}}function Hg(){const t=c$("阿磐"),e=c$("咝咝"),n=c$("波波");return{coppers:po(po(po(void 0,t.id,t),e.id,e),n.id,n)}}function Ng(){return{coppers:void 0}}function Z$(t,e){return{coppers:po(t.coppers,e.id,e)}}function fo(t,e){const n=vf(t.coppers,e);return n===void 0?S():n}function ai(t){return K4(jf(t.coppers))}function Dg(t,e){return{coppers:Gf(t.coppers,e)}}function Ug(){const t=Ue($n),e=ke(0,bn.length-1|0);d(bn,e);const n=bn[e],$=X$(n.copper_type);return{id:t,level:1,suffix:t,live_left:5,attribute:$,copper_type:n.copper_type,equipment_slot:ii(),copper_info:n}}function Vg(t){if(Et(t,2)>=10)return ri(t,2,10),Ug();Y(U,Cp)}function Wg(){const t=qg();return{warehouse:Hg(),bag:t}}function Xg(t,e){return{warehouse:t,bag:e}}function Yg(t){const e=t.bag.resources,n=R([{_0:"SpiritalSpark",_1:J(Et(e,2))},{_0:"RecallGear",_1:J(Et(e,1))},{_0:"ResonantCrystal",_1:J(Et(e,4))},{_0:"RefinedCopper",_1:J(Et(e,3))},{_0:"HeartCrystalDust",_1:J(Et(e,0))}]);return D(new E(n))}function Kg(t){const e=t.warehouse,n=R([{_0:"coppers",_1:x4(ai(e))}]);return D(new E(n))}function Qg(t){const e=Vg(t.bag.resources);let n;if(e===void 0){const $="error",o={_0:"type",_1:new z($)},s="资源不足",c=R([o,{_0:"content",_1:new z(s)}]);n=new E(c)}else{const o=e;t.warehouse=Z$(t.warehouse,o);const s="success",c=R([{_0:"type",_1:new z(s)},{_0:"copper",_1:Yo(o)}]);n=new E(c)}return D(n)}function Zg(t,e){const n=t.warehouse,$=fo(n,e),o=zg($.level);let s;if(Y$(t.bag.resources,o)){const c=Rg($);K$(t.bag.resources,o),t.warehouse=Dg(t.warehouse,e),t.warehouse=Z$(t.warehouse,c);const _="success",i=R([{_0:"type",_1:new z(_)}]);s=new E(i)}else{const c="error",_={_0:"type",_1:new z(c)},i="资源不足",r=R([_,{_0:"content",_1:new z(i)}]);s=new E(r)}return D(s)}function li(t){const e=R([]);return v(e,"id",J(t.id)),v(e,"original_id",J(t.original_id)),v(e,"copper",Yo(t.copper)),v(e,"can_move",Gt(t.can_move)),v(e,"can_attack",Gt(t.can_attack)),v(e,"can_summon",Gt(t.can_summon)),v(e,"can_build",Gt(t.can_build)),v(e,"position",Lt(t.position)),v(e,"now_health",xt(t.now_health)),v(e,"attribute",Xo(t.attribute)),new E(e)}function ui(t){const e=R([]);return v(e,"id",J(t.id)),v(e,"owned",Gt(t.owned)),v(e,"can_move",Gt(t.can_move)),v(e,"can_attack",Gt(t.can_attack)),v(e,"position",Lt(t.position)),v(e,"now_health",xt(t.now_health)),v(e,"enemy_base",mi(t.enemy_base)),new E(e)}function th(t){const e=R([]),n=t.name;v(e,"name",new z(n)),v(e,"resource_type",Wo(t.resource_type));const $=t.model_url;return v(e,"model_url",new z($)),new E(e)}function pi(t){const e=R([]);v(e,"id",J(t.id)),v(e,"owned",Gt(t.owned)),v(e,"position",Lt(t.position)),v(e,"can_attack",Gt(t.can_attack));const n=t.resource_type;return n===void 0||v(e,"resource_type",Wo(n)),v(e,"now_health",xt(t.now_health)),v(e,"structure_base",di(t.structure_base)),new E(e)}function mi(t){const e=R([]);v(e,"level",J(t.level)),v(e,"health",xt(t.health)),v(e,"attack",xt(t.attack)),v(e,"defense",xt(t.defense)),v(e,"dodge",xt(t.dodge)),v(e,"attack_range",J(t.attack_range)),v(e,"speed",J(t.speed));const n=t.name;v(e,"name",new z(n));const $=t.enemy_type;v(e,"enemy_type",new z($));const o=t.description;v(e,"description",new z(o));const s=t.asset_url;v(e,"asset_url",new z(s));const c=t.model_url;return v(e,"model_url",new z(c)),v(e,"drop_items",E4(t.drop_items)),v(e,"summon_cost",oi(t.summon_cost)),new E(e)}function eh(t){const e=R([]);return v(e,"id",J(t.id)),v(e,"material_base",th(t.material_base)),new E(e)}function di(t){const e=R([]),n=t.name;v(e,"name",new z(n)),v(e,"health",xt(t.health)),v(e,"can_move",Gt(t.can_move)),v(e,"can_attack",Gt(t.can_attack)),v(e,"attack_range",J(t.attack_range));const $=t.description;v(e,"description",new z($));const o=t.asset_url;v(e,"asset_url",new z(o));const s=t.model_url;return v(e,"model_url",new z(s)),v(e,"attribute",Xo(t.attribute)),v(e,"cost",oi(t.cost)),new E(e)}function nh(t,e){switch(t){case 0:{e.method_0(e.self,"PositiveX");return}case 1:{e.method_0(e.self,"NegativeX");return}case 2:{e.method_0(e.self,"PositiveY");return}default:{e.method_0(e.self,"NegativeY");return}}}function fi(t,e,n,$){const o=Ue($n),s=t.can_attack,c=t.health,_={id:o,owned:e,position:$,can_attack:s,resource_type:n,now_health:c,structure_base:t};return jc(le,_.id,_),_}function ts(t){const e=a4(le,t);return e===void 0?S():e}function es(t){const e=R([{_0:"id",_1:J(t)}]);Y(U,{type_msg:"clear_state",content:D(new E(e))})}function ns(t,e){const n={_0:"id",_1:J(t)},$=Ho(e),o=R([n,{_0:"can_attack",_1:new z($)}]);Y(U,{type_msg:"display_can_attack",content:D(new E(o))})}function hn(t){if(es(t.id),t.structure_base.can_attack){ns(t.id,!0);return}else return}function _n(t){const e=[];let $=-t|0;for(;;){const o=$;if(o<=t){let c=-t|0;for(;;){const _=c;if(_<=t){const i=(o<0?-o|0:o)+(_<0?-_|0:_)|0;i<=t&&i!==0&&Pe(e,{_0:o,_1:_}),c=_+1|0;continue}else break}$=o+1|0;continue}else break}return e}function bi(t,e){const n=e._0,$=e._1,o=t.index_position,s=o._0,c=o._1;return n>=s&&n<(s+9|0)&&$>=c&&$<(c+9|0)}function Ve(t,e){const n=t.rooms,$=n.length;let o=0;for(;;){const s=o;if(s<$){const c=n[s];if(bi(c,e))return c;o=s+1|0;continue}else break}}function re(t,e){const n=t.rooms,$=n.length;let o=0;for(;;){const s=o;if(s<$){const c=n[s];if(bi(c,e)){const _=e._0-c.index_position._0|0,i=e._1-c.index_position._1|0;return{_0:c,_1:{_0:_,_1:i}}}o=s+1|0;continue}else break}}function os(t,e){const n=Ve(t,e);if(n===void 0)return S();{const o=n,s=re(t,e);if(s===void 0)return S();{const i=s._1;return{_0:o,_1:i}}}}function ve(t,e){const n=os(t,e),$=n._0,o=n._1;return st(_t($.blocks,o._0),o._1).occupant}function ze(t,e){const n=Ve(t,e);if(n!==void 0){const o=n,s=re(t,e);if(s===void 0)S();else{const i=s._1,r=st(_t(o.blocks,i._0),i._1).occupant;let a;return r.$tag===4?a=!0:a=!1,!a}}return!1}function oh(t,e){const n=t.structure_base.attack_range,$=_n(n),o=[],s=$.length;let c=0;for(;;){const _=c;if(_<s){const i=$[_],r={_0:t.position._0+i._0|0,_1:t.position._1+i._1|0};if(ze(e,r)){const a=ve(e,r);if(t.owned)switch(a.$tag){case 1:{const u=a._0;t.structure_base.name==="维修工坊"&&Pt(o,new nn(u));break}case 0:{const u=a._0;u.owned===!1&&Pt(o,new qe(u));break}case 3:{const u=a._0;u.owned===!1&&Pt(o,new Be(u));break}}else switch(a.$tag){case 1:{const u=a._0;Pt(o,new nn(u));break}case 0:{const u=a._0;u.owned===!0&&Pt(o,new qe(u));break}case 3:{const u=a._0;u.owned===!0&&Pt(o,new Be(u));break}}}c=_+1|0;continue}else break}return o}function Ko(t,e){return t.now_health=Math.fround(t.now_health-e),Math.fround(t.now_health<=Math.fround(0))}function $h(t,e,n){const $=R([{_0:"id",_1:J(e)},{_0:"position",_1:Lt(n)},{_0:"copper",_1:li(t)}]);Y(U,{type_msg:"set_copper",content:D(new E($))})}function $s(t,e,n){const $=R([{_0:"id",_1:J(e)},{_0:"position",_1:Lt(n)},{_0:"enemy",_1:ui(t)}]);Y(U,{type_msg:"set_enemy",content:D(new E($))})}function gi(t,e,n){const $=R([{_0:"id",_1:J(e)},{_0:"position",_1:Lt(n)},{_0:"structure",_1:pi(t)}]);Y(U,{type_msg:"set_structure",content:D(new E($))})}function sh(t,e,n){const $=R([{_0:"id",_1:J(e)},{_0:"position",_1:Lt(n)},{_0:"material",_1:eh(t)}]);Y(U,{type_msg:"set_material",content:D(new E($))})}function Vt(t){const e=R([{_0:"id",_1:J(t)}]);Y(U,{type_msg:"remove_unit",content:D(new E(e))})}function Je(t,e){const n={_0:"id",_1:J(t)},$=nb(e),o=R([n,{_0:"direction",_1:new z($)}]);Y(U,{type_msg:"change_direction",content:D(new E(o))})}function Lo(t,e){const n=R([{_0:"id",_1:J(t)},{_0:"to",_1:Lt(e)}]);Y(U,{type_msg:"move_to",content:D(new E(n))})}function hi(t,e){const n={_0:"id",_1:J(t)},$=Ho(e),o=R([n,{_0:"can_move",_1:new z($)}]);Y(U,{type_msg:"display_can_move",content:D(new E(o))})}function _h(t,e){const n={_0:"id",_1:J(t)},$=Ho(e),o=R([n,{_0:"can_summon",_1:new z($)}]);Y(U,{type_msg:"display_can_summon",content:D(new E(o))})}function ch(t,e){const n={_0:"id",_1:J(t)},$=Ho(e),o=R([n,{_0:"can_build",_1:new z($)}]);Y(U,{type_msg:"display_can_build",content:D(new E(o))})}function He(t){const e=R([{_0:"id",_1:J(t)}]);Y(U,{type_msg:"animate_move",content:D(new E(e))})}function ih(){const t=R([]);Y(U,{type_msg:"animate_reset",content:D(new E(t))})}function rh(t,e){const n=R([{_0:"room_position",_1:Lt(t)},{_0:"size",_1:J(e)}]);Y(U,{type_msg:"put_room_blocks",content:D(new E(n))})}function Po(t){const e=R([{_0:"position",_1:Lt(t)}]);Y(U,{type_msg:"set_move_block",content:D(new E(e))})}function fe(t){const e=R([{_0:"position",_1:Lt(t)}]);Y(U,{type_msg:"set_attack_block",content:D(new E(e))})}function vo(t){const e=R([{_0:"position",_1:Lt(t)}]);Y(U,{type_msg:"set_can_summon_blocks",content:D(new E(e))})}function St(t){const e=R([{_0:"position",_1:Lt(t)}]);Y(U,{type_msg:"clear_block",content:D(new E(e))})}function ss(t){const e=R([{_0:"id",_1:J(t)}]);Y(U,{type_msg:"attack_complete",content:D(new E(e))})}function Jt(t,e,n){const $=R([{_0:"id",_1:J(t)},{_0:"now_health",_1:xt(e)},{_0:"max_health",_1:xt(n)}]);Y(U,{type_msg:"update_health",content:D(new E($))})}function ki(){const t=R([]);Y(U,{type_msg:"game_over",content:D(new E(t))})}function wi(){const t=R([]);Y(U,{type_msg:"success",content:D(new E(t))})}function yi(t){const e=[],n=bo.length;let $=0;for(;;){const s=$;if(s<n){const c=bo[s];c.level<=t&&U4(e,c),$=s+1|0;continue}else break}const o=e;return J1(o,ke(0,o.length-1|0))}function i$(t){let e=ke(0,8),n=ke(0,8);for(;Kt(t,{_0:e,_1:n});){e=ke(0,8),n=ke(0,8);continue}return{_0:e,_1:n}}function kn(t,e,n){const $=!n,o=!n,s=Ue($n),c=t.health,_={id:s,owned:n,can_move:$,can_attack:o,position:e,now_health:c,enemy_base:t};return xc(Tt,_.id,_),_}function ah(){return{occupant:yn}}function n_(t){return{id:Ue($n),material_base:t}}function Mi(t,e,n){let $=t;const o=[];let s=0;for(;;){const c=s;if(c<9){const _=[];let i=0;for(;;){const r=i;if(r<9){F4(_,ah()),i=r+1|0;continue}else break}H4(o,_),s=c+1|0;continue}else break}if($===6&&Cn.val===!1)st(_t(o,3),4).occupant=new Me(kn(Us(b$,"（BOSS）废械吞噬者·饕餮"),{_0:e._0+3|0,_1:e._1+4|0},!1)),st(_t(o,5),4).occupant=new Me(kn(Us(b$,"（BOSS）织网夫人·夏特拉"),{_0:e._0+5|0,_1:e._1+4|0},!1)),Cn.val=!0;else{$===6&&($=5),st(_t(o,4),4).occupant=new J$(fi(u4(V_,"充能线圈"),!1,void 0,{_0:e._0+4|0,_1:e._1+4|0}));const c=ie(Xp,$);let _=0;for(;;){const i=_;if(i<c){const r=yi($),a=i$(n);Ut(n,a);const l={_0:e._0+a._0|0,_1:e._1+a._1|0};st(_t(o,a._0),a._1).occupant=new Me(kn(r,l,!1)),_=i+1|0;continue}else break}if(jn(.4)){const i=i$(n);Ut(n,i),st(_t(o,i._0),i._1).occupant=new d$(n_(r0))}if(jn(.4)){const i=i$(n);Ut(n,i),st(_t(o,i._0),i._1).occupant=new d$(n_(a0))}}return{level:$,index_position:e,blocks:o}}function lh(t){const e=t.blocks,n=e.length;let $=0;for(;;){const o=$;if(o<n){const s=e[o],c=s.length;let _=0;for(;;){const i=_;if(i<c){if(s[i].occupant.$tag===4)return!1;_=i+1|0;continue}else break}$=o+1|0;continue}else break}return!0}function uh(t){const e=[];let n=0;for(;;){const $=n;if($<9){let o=0;for(;;){const s=o;if(s<9){st(_t(t.blocks,$),s).occupant.$tag===4&&Pe(e,{_0:$,_1:s}),o=s+1|0;continue}else break}n=$+1|0;continue}else break}return e}function ph(t,e){const n=e._0,$=e._1,o=t.index_position,s=o._0,c=o._1,_=n-s|0,i=$-c|0;return _<0?i<0?{_0:5,_1:{_0:s-9|0,_1:c}}:i>=9?{_0:4,_1:{_0:s-9|0,_1:c+9|0}}:{_0:0,_1:{_0:s-9|0,_1:c}}:_>=9?i<0?{_0:7,_1:{_0:s+9|0,_1:c}}:i>=9?{_0:6,_1:{_0:s+9|0,_1:c+9|0}}:{_0:1,_1:{_0:s+9|0,_1:c}}:i<0?{_0:3,_1:{_0:s,_1:c-9|0}}:{_0:2,_1:{_0:s,_1:c+9|0}}}function mh(t){const e=_4([]),n=t.rooms,$=n.length;let o=0;for(;;){const s=o;if(s<$){const c=n[s],_=c.index_position,i=_._0,r=_._1;let a=0;for(;;){const l=a;if(l<9){let u=0;for(;;){const p=u;if(p<9){const m={_0:i+l|0,_1:r+p|0};Rc(e,m,st(_t(c.blocks,l),p)),u=p+1|0;continue}else break}a=l+1|0;continue}else break}o=s+1|0;continue}else break}return e}function dh(t){const e=mh(t),n=Jc([]),$={map:n},o=S4(e);for(;;){const s=v4(o);if(s===void 0)break;{const _=s,i=_._0;_._1.occupant.$tag===4?yo(n,i,!0):yo(n,i,!1);continue}}return $}function fh(t,e){const n=qc(t.map,e);return n===-1?!1:n}function bh(t,e,n){const $=_n(e),o=[],s=$.length;let c=0;for(;;){const _=c;if(_<s){const i=$[_],r={_0:n._0+i._0|0,_1:n._1+i._1|0};fh(t,r)&&Pe(o,r),c=_+1|0;continue}else break}return o}function ro(t,e){const n=t._0>e._0?t._0-e._0|0:e._0-t._0|0,$=t._1>e._1?t._1-e._1|0:e._1-t._1|0;return n+$|0}function gh(t,e,n,$,o){if(e._0===n._0&&e._1===n._1)return e;const s=[{position:e,g_cost:0,h_cost:ro(e,n),f_cost:ro(e,n)}],c=Jc([]),_=$4([]);for(;s.length>0;){let i=0,r=me(s,0);const a=s.length;let l=1;for(;;){const k=l;if(k<a){me(s,k).f_cost<r.f_cost&&(r=me(s,k),i=k),l=k+1|0;continue}else break}hg(s,i),yo(c,r.position,!0);const u=ro(r.position,n);let p;const m=r.position;if(m._0===n._0&&m._1===n._1?p=!0:p=u<=o,p){let k=r.position,w=r.position;for(;;){const I=l4(_,k);if(I===void 0)break;{const L=I;w=k,k=L;const M=k;if(M._0===e._0&&M._1===e._1)break;continue}}return w}const b=bh(t,$,r.position),g=b.length;let f=0;for(;;){const k=f;if(k<g){t:{const w=b[k];if(qc(c,w)!==-1)break t;const y=r.g_cost+1|0;let L=!1,M=0;const G=s.length;let C=0;for(;;){const O=C;if(O<G){const x=me(s,O).position;if(x._0===w._0&&x._1===w._1){L=!0,M=O;break}C=O+1|0;continue}else break}if(L)y<me(s,M).g_cost&&(me(s,M).g_cost=y,me(s,M).f_cost=y+me(s,M).h_cost|0,C$(_,w,r.position));else{const O=ro(w,n),x=y+O|0;V4(s,{position:w,g_cost:y,h_cost:O,f_cost:x}),C$(_,w,r.position)}break t}f=k+1|0;continue}else break}continue}}function Si(t,e){N4(t.rooms,e)}function hh(t){const e=Mi(1,l0,t),n={rooms:[]};return Si(n,e),n}function kh(t,e){const n=Ve(t,e);if(n===void 0)return S();{const o=n,s=re(t,e);if(s===void 0)return S();{const i=s._1;return st(_t(o.blocks,i._0),i._1)}}}function _s(t,e){const n=Ve(t,e);if(n!==void 0){const o=n,s=re(t,e);if(s===void 0)S();else{const i=s._1,r=st(_t(o.blocks,i._0),i._1).occupant;let a;return r.$tag===4?a=!0:a=!1,!a}}return!0}function r$(t,e){if(Ve(t,e)!==void 0)return 0;let $=999999;const o=t.rooms,s=o.length;let c=0;for(;;){const _=c;if(_<s){const r=o[_].index_position,a=r._0,l=r._1,u=e._0,p=e._1,m=u<a?a-u|0:u>=(a+9|0)?(u-(a+9|0)|0)+1|0:0,b=p<l?l-p|0:p>=(l+9|0)?(p-(l+9|0)|0)+1|0:0,g=m>b?m:b;g<$&&($=g),c=_+1|0;continue}else break}return $}function Ft(t,e){const n=os(t,e),$=n._0,o=n._1;st(_t($.blocks,o._0),o._1).occupant=yn}function cs(t,e,n){const $=os(t,e),o=$._0,s=$._1;st(_t(o.blocks,s._0),s._1).occupant=n}function Ci(t){const e=t.index_position,n=e._0,$=e._1;rh(t.index_position,9);let o=0;for(;;){const s=o;if(s<9){let c=0;for(;;){const _=c;if(_<9){const i={_0:n+s|0,_1:$+_|0},r=st(_t(t.blocks,s),_).occupant;switch(r.$tag){case 4:break;case 0:{const l=r._0;$s(l,l.id,i),Jt(l.id,l.now_health,l.enemy_base.health);break}case 1:{const l=r._0;$h(l,l.id,i),Jt(l.id,l.now_health,l.copper.attribute.health);break}case 3:{const l=r._0;gi(l,l.id,i);break}default:{const l=r._0;sh(l,l.id,i)}}c=_+1|0;continue}else break}o=s+1|0;continue}else return}}function wh(t){return((t/4|0)+1|0)>=6?6:(t/4|0)+1|0}function yh(){return{map:hh(mc({buf:d0,start:0,end:3}))}}function Nt(t,e){if(e===0&&(Kt(At,t)?Po(t):Kt(gn,t)?fe(t):Kt(ne,t)&&vo(t)),e===1&&(Kt(ft,t)||Kt(gn,t)?fe(t):Kt(ne,t)&&vo(t)),e===2)if(Kt(ft,t)){fe(t);return}else if(Kt(gn,t)){fe(t);return}else if(Kt(At,t)){Po(t);return}else return;else return}function Mh(t){const e=ts(t),n=R([{_0:"structure",_1:pi(e)}]);Y(U,{type_msg:"handle_on_click_structure",content:D(new E(n))})}function se(){const t=yt(ft);for(;;){const e=Mt(t);if(e===void 0)break;{const $=e;St($),Nt($,0);continue}}wt(ft)}function _e(){const t=yt(At);for(;;){const e=Mt(t);if(e===void 0)break;{const $=e;St($),Nt($,1);continue}}wt(At)}function ce(){const t=yt(ne);for(;;){const e=Mt(t);if(e===void 0)break;{const $=e;St($),Nt($,2);continue}}wt(ne)}function Qo(t){switch(t.$tag){case 0:return t._0.position;case 1:return t._0.position;default:return t._0.position}}function Sh(t,e){_e(),se(),ce();const n=ts(e),$=oh(n,t),o=$.length;let s=0;for(;;){const c=s;if(c<o){const _=$[c],i=Qo(_);fe(i),Ut(ft,i),s=c+1|0;continue}else return}}function Ch(){const t=yt(ft);for(;;){const e=Mt(t);if(e===void 0)break;{const $=e;St($),Nt($,0);continue}}wt(ft)}function Ii(t,e){if(jn(t.attribute.dodge/100))return!1;const n=t.attribute.defense,$=Math.fround(e/Math.fround(e+Math.fround(Math.fround(1)*n))),o=Math.fround(e*$);return t.now_health=Math.fround(t.now_health-o),Math.fround(t.now_health<=Math.fround(0))}function Li(t,e){if(t.now_health=Math.fround(t.now_health+e),Math.fround(t.now_health>t.attribute.health)){t.now_health=t.attribute.health;return}else return}function Zo(t,e){if(jn(t.enemy_base.dodge/100))return!1;const n=t.enemy_base.defense,$=Math.fround(e/Math.fround(e+Math.fround(Math.fround(1)*n))),o=Math.fround(e*$);return t.now_health=Math.fround(t.now_health-o),Math.fround(t.now_health<=Math.fround(0))}function is(t){const e=[],n=t.enemy_base.drop_items,$=n.length;let o=0;for(;;){const s=o;if(s<$){const c=n[s],_=ke(c._1._0,c._1._1);B4(e,Fg(new B_(c._0),_)),o=s+1|0;continue}else break}return e}function Ih(t,e,n){He(t);const $=ts(t),o=ve(n,e);switch(o.$tag){case 0:{const i=o._0;Zo(i,$.structure_base.attribute.attack)?(Q$(pt.val.bag,is(i)),No(Tt,i.id),Vt(i.id),Ft(n,i.position)):Jt(i.id,i.now_health,i.enemy_base.health),$.can_attack=!1,hn($);break}case 1:{const i=o._0;$.owned?Li(i,$.structure_base.attribute.attack):(Ii(i,$.structure_base.attribute.attack)&&(Bc(Ie,i.id),Vt(i.id),Ft(n,i.position)),Ie.size===0&&ki()),Jt(i.id,i.now_health,i.copper.attribute.health),$.can_attack=!1,hn($);break}case 3:{const i=o._0;Ko(i,$.structure_base.attribute.attack)?(Do(le,i.id),Vt(i.id),Ft(n,i.position)):Jt(i.id,i.now_health,i.structure_base.health),$.can_attack=!1,hn($);break}case 4:break;default:ue()}const s=yt(ft);for(;;){const _=Mt(s);if(_===void 0)break;{const r=_;St(r),Nt(r,0);continue}}wt(ft);let c;if(o.$tag===4?c=!0:c=!1,!c){ss(t);return}}function a$(t,e,n){const $=t.copper_type;let o;switch($){case 2:{o=!1;break}case 4:{o=!1;break}default:o=!0}const s=Ue($n),c=t.copper_type;let _;c===4?_=!0:_=!1;const i=t.copper_type;let r;i===2?r=!0:r=!1;const a=t.attribute.health,l=t.attribute,u={id:s,original_id:e,copper:t,can_move:!0,can_attack:o,can_summon:_,can_build:r,position:n,now_health:a,attribute:l};return Zb(Ie,u.id,u),u}function ee(t){es(t.id),hi(t.id,t.can_move),ns(t.id,t.can_attack),_h(t.id,t.can_summon),ch(t.id,t.can_build)}function Lh(t){const e=pt.val.warehouse,n=a$(fo(e,ie(t,0)),ie(t,0),f0),$=a$(fo(e,ie(t,1)),ie(t,1),b0),o=a$(fo(e,ie(t,2)),ie(t,2),g0);ut.val=yh();const s=ut.val;let c;s===void 0?c=S():c=s;const _=c.map,i=E1(_.rooms,0);st(_t(i.blocks,0),3).occupant=new tn(n),st(_t(i.blocks,0),4).occupant=new tn($),st(_t(i.blocks,0),5).occupant=new tn(o),Ci(i),Je(n.id,2),Je($.id,2),Je(o.id,2),ee(n),ee($),ee(o)}function Go(t){t:switch(t){case 0:return 1;case 1:return 0;case 2:return 2;case 3:return 3;case 4:break t;case 5:break t;case 6:break t;default:break t}return H2()}function xo(t,e){const n=e._0-t._0|0,$=e._1-t._1|0;return n!==0?n>0?2:3:$>0?0:1}function Ph(){return Q4(Hc(Ie))}function vh(t){const e=[],n=t.position,$=n._0,o=n._1,s=Ph(),c=s.length;let _=0;for(;;){const m=_;if(m<c){const b=s[m];_$(e,{_0:b.position,_1:new nn(b)}),_=m+1|0;continue}else break}U$(Tt)(m=>(m.id!==t.id&&m.owned&&_$(e,{_0:m.position,_1:new qe(m)}),1)),V$(le)(m=>(m.owned===!0&&_$(e,{_0:m.position,_1:new Be(m)}),1));let a=1e9,l;const u=e.length;let p=0;for(;;){const m=p;if(m<u){const b=e[m],g=b._0,f=g._0,k=g._1,w=b._1,I=f-$|0,y=I<0?-I|0:I,L=k-o|0,M=y+(L<0?-L|0:L)|0;M<a&&(a=M,l=w),p=m+1|0;continue}else break}return l}function rs(t,e){const n=t.enemy_base.attack_range,$=_n(n),o=[],s=$.length;let c=0;for(;;){const _=c;if(_<s){const i=$[_],r={_0:t.position._0+i._0|0,_1:t.position._1+i._1|0};if(ze(e,r)){const a=ve(e,r);if(t.owned)switch(a.$tag){case 0:{const u=a._0;u.owned===!1&&Pt(o,new qe(u));break}case 3:{const u=a._0;u.owned===!1&&Pt(o,new Be(u));break}}else switch(a.$tag){case 1:{const u=a._0;Pt(o,new nn(u));break}case 0:{const u=a._0;u.owned===!0&&Pt(o,new qe(u));break}case 3:{const u=a._0;u.owned===!0&&Pt(o,new Be(u));break}}}c=_+1|0;continue}else break}return o}function Gh(t,e){const n=rs(e,t);if(n.length>0){const $=T1(n,0);switch(He(e.id),$.$tag){case 0:{const s=$._0;Zo(s,e.enemy_base.attack)?(No(Tt,s.id),Vt(s.id),Ft(t,s.position)):Jt(s.id,s.now_health,s.enemy_base.health);break}case 1:{const s=$._0;if(Ii(s,e.enemy_base.attack)){const _=s.copper;_.live_left=_.live_left-1|0,Bc(Ie,s.id),Vt(s.id),Ft(t,s.position),Ie.size===0&&ki()}else Jt(s.id,s.now_health,s.copper.attribute.health);break}default:{const s=$._0;Ko(s,e.enemy_base.attack)?(Do(le,s.id),Vt(s.id),Ft(t,s.position)):Jt(s.id,s.now_health,s.structure_base.health)}}}else{const $=vh(e);if($!==void 0){const c=Qo($),_=dh(t),i=gh(_,e.position,c,e.enemy_base.speed,e.enemy_base.attack_range);if(i!==void 0){const a=i;He(e.id);const l=e.position;Ft(t,e.position),e.position=a,cs(t,e.position,new Me(e)),Je(e.id,Go(xo(l,a))),Lo(e.id,a)}}}return 1}function xh(){const t=ut.val;let e;t===void 0?e=S():e=t;const n=e.map;U$(Tt)(o=>o.owned===!1?Gh(n,o):1)}function jh(){const t=yt(ft);for(;;){const o=Mt(t);if(o===void 0)break;St(o)}wt(ft);const e=yt(At);for(;;){const o=Mt(e);if(o===void 0)break;St(o)}wt(At);const n=yt(gn);for(;;){const o=Mt(n);if(o===void 0)break;St(o)}wt(gn);const $=yt(ne);for(;;){const o=Mt($);if(o===void 0)break;St(o)}wt(ne)}function On(t){if(es(t.id),t.can_move&&hi(t.id,!0),t.can_attack){ns(t.id,!0);return}else return}function Oh(){Hc(Ie)($=>{$.can_move=!0;const o=$.copper.copper_type;let s;switch(o){case 2:{s=!1;break}case 4:{s=!1;break}default:s=!0}$.can_attack=s;const c=$.copper.copper_type;let _;c===4?_=!0:_=!1,$.can_summon=_;const i=$.copper.copper_type;let r;return i===2?r=!0:r=!1,$.can_build=r,ee($),1}),U$(Tt)($=>($.owned&&($.can_move=!0,$.can_attack=!0,On($)),1)),V$(le)($=>($.owned&&($.structure_base.can_attack&&($.can_attack=!0),hn($)),1))}function Ah(){V$(le)(e=>{if(e.structure_base.name==="心源矿钻"){const n=e.resource_type;if(n!==void 0){const o=n;Oe(pt.val.bag.resources,o,2);const s={_0:"position",_1:Lt(e.position)},c=ob(o),_={_0:"resource_type",_1:new z(c)},i=2,r=void 0,a=R([s,_,{_0:"amount",_1:new An(i,r)}]);Y(U,{type_msg:"drill_resource_generate",content:D(new E(a))})}}return 1})}function Eh(){if(jn(.2)){const t=ut.val;let e;t===void 0?e=S():e=t;const $=e.map.rooms,o=$.length;let s=0;for(;;){const c=s;if(c<o){t:{const _=$[c];if(lh(_))break t;const i=st(_t(_.blocks,4),4).occupant;if(i.$tag===3&&i._0.structure_base.name==="充能线圈"){const l=_.level,u=yi(l),p=uh(_),m=R1(p,ke(0,p.length-1|0)),b={_0:_.index_position._0+m._0|0,_1:_.index_position._1+m._1|0},g=kn(u,b,!1);st(_t(_.blocks,m._0),m._1).occupant=new Me(g),$s(g,g.id,b)}break t}s=c+1|0;continue}else return}}else return}function Rh(){jh(),Oh(),xh(),ih(),Eh(),Ah()}function zh(){ut.val=void 0,Cn.val=!1,In.val=!1,Ln.val=!1}function Jh(t){_e(),se(),ce();const e=Tn(Tt,t);let n;e===void 0?n=S():n=e;const $=ut.val;let o;$===void 0?o=S():o=$;const s=o.map,_=rs(n,s).length!==0,i=R([{_0:"enemy",_1:ui(n)},{_0:"has_attack_targets",_1:Gt(_)}]);Y(U,{type_msg:"handle_on_click_enemy",content:D(new E(i))})}function Th(t,e){_e(),se(),ce();const n=Tn(Tt,e);let $;n===void 0?$=S():$=n;const o=rs($,t),s=o.length;let c=0;for(;;){const _=c;if(_<s){const i=o[_],r=Qo(i);fe(r),Ut(ft,r),c=_+1|0;continue}else return}}function qh(){const t=yt(ft);for(;;){const e=Mt(t);if(e===void 0)break;{const $=e;St($),Nt($,0);continue}}wt(ft)}function Bh(t,e,n){He(t);const $=Tn(Tt,t);let o;$===void 0?o=S():o=$;const s=ve(n,e);switch(s.$tag){case 0:{const r=s._0;Zo(r,o.enemy_base.attack)?(Q$(pt.val.bag,is(r)),No(Tt,r.id),Vt(r.id),Ft(n,r.position),Cn.val===!0&&(r.enemy_base.name==="（BOSS）废械吞噬者·饕餮"?In.val=!0:r.enemy_base.name==="（BOSS）织网夫人·夏特拉"&&(Ln.val=!0),In.val===!0&&Ln.val===!0&&wi())):Jt(r.id,r.now_health,r.enemy_base.health),o.can_attack=!1,On(o);break}case 3:{const r=s._0;Ko(r,o.enemy_base.attack)?(Do(le,r.id),Vt(r.id),Ft(n,r.position)):Jt(r.id,r.now_health,r.structure_base.health),o.can_attack=!1,On(o);break}case 4:break;default:ue()}const c=yt(ft);for(;;){const i=Mt(c);if(i===void 0)break;{const a=i;St(a),Nt(a,0);continue}}wt(ft);let _;if(s.$tag===4?_=!0:_=!1,!_){ss(t);return}}function Fh(t,e){const n=_n(t.enemy_base.speed),$=[],o=n.length;let s=0;for(;;){const c=s;if(c<o){const _=n[c],i={_0:t.position._0+_._0|0,_1:t.position._1+_._1|0};_s(e,i)||Pe($,i),s=c+1|0;continue}else break}return $}function Hh(t,e){_e(),se(),ce();const n=Tn(Tt,e);let $;n===void 0?$=S():$=n;const o=Fh($,t),s=o.length;let c=0;for(;;){const _=c;if(_<s){const i=o[_];Po(i),Ut(At,i),c=_+1|0;continue}else return}}function Nh(){const t=yt(At);for(;;){const e=Mt(t);if(e===void 0)break;{const $=e;St($),Nt($,1);continue}}wt(At)}function Dh(t,e,n){He(t);const $=Tn(Tt,t);let o;if($===void 0?o=S():o=$,Ve(n,e)===void 0)ue();else{const _=o.position,i=re(n,_);let r;i===void 0?r=S():r=i;const a=r._0,l=r._1,u=re(n,e);let p;u===void 0?p=S():p=u;const m=p._0,b=p._1;st(_t(a.blocks,l._0),l._1).occupant=yn,st(_t(m.blocks,b._0),b._1).occupant=new Me(o),o.position=e,Je(t,Go(xo(_,e))),Lo(t,e)}o.can_move=!1,On(o);const c=yt(At);for(;;){const _=Mt(c);if(_===void 0)break;{const r=_;St(r),Nt(r,1);continue}}wt(At)}function oe(t){const e=r4(Ie,t);return e===void 0?S():e}function Uh(t){const e=t.copper.copper_info.attack_range;if(e===void 0)switch(t.copper.copper_type){case 0:return 1;case 1:return 3;case 3:return 1;case 4:return 0;default:return 0}else return e}function Pi(t,e){const n=Uh(t),$=_n(n),o=[],s=$.length;let c=0;for(;;){const _=c;if(_<s){const i=$[_],r={_0:t.position._0+i._0|0,_1:t.position._1+i._1|0};if(ze(e,r)){const a=ve(e,r);switch(a.$tag){case 1:{const u=a._0;u.copper.copper_type===3&&Pt(o,new nn(u));break}case 3:{const u=a._0;u.owned===!1&&Pt(o,new Be(u));break}case 0:{const u=a._0;u.owned===!1&&Pt(o,new qe(u));break}}}c=_+1|0;continue}else break}return o}function Vh(t){_e(),se(),ce();const e=oe(t),n=ut.val;let $;n===void 0?$=S():$=n;const o=$.map,c=Pi(e,o).length!==0,_=R([{_0:"copper",_1:li(oe(t))},{_0:"has_attack_targets",_1:Gt(c)}]);Y(U,{type_msg:"handle_on_click_copper",content:D(new E(_))}),ee(e)}function Wh(t,e){_e(),se(),ce();const n=oe(e),$=Pi(n,t),o=$.length;let s=0;for(;;){const c=s;if(c<o){const _=$[c],i=Qo(_);fe(i),Ut(ft,i),s=c+1|0;continue}else return}}function Xh(t,e,n){He(t);const $=oe(t),o=ve(n,e);switch(o.$tag){case 0:{const i=o._0;if(Zo(i,$.attribute.attack)){Q$(pt.val.bag,is(i)),No(Tt,i.id),Vt(i.id),Ft(n,i.position);const a=ut.val;let l;a===void 0?l=S():l=a;const u=l.map,p=ve(u,i.position);let m;switch(p.$tag){case 4:{m="Empty";break}case 0:{m="Enemy";break}default:m="Other"}ei(`deeeebug${m}`),Cn.val===!0&&(i.enemy_base.name==="（BOSS）废械吞噬者·饕餮"?In.val=!0:i.enemy_base.name==="（BOSS）织网夫人·夏特拉"&&(Ln.val=!0),In.val===!0&&Ln.val===!0&&wi())}else Jt(i.id,i.now_health,i.enemy_base.health);$.can_attack=!1,ee($);break}case 1:{const i=o._0;Li(i,$.attribute.attack),Jt(i.id,i.now_health,i.copper.attribute.health),$.can_attack=!1,ee($);break}case 3:{const i=o._0;Ko(i,$.attribute.attack)?(Do(le,i.id),Vt(i.id),Ft(n,i.position)):Jt(i.id,i.now_health,i.structure_base.health),$.can_attack=!1,ee($);break}case 4:break;default:ue()}const s=yt(ft);for(;;){const _=Mt(s);if(_===void 0)break;{const r=_;St(r),Nt(r,0);continue}}wt(ft);let c;if(o.$tag===4?c=!0:c=!1,!c){ss(t);return}}function Yh(t,e){const n=_n(t.attribute.speed),$=[],o=n.length;let s=0;for(;;){const c=s;if(c<o){t:{const _=n[c],i={_0:t.position._0+_._0|0,_1:t.position._1+_._1|0};if(r$(e,i)>1||ze(e,i))break t;const a=_._0,l=_._1;if(a!==0&&l!==0){const u={_0:t.position._0+a|0,_1:t.position._1},p={_0:t.position._0,_1:t.position._1+l|0},m=r$(e,u),b=r$(e,p),g=m<=1&&!ze(e,u),f=b<=1&&!ze(e,p);if(!g&&!f)break t}Pe($,i);break t}s=c+1|0;continue}else break}return $}function Kh(t,e){_e(),se(),ce();const n=oe(e),$=Yh(n,t),o=$.length;let s=0;for(;;){const c=s;if(c<o){const _=$[c];Po(_),Ut(At,_),s=c+1|0;continue}else return}}function Qh(t,e,n){He(t);const $=oe(t);if(Ve(n,e)===void 0){const c=$.position,_=re(n,c);let i;_===void 0?i=S():i=_;const r=i._0,a=i._1,u=ph(r,e)._1,p=e._0-u._0|0,m=e._1-u._1|0,b=wh(n.rooms.length+1|0),f=Mi(b,u,mc({buf:[{_0:p,_1:m}],start:0,end:1}));Si(n,f),st(_t(r.blocks,a._0),a._1).occupant=yn,st(_t(f.blocks,p),m).occupant=new tn($),Ci(f),Je(t,Go(xo(c,e))),$.position=e,Lo(t,e)}else{const c=$.position,_=re(n,c);let i;_===void 0?i=S():i=_;const r=i._0,a=i._1,l=re(n,e);let u;l===void 0?u=S():u=l;const p=u._0,m=u._1;st(_t(r.blocks,a._0),a._1).occupant=yn,st(_t(p.blocks,m._0),m._1).occupant=new tn($),$.position=e,Je(t,Go(xo(c,e))),Lo(t,e)}$.can_move=!1,ee($);const s=yt(At);for(;;){const c=Mt(s);if(c===void 0)break;{const i=c;St(i),Nt(i,1);continue}}wt(At)}function Zh(t,e){const n=[],$=[h0,k0,w0,y0],o=$.length;let s=0;for(;;){const c=s;if(c<o){const _=$[c],i={_0:t.position._0+_._0|0,_1:t.position._1+_._1|0};_s(e,i)||Pe(n,i),s=c+1|0;continue}else break}return n}function t5(t){_e(),se(),ce();const e=oe(t),n=ut.val;let $;n===void 0?$=S():$=n;const o=$.map,s=Zh(e,o),c=s.length;let _=0;for(;;){const i=_;if(i<c){const r=s[i];vo(r),Ut(ne,r),_=i+1|0;continue}else return}}function e5(t,e,n,$){const o=c4(b$,$);let s;o===void 0?s=S():s=o;const c=s.summon_cost,_=oe(t);if(Y$(pt.val.bag.resources,c)){K$(pt.val.bag.resources,c);const i=kn(s,e,!0);cs(n,e,new Me(i)),$s(i,i.id,e),On(i),_.can_summon=!1,ee(_);return}else{const i="资源不足",r=R([{_0:"message",_1:new z(i)}]);Y(U,{type_msg:"resource_not_enough",content:D(new E(r))});return}}function n5(){const t=R([{_0:"contents",_1:A4(bo)}]);Y(U,{type_msg:"get_summon_menu",content:D(new E(t))})}function o5(){const t=R([{_0:"contents",_1:z4(f$)}]);Y(U,{type_msg:"get_structure_menu",content:D(new E(t))})}function $5(t,e,n){const $=[],o=[M0,S0,C0,I0],s=o.length;let c=0;for(;;){const _=c;if(_<s){const i=o[_],r={_0:t.position._0+i._0|0,_1:t.position._1+i._1|0};n?ze(e,r)&&kh(e,r).occupant.$tag===2&&Pe($,r):_s(e,r)||Pe($,r),c=_+1|0;continue}else break}return $}function s5(t,e){_e(),se(),ce();const n=oe(t),$=ut.val;let o;$===void 0?o=S():o=$;const s=o.map,c=$5(n,s,e==="心源矿钻"),_=c.length;let i=0;for(;;){const r=i;if(r<_){const a=c[r];vo(a),Ut(ne,a),i=r+1|0;continue}else return}}function G$(){const t=yt(ne);for(;;){const e=Mt(t);if(e===void 0)break;{const $=e;St($),Nt($,2);continue}}wt(ne)}function _5(t,e,n,$){const o=i4(V_,$);let s;o===void 0?s=S():s=o;const c=s.cost,_=oe(t);if(Y$(pt.val.bag.resources,c)){K$(pt.val.bag.resources,c);let i;if($==="心源矿钻"){const a=ve(n,e);if(a.$tag===2){const u=a._0;Ft(n,e),Vt(u.id),i=u.material_base.resource_type}else i=S()}else i=void 0;const r=fi(s,!0,i,e);cs(n,e,new J$(r)),gi(r,r.id,e),_.can_build=!1,hn(r),G$();return}else{const i="资源不足",r=R([{_0:"message",_1:new z(i)}]);Y(U,{type_msg:"resource_not_enough",content:D(new E(r))}),G$();return}}function Q(t){t:{const e=mo(t);let n;e===void 0?n=S():n=e;const $=of({str:n,start:0,end:n.length});if($.$tag===1)return $._0;$._0;break t}return S()}function c5(t){let e;t:{e:{const n=sc({str:t,start:0,end:t.length},1024);if(n.$tag===1)e=n._0;else{n._0;break e}break t}e=S()}t:if(e.$tag===6){const $=e._0,o=P($,"type");if(o===void 0)break t;{const c=o;if(c.$tag===4)switch(c._0){case"on_click_copper":{const r=P($,"content");if(r===void 0)break t;{const l=r;if(l.$tag===6){const p=l._0,m=P(p,"id");if(m===void 0)break t;Vh(Q(m));return}else break t}}case"on_attack_start":{const r=P($,"content");if(r===void 0)break t;{const l=r;if(l.$tag===6){const p=l._0,m=P(p,"id");if(m===void 0)break t;{const g=m,f=ut.val;let k;f===void 0?k=S():k=f,Wh(k.map,Q(g));return}}else break t}}case"on_attack_end":{se();return}case"on_attack_apply":{const r=P($,"content");if(r===void 0)break t;{const l=r;if(l.$tag===6){const p=l._0,m=P(p,"id");if(m===void 0)break t;{const g=m,f=P(p,"position");if(f===void 0)break t;{const w=f;if(w.$tag===6){const y=w._0,L=P(y,"x");if(L===void 0)break t;{const G=L,C=P(y,"y");if(C===void 0)break t;{const x=C,A=Q(g),q={_0:Q(G),_1:Q(x)},H=ut.val;let B;H===void 0?B=S():B=H,Xh(A,q,B.map);return}}}else break t}}}else break t}}case"on_move_start":{const r=P($,"content");if(r===void 0)break t;{const l=r;if(l.$tag===6){const p=l._0,m=P(p,"id");if(m===void 0)break t;{const g=m,f=ut.val;let k;f===void 0?k=S():k=f,Kh(k.map,Q(g));return}}else break t}}case"on_move_end":{_e();return}case"on_move_apply":{const r=P($,"content");if(r===void 0)break t;{const l=r;if(l.$tag===6){const p=l._0,m=P(p,"id");if(m===void 0)break t;{const g=m,f=P(p,"position");if(f===void 0)break t;{const w=f;if(w.$tag===6){const y=w._0,L=P(y,"x");if(L===void 0)break t;{const G=L,C=P(y,"y");if(C===void 0)break t;{const x=C,A=Q(g),q={_0:Q(G),_1:Q(x)},H=ut.val;let B;H===void 0?B=S():B=H,Qh(A,q,B.map);return}}}else break t}}}else break t}}case"on_game_start":{const r=P($,"content");if(r===void 0)break t;{const l=r;if(l.$tag===6){const p=l._0,m=P(p,"ids");if(m===void 0)break t;{const f=gc(_c(m)),k=new Array(f.length),w=f.length;let I=0;for(;;){const y=I;if(y<w){const L=f[y];k[y]=Q(L),I=y+1|0;continue}else break}Lh(k);return}}else break t}}case"on_game_round_pass":{Rh();return}case"on_click_enemy":{const r=P($,"content");if(r===void 0)break t;{const l=r;if(l.$tag===6){const p=l._0,m=P(p,"id");if(m===void 0)break t;Jh(Q(m));return}else break t}}case"on_enemy_attack_start":{const r=P($,"content");if(r===void 0)break t;{const l=r;if(l.$tag===6){const p=l._0,m=P(p,"id");if(m===void 0)break t;{const g=m,f=ut.val;let k;f===void 0?k=S():k=f,Th(k.map,Q(g));return}}else break t}}case"on_enemy_attack_end":{qh();return}case"on_enemy_attack_apply":{const r=P($,"content");if(r===void 0)break t;{const l=r;if(l.$tag===6){const p=l._0,m=P(p,"id");if(m===void 0)break t;{const g=m,f=P(p,"position");if(f===void 0)break t;{const w=f;if(w.$tag===6){const y=w._0,L=P(y,"x");if(L===void 0)break t;{const G=L,C=P(y,"y");if(C===void 0)break t;{const x=C,A=Q(g),q={_0:Q(G),_1:Q(x)},H=ut.val;let B;H===void 0?B=S():B=H,Bh(A,q,B.map);return}}}else break t}}}else break t}}case"on_enemy_move_start":{const r=P($,"content");if(r===void 0)break t;{const l=r;if(l.$tag===6){const p=l._0,m=P(p,"id");if(m===void 0)break t;{const g=m,f=ut.val;let k;f===void 0?k=S():k=f,Hh(k.map,Q(g));return}}else break t}}case"on_enemy_move_end":{Nh();return}case"on_enemy_move_apply":{const r=P($,"content");if(r===void 0)break t;{const l=r;if(l.$tag===6){const p=l._0,m=P(p,"id");if(m===void 0)break t;{const g=m,f=P(p,"position");if(f===void 0)break t;{const w=f;if(w.$tag===6){const y=w._0,L=P(y,"x");if(L===void 0)break t;{const G=L,C=P(y,"y");if(C===void 0)break t;{const x=C,A=Q(g),q={_0:Q(G),_1:Q(x)},H=ut.val;let B;H===void 0?B=S():B=H,Dh(A,q,B.map);return}}}else break t}}}else break t}}case"on_get_summon_menu":{n5();return}case"on_summon_start":{const r=P($,"content");if(r===void 0)break t;{const l=r;if(l.$tag===6){const p=l._0,m=P(p,"id");if(m===void 0)break t;t5(Q(m));return}else break t}}case"on_summon_apply":{const r=P($,"content");if(r===void 0)break t;{const l=r;if(l.$tag===6){const p=l._0,m=P(p,"id");if(m===void 0)break t;{const g=m,f=P(p,"position");if(f===void 0)break t;{const w=f;if(w.$tag===6){const y=w._0,L=P(y,"x");if(L===void 0)break t;{const G=L,C=P(y,"y");if(C===void 0)break t;{const x=C,A=P(p,"name");if(A===void 0)break t;{const H=A,B=Q(g),ct={_0:Q(G),_1:Q(x)},K=ut.val;let Z;K===void 0?Z=S():Z=K;const F=Z.map,N=mo(H);let V;N===void 0?V=S():V=N,e5(B,ct,F,V);return}}}}else break t}}}else break t}}case"on_summon_end":{ce();return}case"on_click_structure":{const r=P($,"content");if(r===void 0)break t;{const l=r;if(l.$tag===6){const p=l._0,m=P(p,"id");if(m===void 0)break t;Mh(Q(m));return}else break t}}case"on_get_structure_menu":{o5();return}case"on_structure_build_start":{const r=P($,"content");if(r===void 0)break t;{const l=r;if(l.$tag===6){const p=l._0,m=P(p,"id");if(m===void 0)break t;{const g=m,f=P(p,"name");if(f===void 0)break t;{const w=f,I=Q(g),y=mo(w);let L;y===void 0?L=S():L=y,s5(I,L);return}}}else break t}}case"on_structure_build_apply":{const r=P($,"content");if(r===void 0)break t;{const l=r;if(l.$tag===6){const p=l._0,m=P(p,"id");if(m===void 0)break t;{const g=m,f=P(p,"position");if(f===void 0)break t;{const w=f;if(w.$tag===6){const y=w._0,L=P(y,"x");if(L===void 0)break t;{const G=L,C=P(y,"y");if(C===void 0)break t;{const x=C,A=P(p,"name");if(A===void 0)break t;{const H=A,B=Q(g),ct={_0:Q(G),_1:Q(x)},K=ut.val;let Z;K===void 0?Z=S():Z=K;const F=Z.map,N=mo(H);let V;N===void 0?V=S():V=N,_5(B,ct,F,V);return}}}}else break t}}}else break t}}case"on_structure_build_end":{G$();return}case"on_structure_attack_start":{const r=P($,"content");if(r===void 0)break t;{const l=r;if(l.$tag===6){const p=l._0,m=P(p,"id");if(m===void 0)break t;{const g=m,f=ut.val;let k;f===void 0?k=S():k=f,Sh(k.map,Q(g));return}}else break t}}case"on_structure_attack_end":{Ch();return}case"on_structure_attack_apply":{const r=P($,"content");if(r===void 0)break t;{const l=r;if(l.$tag===6){const p=l._0,m=P(p,"id");if(m===void 0)break t;{const g=m,f=P(p,"position");if(f===void 0)break t;{const w=f;if(w.$tag===6){const y=w._0,L=P(y,"x");if(L===void 0)break t;{const G=L,C=P(y,"y");if(C===void 0)break t;{const x=C,A=Q(g),q={_0:Q(G),_1:Q(x)},H=ut.val;let B;H===void 0?B=S():B=H,Ih(A,q,B.map);return}}}else break t}}}else break t}}case"on_game_over":{zh();return}default:break t}else break t}}else break t;ue()}function i5(t){const e=ai(t),n=new Array(e.length),$=e.length;let o=0;for(;;){const s=o;if(s<$){const c=e[s];n[s]=Yo(c),o=s+1|0;continue}else break}return O4(n)}function r5(){const t={_0:"warehouse",_1:i5(pt.val.warehouse)},e=R([{_0:"SpiritalSpark",_1:J(Et(pt.val.bag.resources,2))},{_0:"RecallGear",_1:J(Et(pt.val.bag.resources,1))},{_0:"ResonantCrystal",_1:J(Et(pt.val.bag.resources,4))},{_0:"RefinedCopper",_1:J(Et(pt.val.bag.resources,3))},{_0:"HeartCrystalDust",_1:J(Et(pt.val.bag.resources,0))}]),n=R([{_0:"resources",_1:new E(e)},{_0:"equipments",_1:j4(pt.val.bag.equipments)}]),$=R([t,{_0:"bag",_1:new E(n)}]);return D(new E($))}function a5(t){let e=Ng();if(t.$tag===5){const $=t._0,o=$.length;let s=0;for(;;){const c=s;if(c<o){const _=$[c];let i;t:{e:{const r=Zf(_);if(r.$tag===1)i=r._0;else{r._0;break e}break t}i=S()}e=Z$(e,i),s=c+1|0;continue}else break}return e}else return S()}function l5(t){const e=cc(t);let n;e===void 0?n=S():n=e;const $=Tg(),o=Fc(n);for(;;){const s=Nc(o);if(s===void 0)break;{const _=s,i=_._0,r=_._1;switch(i){case"SpiritalSpark":{Oe($,2,Qe(an(rn(r))));break}case"RecallGear":{Oe($,1,Qe(an(rn(r))));break}case"ResonantCrystal":{Oe($,4,Qe(an(rn(r))));break}case"RefinedCopper":{Oe($,3,Qe(an(rn(r))));break}case"HeartCrystalDust":{Oe($,0,Qe(an(rn(r))));break}}continue}}return $}function u5(t){if(t.$tag===6){const n=t._0,$=l5(Mo(n,"resources")),o=gc(_c(Mo(n,"equipments"))),s=new Array(o.length),c=o.length;let _=0;for(;;){const r=_;if(r<c){const a=o[r];let l;t:{e:{const u=t1(a);if(u.$tag===1)l=u._0;else{u._0;break e}break t}l=S()}s[r]=l,_=r+1|0;continue}else break}return Bg($,s)}else return S()}function p5(t){let e;t:{e:{const s=sc({str:t,start:0,end:t.length},1024);let c;if(s.$tag===1)c=s._0;else{s._0;break e}const _=cc(c);_===void 0?e=S():e=_;break t}e=S()}const n=a5(Mo(e,"warehouse")),$=u5(Mo(e,"bag")),o=Xg(n,$);pt.val=o}function m5(){return Yg(pt.val)}function d5(){return Kg(pt.val)}function f5(){return Qg(pt.val)}function b5(t){return Zg(pt.val,t)}function g5(t){Lg(U,t)}function h5(t){p5(t)}function k5(){return r5()}function w5(t){c5(t)}export{w5 as eventloop,k5 as global_export_save,f5 as global_gacha,d5 as global_get_copper_list,m5 as global_get_resource,h5 as global_import_save,g5 as global_info_subscribe,b5 as global_upgrade_copper};
